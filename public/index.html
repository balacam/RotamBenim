<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Travel List - RotamBenim</title>
    <meta name="description" content="Discover places to visit around the world, plan your routes and personalize your travel experience.">
    
    <!-- Tabler CSS -->
    <link href="https://unpkg.com/@tabler/core@latest/dist/css/tabler.min.css" rel="stylesheet">
    <!-- Tabler Icons -->
    <link href="https://unpkg.com/@tabler/icons-webfont@latest/tabler-icons.min.css" rel="stylesheet">
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Styles (Tabler öncelikli olacak) -->
    <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fullpage.js@4.0.20/dist/fullpage.min.css"> -->
    <!-- <link rel="stylesheet" href="styles-enhanced.css"> -->
</head>
<body>
    <!-- Navigation (Tabler Navbar) -->
    <header class="navbar navbar-expand-md navbar-dark bg-primary sticky-top">
      <div class="container-xl">
        <a href="#" class="navbar-brand">
          <span class="navbar-brand-text">RotamBenim</span>
        </a>
        <div class="navbar-nav flex-row order-md-last ms-auto" id="authContainer">
          <button id="googleSignInBtn" class="btn btn-primary d-flex align-items-center me-2">
            <i class="ti ti-brand-google me-2"></i> Sign in
          </button>
          <div id="userDisplay" class="d-none align-items-center">
            <img id="userPhoto" class="avatar avatar-sm me-2 border border-primary" alt="User Photo" loading="lazy">
            <span id="userName" class="text-white fw-medium me-3"></span>
            <button id="signOutBtn" class="btn btn-danger btn-sm">Sign Out</button>
          </div>
        </div>
      </div>
    </header>

    <!-- FullPage Container kaldırıldı, klasik yapı başlıyor -->
    <!-- Section 1: Hero (Tabler grid) -->
    <section class="bg-primary-lt py-6">
      <div class="container-xl">
        <div class="row align-items-center min-vh-60">
          <div class="col-lg-7 mx-auto text-center">
            <h1 class="display-2 fw-bold text-primary mb-3 animate-on-scroll">My Travel List</h1>
            <p class="lead text-secondary mb-4 animate-on-scroll delay-200">Discover and organize your dream destinations around the world. Create personalized travel routes and track your adventures.</p>
            <div class="d-flex justify-content-center gap-3 animate-on-scroll delay-400">
              <a href="#add-place" class="btn btn-primary">Add Places</a>
              <a href="#places-list" class="btn btn-outline-primary">View My List</a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Section 2: Add Place -->
    <section id="add-place" class="py-6">
      <div class="container-xl">
        <div class="row justify-content-center">
          <div class="col-lg-8">
            <div class="card card-md shadow-sm mb-4">
              <div class="card-body">
                <h2 class="h3 mb-4">Add New Places</h2>
                <!-- Tab Navigation -->
                <div class="mb-3">
                  <button id="addPlaceTab" class="btn btn-outline-dark me-2 active">Add Place</button>
                  <button id="addCountryTab" class="btn btn-outline-dark">Add Country</button>
                </div>
                <!-- Add Place Tab Content -->
                <div id="addPlaceContent">
                  <div class="d-flex flex-column flex-sm-row gap-2 mb-3">
                    <input type="text" id="newPlaceNameInput" placeholder="e.g., Eiffel Tower, Pamukkale" class="form-control" maxlength="100">
                    <button id="addPlaceBtn" class="btn btn-success" disabled>
                      <span id="addPlaceBtnText">Add Place</span>
                      <div id="addPlaceLoader" class="loader d-none ms-2"></div>
                    </button>
                  </div>
                  <div id="addPlaceMessage" class="text-sm mt-2"></div>
                </div>
                <!-- Add Country Tab Content -->
                <div id="addCountryContent" class="d-none">
                  <div class="text-center">
                    <button id="openCountrySelectorBtn" class="btn btn-purple" disabled>
                      <i class="ti ti-world me-2"></i>
                      <span id="openCountrySelectorBtnText">Select Countries to Add</span>
                    </button>
                  </div>
                  <div id="addCountryMessage" class="text-sm mt-3 text-center"></div>
                  <p class="text-sm text-secondary mt-3 text-center">Select countries to automatically add popular tourist destinations.</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Section 3: Places List -->
    <section id="places-list" class="py-6">
      <div class="container-xl">
        <div class="row justify-content-center">
          <div class="col-lg-10">
            <div class="card card-md shadow-sm mb-4">
              <div class="card-body">
                <h2 class="h3 mb-4">Places to Visit</h2>
                <!-- Filters -->
                <div class="row mb-3">
                  <div class="col-md-6 mb-2 mb-md-0">
                    <label for="filterCountry" class="form-label">Country:</label>
                    <select id="filterCountry" class="form-select">
                      <option value="all">All Countries</option>
                    </select>
                  </div>
                  <div class="col-md-6">
                    <label for="filterVisited" class="form-label">Status:</label>
                    <select id="filterVisited" class="form-select">
                      <option value="all">All</option>
                      <option value="notvisited" selected>Not Visited</option>
                      <option value="visited">Visited</option>
                    </select>
                  </div>
                </div>
                <!-- Route Generation -->
                <div class="mb-3 d-flex gap-2">
                  <button id="generateRouteBtn" class="btn btn-primary" disabled>
                    Create Route with Selected (<span id="selectedCount">0</span>)
                  </button>
                  <button id="clearSelectionBtn" class="btn btn-secondary d-none">
                    Clear Selection
                  </button>
                </div>
                <div id="routeLinkContainer" class="mb-3 text-sm"></div>
                <!-- Places List -->
                <div id="placesList" class="row g-2">
                  <p id="placesListStatus" class="text-secondary fst-italic p-4 text-center">
                    Please sign in with Google or wait for the places list to load...
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Section 4: Map View -->
    <section id="map-view" class="py-6">
      <div class="container-xl">
        <div class="row justify-content-center">
          <div class="col-lg-10">
            <div class="card card-md shadow-sm mb-4">
              <div class="card-body">
                <h2 class="h3 mb-4">Interactive Map</h2>
                <p id="mapLocationName" class="text-primary mb-3 h-6"></p>
                <div class="ratio ratio-16x9 mb-3">
                  <iframe id="mapFrame" class="w-100 h-100 border-0" loading="lazy" allowfullscreen referrerpolicy="no-referrer-when-downgrade" src="https://maps.google.com/maps?output=embed&q=World" title="Map view"></iframe>
                </div>
                <p class="text-sm text-secondary mt-3">
                  Marking a place on the map shows its general location. The route creation feature sends selected places to Google Maps.
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Section 5: About -->
    <section id="about" class="py-6">
      <div class="container-xl">
        <div class="row justify-content-center">
          <div class="col-lg-8">
            <div class="card card-md shadow-sm mb-4">
              <div class="card-body">
                <h2 class="h3 mb-4">About RotamBenim</h2>
                <div class="mb-4">RotamBenim helps you organize your travel plans and discover new destinations around the world.</div>
                <div class="mb-4">Create personalized travel routes, track places you've visited, and find new adventures.</div>
                <div class="mb-4">Your data is stored securely in Firebase and is accessible from any device.</div>
                <div class="d-flex gap-3">
                  <a href="#" class="text-primary"><i class="ti ti-brand-github icon-lg"></i></a>
                  <a href="#" class="text-primary"><i class="ti ti-brand-twitter icon-lg"></i></a>
                  <a href="#" class="text-primary"><i class="ti ti-brand-instagram icon-lg"></i></a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Country Selector Modal -->
    <div id="countrySelectorModal" class="modal fade" tabindex="-1">
      <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h3 id="countrySelectorTitle" class="modal-title">Select Countries to Add</h3>
            <button id="closeCountrySelectorBtn" type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div class="row" id="countryGrid">
              <!-- Countries will be populated here -->
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white p-6 rounded-lg shadow-xl flex items-center space-x-4">
            <div class="loader"></div>
            <span class="text-gray-700">Loading...</span>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toastContainer" class="fixed top-4 right-4 z-40 space-y-2"></div>

    <!-- Scripts: config.js en üstte, ardından diğer yardımcılar, en sonda app-enhanced.js -->
    <script src="js/config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/language-manager.js"></script>
    <script src="js/firebase-service.js"></script>
    <script src="js/place-suggestions.js"></script>
    <script src="js/place-manager.js"></script>
    <script src="js/place-card.js"></script>
    <script src="js/enhanced-background-manager.js"></script>
    <script src="js/auth-adapter.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // App-enhanced başlatıcı kodu burada çağrılacak
        if (window.EnhancedRotamBenimApp && typeof window.EnhancedRotamBenimApp.initialize === 'function') {
          window.EnhancedRotamBenimApp.initialize();
        } else if (window.appEnhancedInit) {
          window.appEnhancedInit();
        }
      });
    </script>
    <script src="js/app-enhanced.js"></script>

    <div id="authStatusElement" style="display:none"></div>
    <div id="userIdDisplayElement" style="display:none"></div>
    <div id="userNameElement" style="display:none"></div>
    <div id="mapLocationNameElement" style="display:none"></div>
    <div id="placesListStatusElement" style="display:none"></div>
    <div id="placesListElement" style="display:none"></div>
    <div id="countryHeaderElement" style="display:none"></div>
    <div id="addPlaceMessage" style="display:none"></div>
</body>
</html>
