<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rotam Benim - Basit Login Test</title>

    
    <!-- Tabler CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tabler/core@1.0.0-beta17/dist/css/tabler.min.css">
    
    <!-- Awesomplete CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/awesomplete/1.1.5/awesomplete.min.css" />
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Tabler Autocomplete JS -->
    <script src="https://cdn.jsdelivr.net/npm/@tabler/core@1.0.0-beta20/dist/js/tabler.min.js"></script>
    
    <!-- Awesomplete JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/awesomplete/1.1.5/awesomplete.min.js"></script>
    
    <style>
        :root {
            --card-opacity: 0.50;
        }
          body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .bg-overlay {
            position: fixed;
            z-index: 0;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: none;
            opacity: 0.5;
            background-size: cover;
            background-position: center;
            transition: opacity 0.5s;
        }
        
        .login-container {
            position: relative;
            z-index: 1;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .login-card {
            background: rgba(255,255,255,var(--card-opacity)) !important;
            border-radius: 16px;
            padding: 32px;
            max-width: 1200px;
            width: 100%;
            text-align: center;
        }
        
        .login-logo {
            font-size: 2rem;
            font-weight: 700;
            color: #206bc4;
            margin-bottom: 10px;
        }
        
        .login-subtitle {
            color: #626976;
            margin-bottom: 30px;
        }
        
        .google-btn {
            background: #4285f4;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 12px 24px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            width: 100%;
            margin-bottom: 20px;
        }
        
        .google-btn:hover {
            background: #3367d6;
            transform: translateY(-2px);
        }
        
        .google-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }
        
        .user-info {
            background: transparent !important;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            text-align: left;
        }
        
        .user-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            margin-right: 15px;
        }
        
        .status-message {
            margin-top: 15px;
            padding: 10px;
            border-radius: 6px;
            font-size: 14px;
        }
        
        .status-success {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        
        .status-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .status-info {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .logout-btn {
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 6px;
            padding: 8px 16px;
            font-size: 14px;
            cursor: pointer;
            transition: background 0.3s ease;
        }
        
        .logout-btn:hover {
            background: #c82333;
        }
        
        .table-responsive {
            width: 100%;
            overflow-x: auto;
            margin-top: 30px;
        }
        .table {
            width: 100%;
            min-width: 900px;
            font-size: 14px;
            background: white;
            border-radius: 8px;
            border-collapse: separate;
            border-spacing: 0;
        }
        .table th, .table td {
            padding: 16px 14px;
            white-space: nowrap;
            vertical-align: top;
            min-height: 32px;
            line-height: 1.6;
            text-align: left;
        }
        .table td:last-child {
            text-align: center;
        }
        .table th {
            background: #f1f3f9;
            position: sticky;
            top: 0;
            z-index: 1;
        }
        .table tr:nth-child(even) {
            background: #f8f9fa;
        }
        .table td {
            max-width: 180px;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .table td.description {
            max-width: 350px;
            white-space: normal;
            word-break: break-word;
        }
        .country-group-row {
            background: rgba(255,255,255,var(--card-opacity)) !important;
            font-weight: bold;
            font-size: 16px;
            text-align: left;
        }
        #filters { 
            position: relative;
        }
        #suggestions {
            position: absolute;
            left: 0;
            top: 100%;
            width: 350px;
            z-index: 9999;
            background: #fff;
            border: 1px solid #ccc;
            border-radius: 6px;
            min-height: 0;
        }
        .awesomplete {
            z-index: 99999 !important;
            position: relative;
        }
        .awesomplete > ul {
            z-index: 99999 !important;
            position: absolute;
        }
        .login-card, #filters {
            overflow: visible !important;
        }
        .table td.name {
            white-space: normal !important;
            word-break: break-word;
        }
        
        /* Settings Modal Styles */
        .settings-modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }
        
        .settings-modal-content {
            background-color: #fefefe;
            margin: 5% auto;
            padding: 0;
            border-radius: 12px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
        }
        
        .settings-header {
            padding: 20px 24px;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .settings-title {
            font-size: 20px;
            font-weight: 600;
            color: #111827;
            margin: 0;
        }
        
        .close-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #6b7280;
            padding: 4px;
            border-radius: 4px;
            transition: background-color 0.2s;
        }
        
        .close-btn:hover {
            background-color: #f3f4f6;
        }
        
        .settings-body {
            padding: 24px;
        }
        
        .profile-section {
            margin-bottom: 32px;
        }
        
        .profile-info {
            display: flex;
            align-items: center;
            padding: 16px;
            background-color: #f9fafb;
            border-radius: 8px;
            margin-bottom: 16px;
        }
        
        .profile-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            margin-right: 16px;
        }
        
        .profile-details h3 {
            margin: 0 0 4px 0;
            font-size: 16px;
            font-weight: 600;
            color: #111827;
        }
        
        .profile-details p {
            margin: 0;
            color: #6b7280;
            font-size: 14px;
        }
        
        .edit-profile-btn {
            display: flex;
            align-items: center;
            padding: 8px 16px;
            background: none;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            color: #374151;
            transition: all 0.2s;
        }
        
        .edit-profile-btn:hover {
            background-color: #f9fafb;
        }
        
        .edit-profile-btn svg {
            margin-right: 8px;
        }
        
        .connection-settings {
            margin-bottom: 32px;
        }
        
        .section-title {
            font-size: 18px;
            font-weight: 600;
            color: #111827;
            margin: 0 0 16px 0;
        }
        
        .connection-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px 0;
            border-bottom: 1px solid #f3f4f6;
        }
        
        .connection-item:last-child {
            border-bottom: none;
        }
        
        .connection-info {
            display: flex;
            align-items: center;
        }
        
        .connection-icon {
            width: 24px;
            height: 24px;
            margin-right: 12px;
        }
        
        .connection-name {
            font-size: 16px;
            color: #111827;
        }
        
        .toggle-switch {
            position: relative;
            width: 48px;
            height: 24px;
            background-color: #d1d5db;
            border-radius: 12px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .toggle-switch.active {
            background-color: #3b82f6;
        }
        
        .toggle-switch::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 20px;
            height: 20px;
            background-color: white;
            border-radius: 50%;
            transition: transform 0.3s;
        }
        
        .toggle-switch.active::after {
            transform: translateX(24px);
        }
        
        /* Account Management Styles */
        .account-management {
            margin-top: 32px;
            padding-top: 24px;
            border-top: 1px solid #f3f4f6;
        }
        
        .danger-zone {
            padding: 16px;
            border: 1px solid #fecaca;
            border-radius: 8px;
            background-color: #fef2f2;
        }
        
        .delete-account-btn {
            display: flex;
            align-items: center;
            padding: 8px 16px;
            background-color: #dc3545;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .delete-account-btn:hover {
            background-color: #c82333;
        }
        
        .delete-account-btn svg {
            margin-right: 8px;
        }
        
        #settingsBtn:hover {
            background: rgba(98, 105, 118, 0.1) !important;
            border-radius: 6px;
            transform: scale(1.05);
        }
    </style>
</head>
<body>
    <div class="bg-overlay" style="position:fixed;z-index:0;top:0;left:0;width:100vw;height:100vh;pointer-events:none;opacity:0.35;background-size:cover;background-position:center;transition:opacity 0.5s;"></div>
    <div class="login-container">
        <div class="login-card">
            <div class="login-logo">🌍 Rotam Benim</div>
            
            <!-- Language Selection (before login) -->
            <div style="margin-bottom: 20px; text-align: center;">
                <label for="preLoginLanguage" style="display: block; margin-bottom: 8px; color: #626976; font-size: 14px;">Dil / Language:</label>
                <select id="preLoginLanguage" style="min-width: 120px; padding: 8px 12px; border-radius: 6px; border: 1px solid #ccc; background: white; font-size: 14px;">
                    <option value="tr">🇹🇷 Türkçe</option>
                    <option value="en">🇺🇸 English</option>
                </select>
            </div>
            
            <!-- Login Button -->
            <button id="googleSignInBtn" class="google-btn">
                <svg width="20" height="20" viewBox="0 0 24 24">
                    <path fill="currentColor" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                    <path fill="currentColor" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                    <path fill="currentColor" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                    <path fill="currentColor" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                </svg>
                <span id="loginButtonText">Google ile Giriş Yap</span>
            </button>
            
            <!-- User Info (hidden by default) -->
            <div id="userInfo" class="user-info" style="display: none;">
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 15px;">
                    <div style="display: flex; align-items: center;">
                        <img id="userAvatar" class="user-avatar" src="" alt="User Avatar">
                        <div>
                            <div id="userName" style="font-weight: 600; font-size: 16px;"></div>
                            <div id="userEmail" style="color: #626976; font-size: 14px;"></div>
                        </div>
                    </div>
                </div>
                <div style="display: flex; align-items: center; gap: 8px;">
                    <button id="logoutBtn" class="logout-btn">Çıkış Yap</button>
                    <button id="settingsBtn" onclick="openSettingsModal()" style="background: transparent; border: none; cursor: pointer; padding: 6px; transition: all 0.3s ease; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center;" title="Ayarlar">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="#626976">
                            <path d="M12 15.5A3.5 3.5 0 0 1 8.5 12A3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5a3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97c0-.33-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1c0 .33.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.66Z"/>
                        </svg>
                    </button>
                </div>
            </div>
            
            <!-- Status Messages -->
            <div id="statusMessage"></div>
            
            <!-- Filtreler -->
            <div id="filters" style="display: flex; gap: 16px; justify-content: flex-start; align-items: center; margin-bottom: 18px; margin-top: 18px; position: relative;">

              <select id="countryFilter" style="min-width: 140px; padding: 6px 10px; border-radius: 6px; border: 1px solid #ccc;"></select>
              <label for="visitedFilter">Ziyaret:</label>
              <select id="visitedFilter" style="min-width: 120px; padding: 6px 10px; border-radius: 6px; border: 1px solid #ccc;">
                <option value="all">Tümü</option>
                <option value="visited">Gezildi</option>
                <option value="notvisited" selected>Gezilmedi</option>
              </select>
              <input id="universalSearchBox" class="form-control awesomplete" type="text" placeholder="Yer, şehir veya ülke adı..." style="min-width: 300px; padding: 8px 12px; border-radius: 6px; border: 1px solid #ccc;" autocomplete="off" list="locationSuggestions" />
              <button id="universalAddBtn" style="padding: 8px 20px; border-radius: 6px; border: none; background: #206bc4; color: white; font-weight: 500; cursor: pointer; margin-left: 10px;">Akıllı Ekle</button>
              
              <datalist id="locationSuggestions">
                <!-- Dinamik öneriler buraya eklenecek -->
              </datalist>
            </div>
            
            <!-- Gezilecek Yerler Tablosu -->
            <div id="placesTableWrapper" class="table-responsive">
              <div id="placesTableContainer" style="margin-top: 0; display: none;">
                <div style="margin-bottom: 15px; text-align: center;">
                  <button id="createRouteBtn" style="padding: 8px 20px; border-radius: 6px; border: none; background: #28a745; color: white; font-weight: 500; cursor: pointer; font-size: 14px;">🗺️ Seçili Yerler İçin Rota Oluştur</button>
                </div>
                <table id="placesTable" class="table table-sm">
                  <thead>
                    <tr>
                      <th>Yer Adı</th>
                      <th>Şehir</th>
                      <th>Kategori</th>
                      <th>Açıklama</th>
                      <th>Ziyaret Edildi mi?</th>
                      <th>Rota İçin Seç</th>
                      <th>Google Maps</th>
                      <th>Sil</th>
                    </tr>
                  </thead>
                  <tbody>
                    <!-- Satırlar buraya eklenecek -->
                  </tbody>
                </table>
              </div>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        // Firebase imports
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInWithPopup, linkWithPopup, GoogleAuthProvider, TwitterAuthProvider, signOut, onAuthStateChanged, deleteUser } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-analytics.js";
        import { getFirestore, collection, getDocs, addDoc, query, where, doc, deleteDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyB6bIJOkooeRSKWtb09zdNmMIjHDbXCzYA",
            authDomain: "rotambenim.firebaseapp.com",
            projectId: "rotambenim",
            storageBucket: "rotambenim.firebasestorage.app",
            messagingSenderId: "374285362920",
            appId: "1:374285362920:web:b4058cf4a93e7337168b5d",
            measurementId: "G-0QVZ4LDYPJ"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const analytics = getAnalytics(app);
        const db = getFirestore(app);

        // DOM elements
        const googleSignInBtn = document.getElementById('googleSignInBtn');
        const userInfo = document.getElementById('userInfo');
        const userAvatar = document.getElementById('userAvatar');
        const userName = document.getElementById('userName');
        const userEmail = document.getElementById('userEmail');
        const logoutBtn = document.getElementById('logoutBtn');
        const statusMessage = document.getElementById('statusMessage');
        const placesTableContainer = document.getElementById('placesTableContainer');
        const placesTableBody = document.querySelector('#placesTable tbody');
        const universalAddBtn = document.getElementById('universalAddBtn');
        const universalSearchBox = document.getElementById('universalSearchBox');

        const preLoginLanguage = document.getElementById('preLoginLanguage');
        const loginButtonText = document.getElementById('loginButtonText');
        let suggestionResults = [];

        
        // Dil ayarları
        let currentLanguage = 'tr';

        // Ülke isimleri mapping (tr/en)
        const countryNames = {
          'turkey': { tr: 'TÜRKİYE', en: 'TURKEY' },
          'germany': { tr: 'ALMANYA', en: 'GERMANY' },
          'france': { tr: 'FRANSA', en: 'FRANCE' },
          'italy': { tr: 'İTALYA', en: 'ITALY' },
          'spain': { tr: 'İSPANYA', en: 'SPAIN' },
          'greece': { tr: 'YUNANİSTAN', en: 'GREECE' },
          'netherlands': { tr: 'HOLLANDA', en: 'NETHERLANDS' },
          'belgium': { tr: 'BELÇİKA', en: 'BELGIUM' },
          'austria': { tr: 'AVUSTURYA', en: 'AUSTRIA' },
          'switzerland': { tr: 'İSVİÇRE', en: 'SWITZERLAND' },
          'portugal': { tr: 'PORTEKİZ', en: 'PORTUGAL' },
          'czech republic': { tr: 'ÇEK CUMHURİYETİ', en: 'CZECH REPUBLIC' },
          'poland': { tr: 'POLONYA', en: 'POLAND' },
          'romania': { tr: 'ROMANYA', en: 'ROMANIA' },
          'bulgaria': { tr: 'BULGARİSTAN', en: 'BULGARIA' },
          'latvia': { tr: 'LETONYA', en: 'LATVIA' },
          'lithuania': { tr: 'LİTVANYA', en: 'LITHUANIA' },
          'estonia': { tr: 'ESTONYA', en: 'ESTONIA' },
          'hungary': { tr: 'MACARİSTAN', en: 'HUNGARY' },
          'slovakia': { tr: 'SLOVAKYA', en: 'SLOVAKIA' },
          'slovenia': { tr: 'SLOVENYA', en: 'SLOVENIA' },
          'croatia': { tr: 'HIRVATİSTAN', en: 'CROATIA' },
          'serbia': { tr: 'SIRBİSTAN', en: 'SERBIA' },
          'ukraine': { tr: 'UKRAYNA', en: 'UKRAINE' },
          'norway': { tr: 'NORVEÇ', en: 'NORWAY' },
          'sweden': { tr: 'İSVEÇ', en: 'SWEDEN' },
          'finland': { tr: 'FİNLANDİYA', en: 'FINLAND' },
          'south korea': { tr: 'GÜNEY KORE', en: 'SOUTH KOREA' },
          'japan': { tr: 'JAPONYA', en: 'JAPAN' },
          'china': { tr: 'ÇİN', en: 'CHINA' },
          'usa': { tr: 'AMERİKA', en: 'USA' },
          'uk': { tr: 'BİRLEŞİK KRALLIK', en: 'UK' },
          // Diğer ülkeler eklenebilir
        };
        const currentLang = 'tr'; // İleride 'en' yapılabilir

        // Show status message
        function showStatus(message, type = 'info') {
            // Modal açık mı kontrol et
            const modal = document.getElementById('settingsModal');
            const isModalOpen = modal && modal.style.display === 'block';
            
            // Modal açıksa modal içindeki status div'i kullan, değilse normal status div'i
            const statusDiv = isModalOpen ? 
                document.getElementById('modalStatusMessage') : 
                document.getElementById('statusMessage');
                
            if (!statusDiv) return;
            
            // Mesaj tipine göre stil belirle
            let bgColor, textColor;
            switch(type) {
                case 'success':
                    bgColor = '#d4edda';
                    textColor = '#155724';
                    break;
                case 'error':
                    bgColor = '#f8d7da';
                    textColor = '#721c24';
                    break;
                case 'info':
                default:
                    bgColor = '#d1ecf1';
                    textColor = '#0c5460';
                    break;
            }
            
            // Modal içindeyse farklı stil, dışındaysa fixed positioning
            const styleProps = isModalOpen ? 
                `background-color: ${bgColor};
                 color: ${textColor};
                 padding: 10px 15px;
                 border-radius: 5px;
                 margin: 0 0 15px 0;
                 border: 1px solid ${textColor}20;
                 font-size: 14px;` :
                `background-color: ${bgColor};
                 color: ${textColor};
                 padding: 10px 15px;
                 border-radius: 5px;
                 margin: 10px 0;
                 border: 1px solid ${textColor}20;
                 font-size: 14px;
                 position: fixed;
                 top: 20px;
                 right: 20px;
                 z-index: 10000;
                 max-width: 400px;
                 box-shadow: 0 4px 12px rgba(0,0,0,0.15);`;
            
            statusDiv.innerHTML = `
                <div style="${styleProps}">
                    ${message}
                </div>
            `;
            
            // 10 saniye sonra mesajı temizle
            setTimeout(() => {
                if (statusDiv) {
                    statusDiv.innerHTML = '';
                }
            }, 10000);
        }
        
        // Make showStatus globally accessible
        window.showStatus = showStatus;
        
        // Make Firebase auth providers globally accessible
        window.TwitterAuthProvider = TwitterAuthProvider;
        window.GoogleAuthProvider = GoogleAuthProvider;
        window.signInWithPopup = signInWithPopup;
        window.linkWithPopup = linkWithPopup;
        window.auth = auth;

        // Handle Google Sign In
        async function handleGoogleSignIn() {
            try {
                googleSignInBtn.disabled = true;
                showStatus('Google ile giriş yapılıyor...', 'info');
                
                const provider = new GoogleAuthProvider();
                const result = await signInWithPopup(auth, provider);
                
                console.log('Giriş başarılı:', result.user);
                showStatus('Giriş başarılı!', 'success');
                
            } catch (error) {
                console.error('Giriş hatası:', error);
                
                let errorMessage = 'Giriş yapılırken bir hata oluştu.';
                if (error.code === 'auth/popup-closed-by-user') {
                    errorMessage = 'Giriş iptal edildi.';
                } else if (error.code === 'auth/network-request-failed') {
                    errorMessage = 'Ağ hatası. İnternet bağlantınızı kontrol edin.';
                } else if (error.code === 'auth/unauthorized-domain') {
                    errorMessage = 'Bu domain için giriş yetkisi yok. Firebase Console\'da domain\'i ekleyin.';
                }
                
                showStatus(errorMessage, 'error');
                googleSignInBtn.disabled = false;
            }
        }

        // Handle Sign Out
        async function handleSignOut() {
            try {
                await signOut(auth);
                console.log('Çıkış başarılı');
                showStatus('Çıkış yapıldı.', 'success');
                // Çıkış sonrası login sayfasına yönlendir
                setTimeout(() => {
                    window.location.href = '/index.html';
                }, 1000);
            } catch (error) {
                console.error('Çıkış hatası:', error);
                showStatus('Çıkış yapılırken hata oluştu.', 'error');
            }
        }

        // Update UI based on auth state
        function updateUI(user) {
            const placesTableContainer = document.getElementById('placesTableContainer');
            const preLoginLanguage = document.getElementById('preLoginLanguage');
            
            if (user) {
                // User is signed in
                googleSignInBtn.style.display = 'none';
                userInfo.style.display = 'block';
                
                userName.textContent = user.displayName || 'Kullanıcı';
                userEmail.textContent = user.email || '';
                
                if (user.photoURL) {
                    userAvatar.src = user.photoURL;
                } else {
                    userAvatar.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIHZpZXdCb3g9IjAgMCA1MCA1MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjUiIGN5PSIyNSIgcj0iMjUiIGZpbGw9IiM2MjY5NzYiLz4KPHN2ZyB4PSIxMiIgeT0iMTIiIHdpZHRoPSIyNiIgaGVpZ2h0PSIyNiIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJ3aGl0ZSI+CjxwYXRoIGQ9Ik0xMiAxMmMyLjIxIDAgNC0xLjc5IDQtNHMtMS43OS00LTQtNC00IDEuNzktNCA0IDEuNzkgNCA0IDR6bTAgMmMtMi42NyAwLTggMS4zNC04IDR2MmgxNnYtMmMwLTIuNjYtNS4zMy00LTgtNHoiLz4KPC9zdmc+Cjwvc3ZnPgo=';
                }
                
            } else {
                // User is signed out - login sayfasına yönlendir
                console.log('Kullanıcı çıkış yaptı, login sayfasına yönlendiriliyor...');
                window.location.href = '/index.html';
            }
        }

        // Auth state listener
        onAuthStateChanged(auth, async (user) => {
            console.log('Auth state changed:', user ? 'User signed in' : 'User signed out');
            updateUI(user);
            
            if (user) {
                // Tüm popüler yerleri ve ülkeleri topla
                const allPopularPlaces = await getAllPopularPlaces();
                const allCountryCodes = await getAllPopularCountryCodes();
                // Kullanıcının mevcut yerlerini çek
                const userPlacesRef = collection(db, `users/${user.uid}/places`);
                const snapshot = await getDocs(userPlacesRef);
                const existingPlaces = new Map();
                snapshot.forEach(doc => {
                    const d = doc.data();
                    const key = `${(d.country || '').toUpperCase()}|||${(d.name || '').trim()}`;
                    existingPlaces.set(key, { ...d, docId: doc.id });
                });
                // Eksik popüler yerleri ekle
                let addedCount = 0;
                for (const p of allPopularPlaces) {
                    const country = (p.country_tr || p.country_en || '').toUpperCase();
                    const name = p.name_tr;
                    const key = `${country}|||${name}`;
                    if (!existingPlaces.has(key)) {
                        await addDoc(userPlacesRef, filterUndefinedFields({
                            name: p.name_tr,
                            city: p.city_tr,
                            country: p.country_tr ? p.country_tr.toUpperCase() : undefined,
                            category: p.category_tr,
                            description: p.description_tr,
                            visited: false,
                            name_en: p.name_en,
                            city_en: p.city_en,
                            country_en: p.country_en ? p.country_en.toUpperCase() : undefined,
                            category_en: p.category_en,
                            description_en: p.description_en
                        }));
                        addedCount++;
                    } else {
                        // Açıklama eksikse güncelle
                        const place = existingPlaces.get(key);
                        if (!place.description || place.description.trim() === '') {
                            const { doc, updateDoc } = await import('https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js');
                            const docRef = doc(db, `users/${user.uid}/places`, place.docId);
                            await updateDoc(docRef, filterUndefinedFields({
                                description: p.description_tr,
                                name_en: p.name_en,
                                city_en: p.city_en,
                                country_en: p.country_en ? p.country_en.toUpperCase() : undefined,
                                category_en: p.category_en,
                                description_en: p.description_en
                            }));
                        }
                    }
                }
                if (addedCount > 0) showStatus(`${addedCount} yeni popüler yer otomatik eklendi!`, 'success');
                else showStatus('Tüm popüler yerler zaten mevcut.', 'info');
                // Ülke dropdown'ını güncelle
                await updateCountryDropdown(user, allCountryCodes);
            }
            
            loadPlacesTable(user);
        });

        // Event listeners
        googleSignInBtn.addEventListener('click', handleGoogleSignIn);
        logoutBtn.addEventListener('click', handleSignOut);
        
        // Şehir/Ülke önerileri için input event listener (sayfa yüklendiğinde hemen çalışır)
        universalSearchBox.addEventListener('input', function() {
          const inputValue = this.value.toLowerCase();
          const locationSuggestions = document.getElementById('locationSuggestions');
          
          if (inputValue.length < 2) {
            locationSuggestions.innerHTML = '';
            return;
          }
          
          // Şehir ve ülke önerileri listesi
          const suggestions = [
            // Popüler şehirler
            'Aachen', 'Berlin', 'München', 'Hamburg', 'Köln', 'Frankfurt', 'Stuttgart', 'Düsseldorf',
            'Paris', 'Lyon', 'Marseille', 'Toulouse', 'Nice', 'Bordeaux', 'Lille', 'Strasbourg',
            'Roma', 'Milano', 'Napoli', 'Torino', 'Venezia', 'Firenze', 'Bologna', 'Palermo',
            'Madrid', 'Barcelona', 'Valencia', 'Sevilla', 'Bilbao', 'Málaga', 'Zaragoza', 'Murcia',
            'London', 'Manchester', 'Birmingham', 'Liverpool', 'Leeds', 'Glasgow', 'Edinburgh', 'Bristol',
            'New York', 'Los Angeles', 'Chicago', 'Houston', 'Phoenix', 'Philadelphia', 'San Antonio', 'San Diego',
            'Tokyo', 'Osaka', 'Kyoto', 'Yokohama', 'Nagoya', 'Sapporo', 'Fukuoka', 'Kobe',
            'Istanbul', 'Ankara', 'İzmir', 'Bursa', 'Antalya', 'Adana', 'Konya', 'Gaziantep',
            // Ülkeler
            'Germany', 'Almanya', 'France', 'Fransa', 'Italy', 'İtalya', 'Spain', 'İspanya', 
            'United Kingdom', 'İngiltere', 'United States', 'Amerika', 'Japan', 'Japonya', 'Turkey', 'Türkiye',
            'Netherlands', 'Hollanda', 'Belgium', 'Belçika', 'Switzerland', 'İsviçre', 'Austria', 'Avusturya', 
            'Portugal', 'Portekiz', 'Greece', 'Yunanistan', 'Poland', 'Polonya',
            'Czech Republic', 'Çek Cumhuriyeti', 'Hungary', 'Macaristan', 'Romania', 'Romanya', 
            'Bulgaria', 'Bulgaristan', 'Croatia', 'Hırvatistan', 'Slovakia', 'Slovakya', 'Slovenia', 'Slovenya',
            'Estonia', 'Estonya', 'Latvia', 'Letonya', 'Lithuania', 'Litvanya', 'Canada', 'Kanada', 
            'Australia', 'Avustralya', 'South Korea', 'Güney Kore', 'China', 'Çin', 'India', 'Hindistan',
            'Brazil', 'Brezilya', 'Russia', 'Rusya', 'Mexico', 'Meksika', 'Argentina', 'Arjantin'
          ];
          
          // Filtreleme
          const filteredSuggestions = suggestions.filter(suggestion => 
            suggestion.toLowerCase().includes(inputValue)
          ).slice(0, 10); // İlk 10 öneriyi göster
          
          // Datalist'i güncelle
          locationSuggestions.innerHTML = '';
          filteredSuggestions.forEach(suggestion => {
            const option = document.createElement('option');
            option.value = suggestion;
            locationSuggestions.appendChild(option);
          });
        });
        
        // Awesomplete ile öneri getir
        const awesomplete = new Awesomplete(universalSearchBox, {
          minChars: 2,
          maxItems: 10,
          autoFirst: true,
          list: [],
          item: function(suggestion, input) {
            // Açıklama başlığın altında değil, başlığın hemen üstünde olacak şekilde düzenle
            const html = `<div style='display:flex;flex-direction:column;'>
              <span style='font-size:12px;color:#888;margin-bottom:2px;'>${suggestion.description || ''}</span>
              <strong>${suggestion.label}</strong>
            </div>`;
            const li = document.createElement('li');
            li.innerHTML = html;
            return li;
          },
          replace: function(suggestion) {
            this.input.value = suggestion.label;
          }
        });
        let lastSuggestions = [];
        universalSearchBox.addEventListener('input', async () => {
          const query = universalSearchBox.value.trim();
          console.log('Search query:', query); // Debug log
          if (!query || query.length < 2) {
            awesomplete.list = [];
            lastSuggestions = [];
            return;
          }
          // Wikipedia'dan çek
          let wikiResults = [];
  try {
            const url = `https://en.wikipedia.org/w/api.php?action=query&list=search&srsearch=${encodeURIComponent(query)}+tourism+attraction+place&format=json&origin=*`;
            const resp = await fetch(url);
            const data = await resp.json();
            if (data.query && data.query.search) {
              // Sıkı filtre: sadece gezilecek yer anahtar kelimeleriyle filtrele
              const touristKeywords = [
                "city", "town", "village", "park", "mountain", "lake", "museum", "site", "ruins", "castle", "beach", "island", "national park", "tourist attraction", "region", "province", "district", "valley", "canyon", "bay", "forest", "archaeological", "ancient", "historic", "landmark", "monument", "temple", "cathedral", "mosque", "church", "palace", "bazaar", "market", "bridge", "tower", "garden", "zoo", "aquarium", "harbor", "square", "plaza", "waterfall", "thermal", "spa", "resort", "cave", "gorge", "cliff", "fortress", "citadel", "basilica", "synagogue", "pagoda", "shrine", "observatory", "amphitheater", "arena", "stadium", "theater", "opera", "gallery", "exhibition", "statue", "sculpture", "fountain", "lighthouse", "botanical", "safari", "viewpoint", "panorama", "vista", "lookout", "observation", "peak", "summit"
              ];
              
              // Kişi isimlerini ve yazarları filtrelemek için negatif anahtar kelimeler
              const negativeKeywords = [
                "author", "writer", "novelist", "poet", "politician", "actor", "actress", "director", "producer", "singer", "musician", "composer", "artist", "painter", "sculptor", "philosopher", "scientist", "inventor", "entrepreneur", "businessman", "businesswoman", "athlete", "player", "born", "died", "biography"
              ];
              
              wikiResults = data.query.search.filter(item => {
                const text = (item.title + ' ' + item.snippet).toLowerCase();
                
                // Turistik yer anahtar kelimelerinden en az birini içermeli
                const hasTouristKeyword = touristKeywords.some(kw => text.includes(kw));
                
                // Negatif anahtar kelimelerden hiçbirini içermemeli
                const hasNegativeKeyword = negativeKeywords.some(kw => text.includes(kw));
                
                // Turistik yer anahtar kelimesi içermeli VE negatif anahtar kelime içermemeli
                return hasTouristKeyword && !hasNegativeKeyword;
              }).map(item => ({
                label: item.title,
                value: item.title,
                description: item.snippet.replace(/<[^>]+>/g, ''),
                source: 'wikipedia'
              }));
            }
          } catch {}
          // Nominatim'den çek
          let nominatimResults = [];
          try {
            const nominatimUrl = `https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(query)}&format=json&addressdetails=1&limit=10&accept-language=tr,en`;
            console.log('Nominatim URL:', nominatimUrl); // Debug log
            const nominatimResp = await fetch(nominatimUrl, {
              headers: {
                'User-Agent': 'RotamBenim/1.0 (https://github.com/balacam/RotamBenim)'
              }
            });
            const nominatimData = await nominatimResp.json();
            console.log('Nominatim response:', nominatimData); // Debug log
            
            if (nominatimData && nominatimData.length > 0) {
              // Kişi isimlerini filtrelemek için negatif anahtar kelimeler
              const negativeKeywords = [
                "author", "writer", "novelist", "poet", "politician", "actor", "actress", "director", "producer", "singer", "musician", "composer", "artist", "painter", "sculptor", "philosopher", "scientist", "inventor", "entrepreneur", "businessman", "businesswoman", "athlete", "player"
              ];
              
              nominatimResults = nominatimData
                .filter(item => {
                  // Kişi isimlerini filtrele
                  const text = (item.display_name || '').toLowerCase();
                  return !negativeKeywords.some(kw => text.includes(kw));
                })
                .map(item => {
                  const address = item.address || {};
                  const country = address.country || '';
                  const state = address.state || address.region || '';
                  const city = address.city || address.town || address.village || '';
                  
                  let description = '';
                  if (city && country) {
                    description = `${city}, ${country}`;
                  } else if (state && country) {
                    description = `${state}, ${country}`;
                  } else if (country) {
                    description = country;
                  }
                  
                  return {
                    label: item.name || item.display_name.split(',')[0],
                    value: item.name || item.display_name.split(',')[0],
                    description: description,
                    source: 'nominatim',
                    lat: parseFloat(item.lat),
                    lon: parseFloat(item.lon)
                  };
                });
            }
          } catch {}
          // Popüler yerlerden arama yap
          let popularResults = [];
          try {
            const response = await fetch('/popular-places.json');
            const popularPlaces = await response.json();
            // Hem Türkçe hem İngilizce isimlerde arama yap
            popularResults = popularPlaces
              .filter(p => {
                const nameTr = (p.name_tr || '').toLowerCase();
                const nameEn = (p.name_en || '').toLowerCase();
                const cityTr = (p.city_tr || '').toLowerCase();
                const cityEn = (p.city_en || '').toLowerCase();
                const searchQuery = query.toLowerCase();
                
                return nameTr.includes(searchQuery) || 
                       nameEn.includes(searchQuery) || 
                       cityTr.includes(searchQuery) || 
                       cityEn.includes(searchQuery);
              })
              .map(p => ({
                label: p.name_tr,
                value: p.name_tr,
                description: `${p.city_tr || ''}, ${p.country_tr || ''} - ${p.category_tr || ''}`,
                source: 'popular',
                data: p // Tüm veriyi sakla
              }));
          } catch {}
          
          // Sonuçları birleştir ve sırala (popüler yerler önce gelsin)
          const allResults = [...popularResults, ...wikiResults, ...nominatimResults].filter((v, i, a) =>
            a.findIndex(t => t.value === v.value) === i
          );
          console.log('All results:', allResults); // Debug log
          awesomplete.list = allResults;
          lastSuggestions = allResults;
        });
        // Seçim veya enter ile ekle
        universalSearchBox.addEventListener('awesomplete-selectcomplete', async (e) => {
          const user = auth.currentUser;
          if (!user) {
            showStatus('Giriş yapmadan yer ekleyemezsiniz.', 'error');
            return;
          }
          const selectedLabel = universalSearchBox.value.trim();
          const item = lastSuggestions.find(s => s.label === selectedLabel) || { value: selectedLabel, description: '', source: 'manual' };
          universalAddBtn.disabled = true;
          try {
            // Eğer seçilen öğe popüler yerlerden geldiyse, doğrudan o veriyi kullan
            if (item.source === 'popular' && item.data) {
              const placeData = item.data;
              await addDoc(collection(db, `users/${user.uid}/places`), {
                name: placeData.name_tr || item.value,
                city: placeData.city_tr || '',
                country: (placeData.country_tr || '').toUpperCase(),
                category: placeData.category_tr || '',
                description: placeData.description_tr || item.description || '',
                visited: false,
                name_en: placeData.name_en || '',
                city_en: placeData.city_en || '',
                country_en: (placeData.country_en || '').toUpperCase(),
                category_en: placeData.category_en || '',
                description_en: placeData.description_en || ''
              });
            } else {
              // Popüler yerler JSON'unda arama
              let placeData = null;
              try {
                const response = await fetch('/popular-places.json');
                const popularPlaces = await response.json();
                // Hem Türkçe hem İngilizce isme bak
                placeData = popularPlaces.find(p =>
                  p.name_tr?.toLowerCase() === selectedLabel.toLowerCase() ||
                  p.name_en?.toLowerCase() === selectedLabel.toLowerCase()
                );
              } catch {}
              
              // Eğer popüler yerler JSON'unda varsa, tüm alanları oradan doldur
              if (placeData) {
                await addDoc(collection(db, `users/${user.uid}/places`), {
                  name: placeData.name_tr || item.value,
                  city: placeData.city_tr || '',
                  country: (placeData.country_tr || '').toUpperCase(),
                  category: placeData.category_tr || '',
                  description: placeData.description_tr || item.description || '',
                  visited: false,
                  name_en: placeData.name_en || '',
                  city_en: placeData.city_en || '',
                  country_en: (placeData.country_en || '').toUpperCase(),
                  category_en: placeData.category_en || '',
                  description_en: placeData.description_en || ''
                });
              } else {
                // Yoksa, mevcut mantıkla ekle ama ülkeyi seçili ülke yap
                await addDoc(collection(db, `users/${user.uid}/places`), {
                  name: item.value,
                  city: '',
                  country: (countryFilter.value || '').toUpperCase(),
                  category: '',
                  description: item.description || '',
                  visited: false
                });
              }
            }
            showStatus('Yeni yer eklendi!', 'success');
            universalSearchBox.value = '';
            universalAddBtn.disabled = false;
            loadPlacesTable(user);
          } catch (err) {
            showStatus('Yer eklenirken hata: ' + err.message, 'error');
            universalAddBtn.disabled = false;
          }
        });

        // Initialize
        console.log('Firebase initialized successfully');
        showStatus('Uygulama hazır. Giriş yapabilirsiniz.', 'info');

        // Popüler yerler JSON'ını yükle ve işle
        async function loadPopularPlaces() {
          try {
            const response = await fetch('/popular-places.json');
            const popularPlaces = await response.json();
            return popularPlaces;
          } catch (error) {
            console.error('Popüler yerler yüklenemedi:', error);
            return [];
          }
        }

        // Yeni kullanıcı için popüler yerleri yükle
        async function loadPopularPlacesForNewUser(user) {
          try {
            const popularPlaces = await loadPopularPlaces();
            const userPlacesRef = collection(db, `users/${user.uid}/places`);
            
            // Kullanıcının mevcut yerlerini kontrol et
            const existingSnapshot = await getDocs(userPlacesRef);
            const existingPlaces = new Set();
            existingSnapshot.forEach(doc => {
              const data = doc.data();
              // Hem Türkçe hem İngilizce isimleri kontrol et
              existingPlaces.add(`${data.name}-${data.country}`);
              if (data.name_en) {
                existingPlaces.add(`${data.name_en}-${data.country_en || data.country}`);
              }
            });

            // Popüler yerleri ekle (eğer yoksa)
            let addedCount = 0;
            for (const place of popularPlaces) {
              const placeKeyTr = `${place.name_tr}-${place.country_tr.toUpperCase()}`;
              const placeKeyEn = `${place.name_en}-${place.country_en.toUpperCase()}`;
              
              if (!existingPlaces.has(placeKeyTr) && !existingPlaces.has(placeKeyEn)) {
                await addDoc(userPlacesRef, {
                  name: place.name_tr,
                  city: place.city_tr,
                  country: place.country_tr.toUpperCase(),
                  category: place.category_tr,
                  description: place.description_tr,
                  visited: false,
                  name_en: place.name_en,
                  city_en: place.city_en,
                  country_en: place.country_en.toUpperCase(),
                  category_en: place.category_en,
                  description_en: place.description_en
                });
                addedCount++;
              }
            }
            
            if (addedCount > 0) {
              showStatus(`${addedCount} popüler yer eklendi!`, 'success');
            } else {
              showStatus('Tüm popüler yerler zaten mevcut.', 'info');
            }
          } catch (error) {
            console.error('Popüler yerler yüklenirken hata:', error);
            showStatus('Popüler yerler yüklenirken hata oluştu: ' + error.message, 'error');
          }
        }

        // Firestore'a undefined alan göndermeyi engelleyen yardımcı fonksiyon
        function filterUndefinedFields(obj) {
          const result = {};
          for (const key in obj) {
            if (obj[key] !== undefined) {
              result[key] = obj[key];
            }
          }
          return result;
        }

        // Mevcut kullanıcı için eksik açıklamaları doldur
        async function fillMissingDescriptions(user) {
          try {
            const popularPlaces = await loadPopularPlaces();
            const userPlacesRef = collection(db, `users/${user.uid}/places`);
            const snapshot = await getDocs(userPlacesRef);
            
            let updatedCount = 0;
            const { doc, updateDoc } = await import('https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js');
            
            for (const docSnapshot of snapshot.docs) {
              const data = docSnapshot.data();
              // Açıklama eksikse popüler yerlerden bul
              if (!data.description || data.description.trim() === '') {
                // Hem Türkçe hem İngilizce isimlerle eşleştir
                let matchingPlace = popularPlaces.find(place => 
                  (place.name_tr === data.name && place.country_tr.toUpperCase() === data.country) ||
                  (place.name_en === data.name && place.country_en.toUpperCase() === data.country)
                );
                
                // Eğer bulunamazsa, sadece isimle eşleştir
                if (!matchingPlace) {
                  matchingPlace = popularPlaces.find(place => 
                    place.name_tr === data.name || place.name_en === data.name
                  );
                }
                
                if (matchingPlace) {
                  const docRef = doc(db, `users/${user.uid}/places`, docSnapshot.id);
                  await updateDoc(docRef, {
                    description: matchingPlace.description_tr,
                    name_en: matchingPlace.name_en,
                    city_en: matchingPlace.city_en,
                    country_en: matchingPlace.country_en.toUpperCase(),
                    category_en: matchingPlace.category_en,
                    description_en: matchingPlace.description_en
                  });
                  updatedCount++;
                }
              }
            }
            
            if (updatedCount > 0) {
              showStatus(`${updatedCount} yerin açıklaması güncellendi!`, 'success');
            } else {
              showStatus('Güncellenecek açıklama bulunamadı.', 'info');
            }
          } catch (error) {
            console.error('Açıklamalar doldurulurken hata:', error);
            showStatus('Açıklamalar doldurulurken hata oluştu: ' + error.message, 'error');
          }
        }

        // Ülke kayıtlarını birleştir ve eksik yerleri ekle
        async function mergeCountriesAndAddMissingPlaces(user) {
          try {
            const popularPlaces = await loadPopularPlaces();
            const userPlacesRef = collection(db, `users/${user.uid}/places`);
            const snapshot = await getDocs(userPlacesRef);
            const { doc, updateDoc, deleteDoc } = await import('https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js');

            // Tüm yerleri ülke+isim kombinasyonuna göre grupla
            const placeMap = new Map();
            const toDelete = [];
            for (const docSnapshot of snapshot.docs) {
              const data = docSnapshot.data();
              const country = (data.country || '').toUpperCase();
              const name = (data.name || '').trim();
              const key = `${country}|||${name}`;
              if (!placeMap.has(key)) {
                placeMap.set(key, { ...data, docId: docSnapshot.id });
              } else {
                // Aynı ülke ve isimde birden fazla kayıt varsa, sadece birini bırak
                toDelete.push(docSnapshot.id);
              }
            }

            // Silinecek tekrar eden kayıtları sil
            for (const docId of toDelete) {
              const docRef = doc(db, `users/${user.uid}/places`, docId);
              await deleteDoc(docRef);
            }

            // Açıklamaları güncelle ve eksik popüler yerleri ekle
            let updatedCount = 0;
            let addedCount = 0;
            const existingKeys = new Set(placeMap.keys());
            // Açıklamaları güncelle
            for (const [key, place] of placeMap.entries()) {
              if (!place.description || place.description.trim() === '') {
                const [country, name] = key.split('|||');
                const matching = popularPlaces.find(p =>
                  (p.country_tr && p.country_tr.toUpperCase() === country && p.name_tr === name) ||
                  (p.country_en && p.country_en.toUpperCase() === country && p.name_en === name)
                );
                if (matching) {
                  const docRef = doc(db, `users/${user.uid}/places`, place.docId);
                  await updateDoc(docRef, filterUndefinedFields({
                    description: matching.description_tr,
                    name_en: matching.name_en,
                    city_en: matching.city_en,
                    country_en: matching.country_en ? matching.country_en.toUpperCase() : undefined,
                    category_en: matching.category_en,
                    description_en: matching.description_en
                  }));
                  updatedCount++;
                }
              }
            }
            // Eksik popüler yerleri ekle
            for (const p of popularPlaces) {
              const country = (p.country_tr || p.country_en || '').toUpperCase();
              const name = p.name_tr;
              const key = `${country}|||${name}`;
              if (!existingKeys.has(key)) {
                await addDoc(userPlacesRef, filterUndefinedFields({
                  name: p.name_tr,
                  city: p.city_tr,
                  country: p.country_tr ? p.country_tr.toUpperCase() : undefined,
                  category: p.category_tr,
                  description: p.description_tr,
                  visited: false,
                  name_en: p.name_en,
                  city_en: p.city_en,
                  country_en: p.country_en ? p.country_en.toUpperCase() : undefined,
                  category_en: p.category_en,
                  description_en: p.description_en
                }));
                addedCount++;
              }
            }
            let msg = '';
            if (toDelete.length > 0) msg += `${toDelete.length} tekrar eden kayıt silindi. `;
            if (updatedCount > 0) msg += `${updatedCount} açıklama güncellendi. `;
            if (addedCount > 0) msg += `${addedCount} yeni yer eklendi.`;
            if (!msg) msg = 'Herhangi bir değişiklik yapılmadı.';
            showStatus(msg, 'success');
          } catch (error) {
            console.error('Ülke birleştirme hatası:', error);
            showStatus('Ülke birleştirme hatası: ' + error.message, 'error');
          }
        }

        async function loadPlacesTable(user) {
          if (!user) {
            placesTableContainer.style.display = 'none';
            return;
          }
          // Kullanıcıya ait places koleksiyonu yolu
          const placesCol = collection(db, `users/${user.uid}/places`);
          const snapshot = await getDocs(placesCol);

          // Tabloyu temizle
          placesTableBody.innerHTML = '';

          // Filtre comboboxlarını hazırla
          const countryFilter = document.getElementById('countryFilter');
          const visitedFilter = document.getElementById('visitedFilter');
          // Arama kutusu sadece öneri için, filtreleme yok

          // Tüm ülkeleri topla ve normalize et
          const places = [];
          const countrySet = new Set();
          snapshot.forEach(doc => {
            const data = doc.data();
            places.push({ ...data, _docId: doc.id });
            if (data.country) {
              // İngilizce anahtara normalize et
              const englishKey = getEnglishCountryKeySafe(data.country);
              countrySet.add(englishKey);
            }
          });
          const countries = Array.from(countrySet).sort();

          // Türkçe isme göre sırala
          countries.sort((a, b) => {
            const trA = toTurkishUpper(countryNames[a]?.[currentLang] || a);
            const trB = toTurkishUpper(countryNames[b]?.[currentLang] || b);
            return trA.localeCompare(trB, 'tr');
          });
          // Ülke combobox'ını doldur (sadece ilk yüklemede veya ülke sayısı değiştiyse)
          if (countryFilter.options.length === 0 || countryFilter.options.length !== countries.length) {
            countryFilter.innerHTML = '';
            countries.forEach(englishKey => {
              const opt = document.createElement('option');
              opt.value = englishKey;
              const trName = countryNames[englishKey]?.[currentLang] || englishKey;
              opt.textContent = toTurkishUpper(trName);
              countryFilter.appendChild(opt);
            });
          }
          // Varsayılan ülke: ALMANYA
          if (!countryFilter.value) countryFilter.value = 'ALMANYA';
          // Varsayılan ziyaret filtresi: Gezilmedi
          if (!visitedFilter.value) visitedFilter.value = 'notvisited';

          // Filtreye göre verileri süz
          let filtered = [];
          const selectedCountry = countryFilter.value;
          const selectedVisited = visitedFilter.value;
          filtered = places.filter(p => getEnglishCountryKeySafe(p.country) === selectedCountry);
          if (selectedVisited === 'visited') filtered = filtered.filter(p => p.visited);
          else if (selectedVisited === 'notvisited') filtered = filtered.filter(p => !p.visited);

          filtered.sort((a, b) => (a.city || '').localeCompare(b.city || ''));
          filtered.forEach(data => {
            const row = document.createElement('tr');
            const categoryHtml = (data.category || '').replace(/\s*\/\s*/g, '<br>');
            const googleMapsUrl = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent((data.name || '') + ' ' + (data.city || '') + ' ' + (data.country || ''))}`;
            row.innerHTML = `
              <td class="name">${data.name || ''}</td>
              <td>${data.city || ''}</td>
              <td>${categoryHtml}</td>
              <td class="description">${data.description || ''}</td>
              <td style="text-align:center;"><input type="checkbox" class="visited-checkbox" data-docid="${data._docId}" ${data.visited ? 'checked' : ''}></td>
              <td style="text-align:center;"><input type="checkbox" class="route-checkbox" data-name="${data.name || ''}" data-city="${data.city || ''}" data-country="${data.country || ''}"></td>
              <td style="text-align:center;"><a href="${googleMapsUrl}" target="_blank" style="background:#4285f4;color:white;border:none;padding:4px 8px;border-radius:5px;text-decoration:none;font-size:12px;">🗺️ Maps</a></td>
              <td style="text-align:center;"><button class="delete-place-btn" data-docid="${data._docId}" style="background:#dc3545;color:white;border:none;padding:4px 10px;border-radius:5px;cursor:pointer;">Sil</button></td>
            `;
            placesTableBody.appendChild(row);
          });

          // Checkbox event listener
          document.querySelectorAll('.visited-checkbox').forEach(checkbox => {
            checkbox.addEventListener('change', async (e) => {
              const docId = e.target.getAttribute('data-docid');
              const checked = e.target.checked;
              try {
                const placeDocRef = collection(db, `users/${user.uid}/places`);
                // Firestore doc() ile referans oluştur
                const { doc, updateDoc } = await import('https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js');
                const ref = doc(db, `users/${user.uid}/places`, docId);
                await updateDoc(ref, { visited: checked });
              } catch (err) {
                alert('Güncelleme hatası: ' + err.message);
                e.target.checked = !checked; // Hata olursa eski haline döndür
              }
            });
          });

          // Silme butonu event listener
          document.querySelectorAll('.delete-place-btn').forEach(btn => {
            btn.addEventListener('click', async (e) => {
              const docId = e.target.getAttribute('data-docid');
              if (!confirm('Bu yeri silmek istediğinize emin misiniz?')) return;
              try {
                const { doc, deleteDoc } = await import('https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js');
                const ref = doc(db, `users/${user.uid}/places`, docId);
                await deleteDoc(ref);
                showStatus('Yer silindi.', 'success');
                loadPlacesTable(user);
              } catch (err) {
                showStatus('Silme hatası: ' + err.message, 'error');
              }
            });
          });

          // Rota oluşturma butonu event listener
          const createRouteBtn = document.getElementById('createRouteBtn');
          if (createRouteBtn) {
            createRouteBtn.addEventListener('click', () => {
              createGoogleMapsRoute();
            });
          }

          // Akıllı ekleme butonu event listener
          universalAddBtn.addEventListener('click', async () => {
            const inputValue = universalSearchBox.value.trim();
            if (!inputValue) {
              showStatus('Lütfen bir yer, şehir veya ülke adı girin!', 'error');
              return;
            }
            
            const user = auth.currentUser;
            if (!user) {
              showStatus('Lütfen önce giriş yapın!', 'error');
              return;
            }
            
            // Akıllı tespit sistemi
            await smartAddLocation(inputValue, user);
          });
          
          // Akıllı tespit fonksiyonu
          async function smartAddLocation(inputValue, user) {
            try {
              showStatus('Girilen metin analiz ediliyor...', 'info');
              
              // 1. Önce popüler yerler JSON'unda ara (özel yer)
              let placeData = null;
              try {
                const response = await fetch('/popular-places.json');
                const popularPlaces = await response.json();
                placeData = popularPlaces.find(p =>
                  p.name_tr?.toLowerCase().includes(inputValue.toLowerCase()) ||
                  p.name_en?.toLowerCase().includes(inputValue.toLowerCase())
                );
              } catch {}
              
              if (placeData) {
                // Özel yer olarak ekle
                await addDoc(collection(db, `users/${user.uid}/places`), {
                  name: placeData.name_tr || inputValue,
                  city: placeData.city_tr || '',
                  country: (placeData.country_tr || '').toUpperCase(),
                  category: placeData.category_tr || '',
                  description: placeData.description_tr || '',
                  visited: false,
                  name_en: placeData.name_en || '',
                  city_en: placeData.city_en || '',
                  country_en: (placeData.country_en || '').toUpperCase(),
                  category_en: placeData.category_en || '',
                  description_en: placeData.description_en || ''
                });
                showStatus(`${inputValue} özel yer olarak eklendi!`, 'success');
                universalSearchBox.value = '';
                loadPlacesTable(user);
                return;
              }
              
              // 2. Şehir/ülke kontrolü - büyük harfle başlıyorsa veya bilinen şehir/ülke isimleri
              const cityCountryKeywords = ['city', 'şehir', 'ülke', 'country'];
              const knownCities = ['istanbul', 'ankara', 'izmir', 'berlin', 'paris', 'london', 'rome', 'madrid', 'barcelona', 'munich', 'vienna', 'prague', 'budapest', 'warsaw', 'amsterdam', 'brussels', 'zurich', 'geneva', 'milan', 'florence', 'venice', 'naples', 'lisbon', 'porto', 'athens', 'dublin', 'edinburgh', 'stockholm', 'oslo', 'copenhagen', 'helsinki'];
              const knownCountries = ['turkey', 'türkiye', 'germany', 'almanya', 'france', 'fransa', 'italy', 'italya', 'spain', 'ispanya', 'england', 'ingiltere', 'netherlands', 'hollanda', 'belgium', 'belçika', 'austria', 'avusturya', 'switzerland', 'isviçre', 'portugal', 'portekiz', 'greece', 'yunanistan'];
              
              const isCity = knownCities.some(city => inputValue.toLowerCase().includes(city));
              const isCountry = knownCountries.some(country => inputValue.toLowerCase().includes(country));
              const startsWithCapital = /^[A-ZÇĞİÖŞÜ]/.test(inputValue);
              
              if (isCity || isCountry || startsWithCapital) {
                // Şehir/ülke için turistik yerler ekle
                await addTouristPlacesForLocation(inputValue, user);
                return;
              }
              
              // 3. Varsayılan: özel yer olarak ekle
              await addDoc(collection(db, `users/${user.uid}/places`), {
                name: inputValue,
                city: '',
                country: (countryFilter.value || '').toUpperCase(),
                category: '',
                description: '',
                visited: false
              });
              showStatus(`${inputValue} yer olarak eklendi!`, 'success');
              universalSearchBox.value = '';
              loadPlacesTable(user);
              
            } catch (err) {
              showStatus('Ekleme sırasında hata: ' + err.message, 'error');
            }
          }

          placesTableContainer.style.display = '';
        }

        // Şehir/Ülke için turistik yerler ekleme fonksiyonu
         async function addTouristPlacesForLocation(location, user) {
           if (!location) {
             showStatus('Lütfen bir şehir veya ülke adı girin!', 'error');
             return;
           }
           
           if (!user) {
             showStatus('Lütfen önce giriş yapın!', 'error');
             return;
           }
           
           try {
             showStatus(`${location} için turistik yerler araştırılıyor...`, 'info');
             
             // Türkiye için özel durum - şehir isimleri öner
             if (location.toLowerCase() === 'türkiye' || location.toLowerCase() === 'turkey') {
               showStatus('Türkiye için lütfen şehir adı girin (örn: İstanbul, Ankara, İzmir, Antalya, Kapadokya). Ülke geneli için çok fazla yer bulunur.', 'info');
               return;
             }
             
             // Önce şehir kontrolü yap - şehir haritasında var mı?
             const detectedCountry = detectCountryFromCity(location);
             if (detectedCountry) {
               // Bu bir şehir, şehir yerlerini ekle
             await addCityPlaces(user, location);
             return;
           }
           
           // Şehir değilse, ülke kontrolü yap
           const countryData = await checkIfCountryExists(location);
           if (countryData) {
             await addCountryPlaces(user, countryData, location);
             return;
           }
             
             // Ne şehir ne de ülke olarak tanınmıyorsa
             showStatus(`${location} şehir veya ülke olarak tanınmadı. Lütfen geçerli bir şehir veya ülke adı girin.`, 'error');
             
           } catch (error) {
             console.error('Turistik yerler eklenirken hata:', error);
             showStatus('Turistik yerler eklenirken bir hata oluştu: ' + error.message, 'error');
           }
         }
         
         // Ülke kontrolü - dinamik web araştırması ile
         async function checkIfCountryExists(countryName) {
           const countryFiles = {
             'almanya': 'popular-germany.json', 'germany': 'popular-germany.json',
             'fransa': 'popular-france.json', 'france': 'popular-france.json',
             'italya': 'popular-italy.json', 'italy': 'popular-italy.json',
             'ispanya': 'popular-spain.json', 'spain': 'popular-spain.json',
             'hollanda': 'popular-netherlands.json', 'netherlands': 'popular-netherlands.json',
             'isviçre': 'popular-switzerland.json', 'switzerland': 'popular-switzerland.json',
             'belçika': 'popular-belgium.json', 'belgium': 'popular-belgium.json',
             'avusturya': 'popular-austria.json', 'austria': 'popular-austria.json',
             'polonya': 'popular-poland.json', 'poland': 'popular-poland.json',
             'çek cumhuriyeti': 'popular-czech-republic.json', 'czech republic': 'popular-czech-republic.json',
             'macaristan': 'popular-hungary.json', 'hungary': 'popular-hungary.json',
             'romanya': 'popular-romania.json', 'romania': 'popular-romania.json',
             'yunanistan': 'popular-greece.json', 'greece': 'popular-greece.json',
             'portekiz': 'popular-portugal.json', 'portugal': 'popular-portugal.json',
             'hırvatistan': 'popular-croatia.json', 'croatia': 'popular-croatia.json',
             'slovenya': 'popular-slovenia.json', 'slovenia': 'popular-slovenia.json',
             'bulgaristan': 'popular-bulgaria.json', 'bulgaria': 'popular-bulgaria.json',
             'slovakya': 'popular-slovakia.json', 'slovakia': 'popular-slovakia.json',
             'estonya': 'popular-estonia.json', 'estonia': 'popular-estonia.json',
             'letonya': 'popular-latvia.json', 'latvia': 'popular-latvia.json',
             'litvanya': 'popular-lithuania.json', 'lithuania': 'popular-lithuania.json',
             'güney kore': 'popular-south-korea.json', 'south korea': 'popular-south-korea.json',
             'japonya': 'popular-japan.json', 'japan': 'popular-japan.json',
             'çin': 'popular-china.json', 'china': 'popular-china.json'
           };
           
           const fileName = countryFiles[countryName.toLowerCase()];
           if (fileName) {
             try {
               const response = await fetch(`/json/${fileName}`);
               if (response.ok) {
                 const data = await response.json();
                 return { fileName, data };
               }
             } catch (error) {
               console.error('Ülke dosyası yüklenirken hata:', error);
             }
           }
           
           // Eğer mevcut dosyalarda yoksa, dinamik olarak web araştırması yap
           return await generateCountryPlacesFromWeb(countryName);
         }
         
         // Web araştırması ile ülke turistik yerlerini oluştur
         async function generateCountryPlacesFromWeb(countryName) {
           try {
             // Kullanıcıya bilgi ver
             showStatus(`${countryName} için turistik yerler araştırılıyor...`, 'info');
             
             // Foursquare API'den ülke için turistik yerler çek
             const foursquarePlaces = await getOpenTripMapPlaces(countryName);
             
             if (foursquarePlaces && foursquarePlaces.length >= 10) {
               return {
                 fileName: `dynamic-${countryName.toLowerCase().replace(/\s+/g, '-')}.json`,
                 data: foursquarePlaces
               };
             } else {
               console.warn(`${countryName} için yeterli turistik yer bulunamadı:`, foursquarePlaces?.length || 0);
               return null;
             }
           } catch (error) {
             console.error(`${countryName} için web araştırması hatası:`, error);
             return null;
           }
         }
         
         // Ülke için turistik yerler ara
         async function searchTouristPlacesForCountry(countryName) {
           // Ülke adını normalize et
           const normalizedCountry = normalizeCountryName(countryName);
           
           // Ülkeye özel turistik yerler veritabanı
           const countryAttractions = {
             'brezilya': [
               { name: 'Christ the Redeemer', city: 'Rio de Janeiro', category: 'Anıt', description: 'Rio de Janeiro\'da bulunan dünyaca ünlü İsa heykeli. Art Deco tarzında inşa edilen bu 30 metre yüksekliğindeki heykel, şehrin simgesi ve Brezilya\'nın en önemli turistik yerlerinden biridir.' },
               { name: 'Sugarloaf Dağı', city: 'Rio de Janeiro', category: 'Doğal Güzellik', description: 'Rio de Janeiro\'nın simgesel dağı. Teleferikle çıkılan bu 396 metre yüksekliğindeki dağdan şehrin ve Copacabana plajının muhteşem manzarası izlenir.' },
               { name: 'Iguazu Şelaleleri', city: 'Foz do Iguaçu', category: 'Doğal Güzellik', description: 'Arjantin sınırında bulunan dünyaca ünlü şelaleler. 275 adet şelaleden oluşan bu doğa harikası, UNESCO Dünya Mirası listesindedir.' },
               { name: 'Copacabana Plajı', city: 'Rio de Janeiro', category: 'Plaj', description: 'Dünyanın en ünlü plajlarından biri. 4 km uzunluğundaki bu plaj, beyaz kumları ve canlı atmosferiyle Rio\'nun kalbidir.' },
               { name: 'Amazon Yağmur Ormanları', city: 'Manaus', category: 'Doğal Güzellik', description: 'Dünyanın en büyük yağmur ormanı. Binlerce bitki ve hayvan türüne ev sahipliği yapan bu orman, dünyanın akciğerleri olarak bilinir.' },
               { name: 'Pantanal', city: 'Cuiabá', category: 'Doğal Güzellik', description: 'Dünyanın en büyük sulak alanı. Jaguar, kaiman ve yüzlerce kuş türünün yaşadığı bu bölge, doğa severler için cennet.' },
               { name: 'Salvador Tarihi Merkezi', city: 'Salvador', category: 'Tarihi Bölge', description: 'Kolonyal dönem mimarisinin en güzel örneklerinin bulunduğu tarihi merkez. Renkli evleri ve cobblestone sokakları ile UNESCO Dünya Mirası.' },
               { name: 'Fernando de Noronha', city: 'Fernando de Noronha', category: 'Ada', description: 'Brezilya\'nın cennet adası. Kristal berraklığındaki suları, renkli mercan resifleri ve egzotik deniz yaşamı ile dalış tutkunlarının gözdesi.' },
               { name: 'Lençóis Maranhenses', city: 'Barreirinhas', category: 'Doğal Güzellik', description: 'Beyaz kum tepeleri ve turkuaz göller arasında oluşan sürreal manzara. Yağmur mevsiminde oluşan bu doğa harikası, dünyanın en benzersiz yerlerinden biri.' },
               { name: 'Ouro Preto', city: 'Ouro Preto', category: 'Tarihi Şehir', description: 'Altın madenciliği döneminden kalma barok mimarisi ile ünlü tarihi şehir. Taş döşeli sokakları ve kolonyal kiliseler ile UNESCO Dünya Mirası.' }
             ],
             'arjantin': [
               { name: 'Iguazu Şelaleleri', city: 'Puerto Iguazu', category: 'Doğal Güzellik', description: 'Brezilya sınırında bulunan muhteşem şelaleler. 275 adet şelaleden oluşan bu doğa harikası, UNESCO Dünya Mirası listesindedir.' },
               { name: 'Perito Moreno Buzulu', city: 'El Calafate', category: 'Buzul', description: 'Patagonia\'da bulunan aktif buzul. 250 km² alana sahip bu buzul, sürekli hareket halinde olup buzul kırılmaları izlenebilir.' },
               { name: 'Buenos Aires Tango Mahallesi', city: 'Buenos Aires', category: 'Kültürel Bölge', description: 'Tango\'nun doğduğu renkli mahalle La Boca. Caminito sokağı, renkli evleri ve sokak sanatçıları ile ünlüdür.' },
               { name: 'Mendoza Şarap Bölgesi', city: 'Mendoza', category: 'Şarap Bölgesi', description: 'And Dağları eteklerinde bulunan dünyaca ünlü şarap bölgesi. Malbec üzümü ile ünlü bu bölgede şarap tadımları yapılır.' },
               { name: 'Ushuaia', city: 'Ushuaia', category: 'Şehir', description: 'Dünyanın en güney şehri. Tierra del Fuego\'da bulunan bu şehir, Antarktika turlarının başlangıç noktasıdır.' },
               { name: 'Salta', city: 'Salta', category: 'Tarihi Şehir', description: 'Kolonyal mimarisi ile ünlü güzel şehir. And Dağları\'nın eteklerinde bulunan bu şehir, geleneksel Arjantin kültürünün merkezi.' },
               { name: 'Bariloche', city: 'San Carlos de Bariloche', category: 'Doğal Güzellik', description: 'Göller bölgesinde bulunan tatil şehri. Nahuel Huapi Gölü kıyısında yer alan bu şehir, kayak ve doğa sporları için ünlü.' },
               { name: 'Península Valdés', city: 'Puerto Madryn', category: 'Doğal Güzellik', description: 'Balina gözlemi için dünyaca ünlü yarımada. Güney balinalarının üreme alanı olan bu bölge, UNESCO Dünya Mirası.' },
               { name: 'Quebrada de Humahuaca', city: 'Humahuaca', category: 'Doğal Güzellik', description: 'Renkli kayalıkları ile ünlü vadi. And Dağları\'nda bulunan bu vadi, UNESCO Dünya Mirası listesindedir.' },
               { name: 'El Chalten', city: 'El Chalten', category: 'Doğal Güzellik', description: 'Fitz Roy Dağı\'nın eteklerinde bulunan trekking cenneti. Patagonia\'nın en güzel manzaralarına sahip bu bölge, dağcıların gözdesi.' }
             ],
             'meksika': [
               { name: 'Chichen Itza', city: 'Yucatan', category: 'Tarihi Yapı', description: 'Maya medeniyetinin en önemli kalıntılarından biri. El Castillo piramidi ile ünlü bu antik şehir, UNESCO Dünya Mirası ve Dünyanın Yedi Harikası\'ndan biri.' },
               { name: 'Teotihuacan', city: 'Mexico City', category: 'Tarihi Yapı', description: 'Güneş ve Ay piramitleri ile ünlü antik şehir. MÖ 100-650 yılları arasında Mesoamerika\'nın en büyük şehri olan bu yer, UNESCO Dünya Mirası.' },
               { name: 'Cancun', city: 'Cancun', category: 'Plaj', description: 'Karayip Denizi kıyısında bulunan tatil cenneti. Beyaz kumlu plajları, turkuaz denizi ve Maya kalıntıları ile ünlü.' },
               { name: 'Tulum', city: 'Tulum', category: 'Tarihi Yapı', description: 'Karayip kıyısında bulunan Maya kalıntıları. Deniz manzaralı konumu ile dünyanın en güzel antik şehirlerinden biri.' },
               { name: 'Palenque', city: 'Chiapas', category: 'Tarihi Yapı', description: 'Yağmur ormanları içinde bulunan Maya şehri. Tapınak ve sarayları ile Maya mimarisinin en güzel örneklerini sunar.' },
               { name: 'Guanajuato', city: 'Guanajuato', category: 'Tarihi Şehir', description: 'Renkli evleri ve yeraltı tünelleri ile ünlü kolonyal şehir. Gümüş madenciliği döneminden kalma mimarisi ile UNESCO Dünya Mirası.' },
               { name: 'Oaxaca', city: 'Oaxaca', category: 'Kültürel Şehir', description: 'Geleneksel Meksika kültürünün kalbi. El sanatları, yerel mutfağı ve kolonyal mimarisi ile ünlü UNESCO Dünya Mirası şehri.' },
               { name: 'Copper Canyon', city: 'Chihuahua', category: 'Doğal Güzellik', description: 'Grand Canyon\'dan daha derin olan kanyon sistemi. Tarahumara yerlilerinin yaşadığı bu bölge, tren yolculuğu ile keşfedilir.' },
               { name: 'Isla Mujeres', city: 'Quintana Roo', category: 'Ada', description: 'Cancun yakınlarında bulunan küçük ada. Kristal berraklığındaki suları ve rahat atmosferi ile balayı çiftlerinin gözdesi.' },
               { name: 'Puebla', city: 'Puebla', category: 'Tarihi Şehir', description: 'Barok mimarisi ve renkli çinileri ile ünlü kolonyal şehir. Mole poblano\'nun doğduğu yer olan bu şehir, UNESCO Dünya Mirası.' }
             ]
           };
           
           // Ülke adını kontrol et ve eşleştir
           const countryKey = Object.keys(countryAttractions).find(key => 
             key.toLowerCase() === normalizedCountry.toLowerCase() ||
             translateCountryName(key).toLowerCase() === normalizedCountry.toLowerCase()
           );
           
           if (countryKey) {
             return countryAttractions[countryKey].map(place => ({
               name: place.name,
               city: place.city,
               country: countryName,
               category: place.category,
               description: place.description,
               visited: false
             }));
           }
           
           // Eğer özel veritabanında yoksa, genel turistik yerler oluştur
           return generateGenericTouristPlaces(countryName);
         }
         
         // Ülke adını normalize et
         function normalizeCountryName(countryName) {
           const countryMap = {
             'brazil': 'brezilya', 'brasil': 'brezilya', 'brezilya': 'brezilya',
             'argentina': 'arjantin', 'arjantin': 'arjantin',
             'mexico': 'meksika', 'méxico': 'meksika', 'meksika': 'meksika',
             'united states': 'amerika', 'usa': 'amerika', 'amerika': 'amerika',
             'canada': 'kanada', 'kanada': 'kanada',
             'australia': 'avustralya', 'avustralya': 'avustralya',
             'india': 'hindistan', 'hindistan': 'hindistan',
             'russia': 'rusya', 'rusya': 'rusya'
           };
           
           return countryMap[countryName.toLowerCase()] || countryName;
         }
         
         // Ülke adını çevir
         function translateCountryName(countryKey) {
           const translations = {
             'brezilya': 'brazil',
             'arjantin': 'argentina', 
             'meksika': 'mexico'
           };
           
           return translations[countryKey] || countryKey;
         }
         
         // Genel turistik yerler oluştur
         function generateGenericTouristPlaces(countryName) {
           const genericPlaces = [
             { name: `${countryName} Ulusal Müzesi`, category: 'Müze', description: `${countryName}'nın en önemli müzesi. Ülkenin tarihi, kültürü ve sanatı hakkında kapsamlı bilgi sunar.` },
             { name: `${countryName} Merkez Meydanı`, category: 'Meydan', description: `${countryName}'nın kalbi olan ana meydan. Tarihi binalar ve önemli anıtlarla çevrili.` },
             { name: `${countryName} Sarayı`, category: 'Saray', description: `${countryName}'nın tarihi sarayı. Kraliyet mimarisi ve muhteşem bahçeleri ile ünlü.` },
             { name: `${countryName} Katedrali`, category: 'Dini Yapı', description: `${countryName}'nın en önemli dini yapısı. Gotik mimarisi ve tarihi önemi ile dikkat çeker.` },
             { name: `${countryName} Ulusal Parkı`, category: 'Doğal Güzellik', description: `${countryName}'nın en güzel doğal alanı. Endemik bitki ve hayvan türleri barındırır.` },
             { name: `${countryName} Sanat Galerisi`, category: 'Galeri', description: `${countryName}'nın en prestijli sanat galerisi. Yerel ve uluslararası sanat eserlerini sergiler.` },
             { name: `${countryName} Kalesi`, category: 'Kale', description: `${countryName}'nın tarihi kalesi. Ortaçağ mimarisi ve savunma sistemleri ile ünlü.` },
             { name: `${countryName} Botanik Bahçesi`, category: 'Bahçe', description: `${countryName}'nın en büyük botanik bahçesi. Binlerce bitki türü ve huzurlu atmosfer.` },
             { name: `${countryName} Opera Binası`, category: 'Kültür Merkezi', description: `${countryName}'nın en prestijli opera binası. Klasik mimarisi ve mükemmel akustiği ile ünlü.` },
             { name: `${countryName} Tarihi Köprüsü`, category: 'Köprü', description: `${countryName}'nın simgesel köprüsü. Mühendislik harikası olan bu yapı, şehrin önemli geçiş noktası.` },
             { name: `${countryName} Plajı`, category: 'Plaj', description: `${countryName}'nın en güzel plajı. Altın sarısı kumları ve berrak denizi ile tatil cenneti.` },
             { name: `${countryName} Dağı`, category: 'Dağ', description: `${countryName}'nın en yüksek dağı. Muhteşem manzarası ve trekking rotaları ile doğa severlerinin gözdesi.` }
           ];
           
           return genericPlaces.slice(0, 10); // İlk 10 yeri döndür
         }
         
         // Ülke yerlerini ekle (en az 10 yer kontrolü)
         async function addCountryPlaces(user, countryData, countryName) {
           // Dinamik olarak oluşturulan veriler için data array'ini kontrol et
           const places = Array.isArray(countryData.data) ? countryData.data : countryData.data.places || [];
           
           // Ülke için en az 10 yer kontrolü
           if (places.length < 10) {
             alert(`${countryName} için yeterli popüler yer bulunamadı (${places.length} yer mevcut, en az 10 gerekli). Yerler eklenmedi.`);
             return;
           }
           
           // Var olan ülke yerlerini kontrol et
           const existingCountryPlaces = await checkExistingCountryPlaces(user, countryName);
           if (existingCountryPlaces.length > 0) {
             alert(`${countryName} için yerler zaten eklenmiştir. ${existingCountryPlaces.length} yer mevcut.`);
             return;
           }
           
           // İlk 15 yeri al (veya mevcut sayı kadar)
           const selectedPlaces = places.slice(0, Math.min(15, places.length));
           
           // Kullanıcıya işlem durumu bildir
           showStatus(`${countryName} için ${selectedPlaces.length} turistik yer ekleniyor...`, 'info');
           
           let addedCount = 0;
           for (const place of selectedPlaces) {
             const placeData = {
               name: place.name || 'Unknown Place',
               city: place.city || 'Unknown City',
               country: place.country || countryName || 'Unknown Country',
               category: place.category || 'Turistik Yer',
               description: place.description || '',
               visited: false,
               createdAt: new Date()
             };
             
             // Her bir yerin daha önce eklenip eklenmediğini kontrol et
             const placeExists = await checkIfPlaceExists(user, placeData.name, placeData.city);
             if (!placeExists) {
               await addDoc(collection(db, 'users', user.uid, 'places'), placeData);
               addedCount++;
             }
           }
           
           if (addedCount > 0) {
             showStatus(`${countryName} için ${addedCount} yeni turistik yer başarıyla eklendi!`, 'success');
           } else {
             showStatus(`${countryName} için tüm yerler zaten mevcut.`, 'info');
           }
           loadPlacesTable(user);
         }
         
         // Var olan şehir yerlerini kontrol et
         async function checkExistingPlaces(user, cityName) {
           const placesRef = collection(db, 'users', user.uid, 'places');
           const q = query(placesRef, where('city', '==', cityName));
           const querySnapshot = await getDocs(q);
           return querySnapshot.docs.map(doc => doc.data());
         }
         
         // Belirli bir yerin daha önce eklenip eklenmediğini kontrol et
         async function checkIfPlaceExists(user, placeName, cityName) {
           try {
             const placesRef = collection(db, 'users', user.uid, 'places');
             const q = query(placesRef, where('name', '==', placeName), where('city', '==', cityName));
             const querySnapshot = await getDocs(q);
             
             console.log(`Kontrol ediliyor: ${placeName} - ${cityName}, Sonuç: ${querySnapshot.size} adet`);
             
             return querySnapshot.size > 0;
           } catch (error) {
             console.error('Yer kontrolü hatası:', error);
             return false;
           }
         }
         
         // Var olan ülke yerlerini kontrol et
         async function checkExistingCountryPlaces(user, countryName) {
           const placesRef = collection(db, 'users', user.uid, 'places');
           const q = query(placesRef, where('country', '==', countryName.toUpperCase()));
           const querySnapshot = await getDocs(q);
           return querySnapshot.docs.map(doc => doc.data());
         }
         
         // Şehir yerlerini ekle (şehirler için minimum yer kontrolü yok)
         async function addCityPlaces(user, cityName) {
           try {
             // Önce Firebase Functions'ı test et
             console.log('Firebase Functions test başlatılıyor...');
             const testResult = await testFirebaseFunctions();
             
             // Önce Foursquare API'den dinamik veri çek
             showStatus(`${cityName} için Foursquare'den turistik yerler aranıyor...`, 'info');
             
             const foursquarePlaces = await getOpenTripMapPlaces(cityName);
             
             if (foursquarePlaces && foursquarePlaces.length > 0) {
               // Foursquare'den gelen verileri kullan
               showStatus(`${cityName} için ${foursquarePlaces.length} turistik yer bulundu. Ekleniyor...`, 'info');
               
               let addedCount = 0;
               let skippedCount = 0;
               for (const place of foursquarePlaces) {
                 console.log(`İşleniyor: ${place.name} - ${place.city}`);
                 const placeExists = await checkIfPlaceExists(user, place.name, place.city);
                 if (!placeExists) {
                   console.log(`Ekleniyor: ${place.name}`);
                   await addDoc(collection(db, 'users', user.uid, 'places'), place);
                   addedCount++;
                 } else {
                   console.log(`Zaten mevcut, atlanıyor: ${place.name}`);
                   skippedCount++;
                 }
               }
               
               if (addedCount > 0) {
                 showStatus(`${cityName} için ${addedCount} yeni turistik yer başarıyla eklendi! ${skippedCount} yer zaten mevcut olduğu için atlandı.`, 'success');
               } else {
                 showStatus(`${cityName} için tüm yerler zaten mevcut. ${skippedCount} yer kontrol edildi.`, 'info');
               }
               loadPlacesTable(user);
               return;
             }
             
             // Eğer Foursquare'den veri gelmezse, eski sistemi kullan
             showStatus(`${cityName} için yerel veritabanından yerler aranıyor...`, 'info');
             
             // Şehir için ülke tespiti
             const detectedCountry = detectCountryFromCity(cityName);
             
             // Şehir için yerler oluştur
             const cityPlaces = generateCityPlaces(cityName, detectedCountry);
             
             // Şehirler için en az 1 yer yeterli
             if (!cityPlaces || cityPlaces.length === 0) {
               showStatus(`${cityName} için hiç popüler yer bulunamadı.`, 'error');
               return;
             }
             
             const countryFilter = document.getElementById('countryFilter');
             
             // Ülke filtresini otomatik ayarla (tespit edildiyse)
             if (detectedCountry && countryFilter) {
               countryFilter.value = detectedCountry;
               // Arka planı da güncelle
               if (window.enhancedBackgroundManager) {
                 window.enhancedBackgroundManager.updateBackgroundForCountry(detectedCountry);
               }
             }
             
             // İlk 30 yeri al (veya mevcut sayı kadar) - daha fazla yer göster
             const selectedPlaces = cityPlaces.slice(0, Math.min(30, cityPlaces.length));
             
             // Kullanıcıya işlem durumu bildir
             showStatus(`${cityName} için ${selectedPlaces.length} turistik yer ekleniyor...`, 'info');
             
             let addedCount = 0;
             let skippedCount = 0;
             for (const place of selectedPlaces) {
               console.log(`İşleniyor: ${place.name} - ${place.city}`);
               // Her bir yerin daha önce eklenip eklenmediğini kontrol et
               const placeExists = await checkIfPlaceExists(user, place.name, place.city);
               if (!placeExists) {
                 console.log(`Ekleniyor: ${place.name}`);
                 await addDoc(collection(db, 'users', user.uid, 'places'), place);
                 addedCount++;
               } else {
                 console.log(`Zaten mevcut, atlanıyor: ${place.name}`);
                 skippedCount++;
               }
             }
             
             if (addedCount > 0) {
               showStatus(`${cityName} için ${addedCount} yeni turistik yer başarıyla eklendi! ${skippedCount} yer zaten mevcut olduğu için atlandı.`, 'success');
             } else {
               showStatus(`${cityName} için tüm yerler zaten mevcut. ${skippedCount} yer kontrol edildi.`, 'info');
             }
             loadPlacesTable(user);
           } catch (error) {
             console.error(`${cityName} şehir yerleri eklenirken hata:`, error);
             showStatus(`${cityName} için yerler eklenirken hata oluştu: ${error.message}`, 'error');
           }
         }
         
         // Test fonksiyonu - Firebase Functions'ın çalışıp çalışmadığını kontrol et
         async function testFirebaseFunctions() {
           try {
             const response = await fetch('https://us-central1-rotambenim.cloudfunctions.net/test');
             const data = await response.json();
             console.log('Firebase Functions test:', data);
             return data;
           } catch (error) {
             console.error('Firebase Functions test hatası:', error);
             return null;
           }
         }
         
         // OpenTripMap API'den turistik yerler çek
         async function getOpenTripMapPlaces(cityName) {
           try {
             console.log(`OpenTripMap API çağrısı başlatılıyor: ${cityName}`);
             
             // Önce şehrin koordinatlarını al
             const geonameUrl = `https://api.opentripmap.com/0.1/en/places/geoname?name=${encodeURIComponent(cityName)}&apikey=5ae2e3f221c38a28845f05b65ba166329393551235361ab9b66e2889`;
             console.log('OpenTripMap Geoname URL:', geonameUrl);
             
             const geoResponse = await fetch(geonameUrl);
             
             if (!geoResponse.ok) {
               console.error('OpenTripMap Geoname API hatası:', geoResponse.status);
               return null;
             }
             
             const geoData = await geoResponse.json();
             console.log('OpenTripMap Geoname response:', geoData);
             
             if (!geoData.lat || !geoData.lon) {
               console.error('Şehir koordinatları bulunamadı');
               return null;
             }
             
             // Şehir etrafındaki turistik yerleri al
             const placesUrl = `https://api.opentripmap.com/0.1/en/places/radius?radius=50000&lat=${geoData.lat}&lon=${geoData.lon}&kinds=tourist_facilities,museums,theatres,architecture,historic,monuments,cultural,natural,religion,sport,amusements&limit=50&rate=2&apikey=5ae2e3f221c38a28845f05b65ba166329393551235361ab9b66e2889`;
             console.log('OpenTripMap Places URL:', placesUrl);
             
             const placesResponse = await fetch(placesUrl);
             
             if (!placesResponse.ok) {
               console.error('OpenTripMap Places API hatası:', placesResponse.status);
               return null;
             }
             
             const placesData = await placesResponse.json();
             console.log('OpenTripMap Places response:', placesData);
             
             if (placesData && placesData.length > 0) {
               console.log(`OpenTripMap'den ${placesData.length} yer bulundu`);
               
               // Her yer için detay bilgilerini al
               const detailedPlaces = [];
               
               for (let i = 0; i < Math.min(placesData.length, 20); i++) {
                 const place = placesData[i];
                 
                 try {
                   // Detay bilgilerini al
                   const detailUrl = `https://api.opentripmap.com/0.1/en/places/xid/${place.xid}?apikey=5ae2e3f221c38a28845f05b65ba166329393551235361ab9b66e2889`;
                   const detailResponse = await fetch(detailUrl);
                   
                   if (detailResponse.ok) {
                     const detailData = await detailResponse.json();
                     
                     // Sadece ismi olan ve açıklaması bulunan yerleri ekle
                     if (detailData.name && (detailData.wikipedia_extracts?.text || detailData.info?.descr)) {
                       detailedPlaces.push({
                         name: detailData.name,
                         city: cityName,
                         country: geoData.country || 'Bilinmeyen Ülke',
                         category: translateOpenTripMapCategory(detailData.kinds) || 'Turistik Yer',
                         description: detailData.wikipedia_extracts?.text || detailData.info?.descr || `${detailData.name} hakkında detaylı bilgi.`,
                         visited: false,
                         createdAt: new Date(),
                         source: 'opentripmap',
                         xid: detailData.xid,
                         address: detailData.address ? `${detailData.address.city || ''} ${detailData.address.state || ''} ${detailData.address.country || ''}`.trim() : '',
                         rating: detailData.rate ? parseInt(detailData.rate) : null,
                         image: detailData.preview?.source || null,
                         wikipedia: detailData.wikipedia || null,
                         coordinates: {
                           lat: detailData.point?.lat || place.geometry?.coordinates?.[1],
                           lon: detailData.point?.lon || place.geometry?.coordinates?.[0]
                         }
                       });
                     }
                   }
                   
                   // API rate limit için kısa bekleme
                   await new Promise(resolve => setTimeout(resolve, 100));
                 } catch (detailError) {
                   console.error('Detay bilgisi alınırken hata:', detailError);
                 }
               }
               
               console.log(`OpenTripMap'den ${detailedPlaces.length} detaylı yer işlendi`);
               return detailedPlaces;
             } else {
               console.log('OpenTripMap API\'den sonuç döndürülmedi veya boş');
             }
             
             return null;
           } catch (error) {
             console.error('OpenTripMap API çağrısı hatası:', error);
             return null;
           }
         }
         
         // OpenTripMap kategori çevirisi
         function translateOpenTripMapCategory(kinds) {
           if (!kinds) return 'Turistik Yer';
           
           const kindsList = kinds.toLowerCase();
           
           if (kindsList.includes('museum')) return 'Müze';
           if (kindsList.includes('church') || kindsList.includes('religion')) return 'Dini Yapı';
           if (kindsList.includes('monument') || kindsList.includes('historic')) return 'Tarihi Yapı';
           if (kindsList.includes('architecture')) return 'Mimari Yapı';
           if (kindsList.includes('theatre') || kindsList.includes('cultural')) return 'Kültürel Mekan';
           if (kindsList.includes('natural') || kindsList.includes('park')) return 'Doğal Alan';
           if (kindsList.includes('sport')) return 'Spor Tesisi';
           if (kindsList.includes('amusement')) return 'Eğlence Merkezi';
           if (kindsList.includes('tourist')) return 'Turistik Tesis';
           
           return 'Turistik Yer';
         }
         
         // Foursquare API'den turistik yerler çek (yedek olarak)
         async function getFoursquarePlaces(cityName) {
           try {
             console.log(`Foursquare API çağrısı başlatılıyor: ${cityName}`);
             
             // Firebase Functions kullanarak Foursquare API çağrısı
             const queryString = cityName + ' tourist attractions landmarks';
             const url = `https://us-central1-rotambenim.cloudfunctions.net/foursquare?query=${encodeURIComponent(queryString)}`;
             console.log('Foursquare API URL:', url);
             
             const response = await fetch(url);
             
             console.log('Foursquare API response status:', response.status);
             
             if (!response.ok) {
               console.error('Foursquare API hatası:', response.status);
               return null;
             }
             
             const data = await response.json();
             console.log('Foursquare API response data:', data);
             
             if (data.results && data.results.length > 0) {
               console.log(`Foursquare'den ${data.results.length} yer bulundu`);
               
               // Sadece gerçekten turistik yerleri filtrele
               const touristPlaces = data.results.filter(place => {
                 const category = place.categories?.[0]?.name?.toLowerCase() || '';
                 const name = place.name?.toLowerCase() || '';
                 
                 // Turistik kategori listesi
                 const touristCategories = [
                   'landmark', 'historic site', 'museum', 'park', 'church', 'mosque', 'temple',
                   'palace', 'castle', 'bridge', 'tower', 'monument', 'statue', 'fountain',
                   'garden', 'beach', 'mountain', 'lake', 'river', 'cave', 'waterfall',
                   'island', 'harbor', 'airport', 'university', 'library', 'theater',
                   'cinema', 'concert hall', 'opera house', 'stadium', 'arena', 'marina',
                   'amusement park', 'zoo', 'aquarium', 'planetarium', 'observatory',
                   'botanical garden', 'arboretum', 'conservatory', 'art gallery',
                   'tourist information', 'travel agency', 'resort', 'spa'
                 ];
                 
                 // Turistik isim anahtar kelimeleri
                 const touristKeywords = [
                   'museum', 'palace', 'castle', 'tower', 'bridge', 'cathedral', 'mosque',
                   'temple', 'park', 'garden', 'square', 'plaza', 'monument', 'statue',
                   'fountain', 'beach', 'mountain', 'lake', 'river', 'cave', 'waterfall',
                   'island', 'harbor', 'port', 'airport', 'university', 'library',
                   'theater', 'cinema', 'concert', 'opera', 'stadium', 'arena',
                   'amusement', 'zoo', 'aquarium', 'planetarium', 'observatory',
                   'botanical', 'arboretum', 'conservatory', 'gallery', 'tourist',
                   'travel', 'resort', 'spa', 'historic', 'ancient', 'old', 'traditional'
                 ];
                 
                 // Kategori kontrolü
                 const isTouristCategory = touristCategories.some(cat => category.includes(cat));
                 
                 // İsim kontrolü
                 const isTouristName = touristKeywords.some(keyword => name.includes(keyword));
                 
                 // Rating kontrolü (eğer rating varsa ve düşükse filtrele)
                 const hasGoodRating = !place.rating || place.rating >= 7.0;
                 
                 return isTouristCategory || isTouristName || hasGoodRating;
               });
               
               console.log(`Filtrelenmiş turistik yerler: ${touristPlaces.length}`);
               
               return touristPlaces.map(place => ({
                 name: place.name || 'Bilinmeyen Yer',
                 city: cityName,
                 country: place.location?.country || 'Bilinmeyen Ülke',
                 category: translateCategory(place.categories?.[0]?.name) || 'Turistik Yer',
                 description: generateDetailedDescription(place, cityName),
                 visited: false,
                 createdAt: new Date(),
                 source: 'foursquare',
                 fsq_id: place.fsq_id,
                 address: place.location?.formatted_address || '',
                 rating: place.rating || null
               }));
             } else {
               console.log('Foursquare API\'den sonuç döndürülmedi veya boş');
             }
             
             return null;
           } catch (error) {
             console.error('Foursquare API çağrısı hatası:', error);
             return null;
           }
         }
         
         // Kategori çeviri fonksiyonu
         function translateCategory(englishCategory) {
           const categoryTranslations = {
             tr: {
               'Landmark': 'Tarihi Yapı',
               'Historic Site': 'Tarihi Yer',
               'Museum': 'Müze',
               'Park': 'Park',
               'Restaurant': 'Restoran',
               'Cafe': 'Kafe',
               'Bar': 'Bar',
               'Hotel': 'Otel',
               'Shopping Center': 'Alışveriş Merkezi',
               'Church': 'Kilise',
               'Mosque': 'Cami',
               'Temple': 'Tapınak',
               'Palace': 'Saray',
               'Castle': 'Kale',
               'Bridge': 'Köprü',
               'Tower': 'Kule',
               'Monument': 'Anıt',
               'Statue': 'Heykel',
               'Fountain': 'Çeşme',
               'Garden': 'Bahçe',
               'Beach': 'Sahil',
               'Mountain': 'Dağ',
               'Lake': 'Göl',
               'River': 'Nehir',
               'Forest': 'Orman',
               'Cave': 'Mağara',
               'Waterfall': 'Şelale',
               'Island': 'Ada',
               'Harbor': 'Liman',
               'Airport': 'Havalimanı',
               'Train Station': 'Tren İstasyonu',
               'Bus Station': 'Otobüs Durağı',
               'Metro Station': 'Metro İstasyonu',
               'University': 'Üniversite',
               'School': 'Okul',
               'Library': 'Kütüphane',
               'Hospital': 'Hastane',
               'Police Station': 'Polis Karakolu',
               'Fire Station': 'İtfaiye',
               'Post Office': 'Postane',
               'Bank': 'Banka',
               'Pharmacy': 'Eczane',
               'Gas Station': 'Benzin İstasyonu',
               'Car Wash': 'Oto Yıkama',
               'Parking': 'Otopark',
               'ATM': 'Banka ATM',
               'Tourist Information': 'Turizm Bilgi',
               'Travel Agency': 'Seyahat Acentesi',
               'Hostel': 'Pansiyon',
               'Guest House': 'Misafirhane',
               'Apartment': 'Apartman',
               'Villa': 'Villa',
               'Resort': 'Tatil Köyü',
               'Spa': 'Spa',
               'Gym': 'Spor Salonu',
               'Swimming Pool': 'Yüzme Havuzu',
               'Tennis Court': 'Tenis Kortu',
               'Golf Course': 'Golf Sahası',
               'Ski Resort': 'Kayak Merkezi',
               'Amusement Park': 'Eğlence Parkı',
               'Zoo': 'Hayvanat Bahçesi',
               'Aquarium': 'Akvaryum',
               'Planetarium': 'Gezegen Evi',
               'Observatory': 'Gözlemevi',
               'Botanical Garden': 'Botanik Bahçe',
               'Arboretum': 'Ağaç Müzesi',
               'Conservatory': 'Konservatuvar',
               'Theater': 'Tiyatro',
               'Cinema': 'Sinema',
               'Concert Hall': 'Konser Salonu',
               'Opera House': 'Opera Binası',
               'Stadium': 'Stadyum',
               'Arena': 'Arena',
               'Race Track': 'Yarış Pisti',
               'Marina': 'Marina',
               'Yacht Club': 'Yat Kulübü',
               'Fishing Spot': 'Balık Tutma Yeri',
               'Hiking Trail': 'Yürüyüş Yolu',
               'Bike Path': 'Bisiklet Yolu',
               'Climbing Wall': 'Tırmanma Duvarı',
               'Skate Park': 'Kaykay Parkı',
               'Playground': 'Oyun Alanı',
               'Sports Complex': 'Spor Kompleksi',
               'Fitness Center': 'Fitness Merkezi',
               'Yoga Studio': 'Yoga Stüdyosu',
               'Pilates Studio': 'Pilates Stüdyosu',
               'Dance Studio': 'Dans Stüdyosu',
               'Art Gallery': 'Sanat Galerisi',
               'Antique Shop': 'Antika Dükkanı',
               'Jewelry Store': 'Kuyumcu',
               'Bookstore': 'Kitapçı',
               'Music Store': 'Müzik Mağazası',
               'Electronics Store': 'Elektronik Mağazası',
               'Clothing Store': 'Giyim Mağazası',
               'Shoe Store': 'Ayakkabı Mağazası',
               'Department Store': 'Mağaza',
               'Supermarket': 'Süpermarket',
               'Market': 'Pazar',
               'Bakery': 'Fırın',
               'Butcher': 'Kasap',
               'Fish Market': 'Balık Pazarı',
               'Flower Shop': 'Çiçekçi',
               'Gift Shop': 'Hediye Mağazası',
               'Souvenir Shop': 'Hatıra Eşya Mağazası',
               'Tattoo Parlor': 'Dövme Salonu',
               'Hair Salon': 'Kuaför',
               'Beauty Salon': 'Güzellik Salonu',
               'Nail Salon': 'Tırnak Salonu',
               'Massage Parlor': 'Masaj Salonu',
               'Dental Clinic': 'Diş Kliniği',
               'Medical Clinic': 'Tıp Kliniği',
               'Veterinary Clinic': 'Veteriner Kliniği',
               'Pet Store': 'Evcil Hayvan Mağazası',
               'Hardware Store': 'Hırdavatçı',
               'Home Improvement Store': 'Ev Geliştirme Mağazası',
               'Furniture Store': 'Mobilya Mağazası',
               'Garden Center': 'Bahçe Merkezi',
               'Nursery': 'Fide Yeri',
               'Greenhouse': 'Sera',
               'Farm': 'Çiftlik',
               'Vineyard': 'Bağ',
               'Winery': 'Şarap Evi',
               'Brewery': 'Bira Evi',
               'Distillery': 'Rakı Evi',
               'Factory': 'Fabrika',
               'Warehouse': 'Depo',
               'Office Building': 'Ofis Binası',
               'Shopping Mall': 'AVM',
               'Outlet': 'Outlet',
               'Flea Market': 'Bit Pazarı',
               'Street Market': 'Sokak Pazarı',
               'Food Court': 'Yemek Merkezi',
               'Food Truck': 'Yemek Kamyonu',
               'Street Food': 'Sokak Yemeği',
               'Fast Food': 'Fast Food',
               'Pizza Place': 'Pizza Yeri',
               'Burger Joint': 'Burgerci',
               'Sushi Restaurant': 'Suşi Restoranı',
               'Thai Restaurant': 'Tay Restoranı',
               'Chinese Restaurant': 'Çin Restoranı',
               'Japanese Restaurant': 'Japon Restoranı',
               'Korean Restaurant': 'Kore Restoranı',
               'Indian Restaurant': 'Hint Restoranı',
               'Mexican Restaurant': 'Meksika Restoranı',
               'Italian Restaurant': 'İtalyan Restoranı',
               'French Restaurant': 'Fransız Restoranı',
               'Greek Restaurant': 'Yunan Restoranı',
               'Turkish Restaurant': 'Türk Restoranı',
               'Lebanese Restaurant': 'Lübnan Restoranı',
               'Moroccan Restaurant': 'Fas Restoranı',
               'Spanish Restaurant': 'İspanyol Restoranı',
               'Portuguese Restaurant': 'Portekiz Restoranı',
               'German Restaurant': 'Alman Restoranı',
               'Austrian Restaurant': 'Avusturya Restoranı',
               'Swiss Restaurant': 'İsviçre Restoranı',
               'Dutch Restaurant': 'Hollanda Restoranı',
               'Belgian Restaurant': 'Belçika Restoranı',
               'Polish Restaurant': 'Polonya Restoranı',
               'Czech Restaurant': 'Çek Restoranı',
               'Hungarian Restaurant': 'Macar Restoranı',
               'Romanian Restaurant': 'Romanya Restoranı',
               'Bulgarian Restaurant': 'Bulgar Restoranı',
               'Serbian Restaurant': 'Sırp Restoranı',
               'Croatian Restaurant': 'Hırvat Restoranı',
               'Slovenian Restaurant': 'Sloven Restoranı',
               'Slovak Restaurant': 'Slovak Restoranı',
               'Ukrainian Restaurant': 'Ukrayna Restoranı',
               'Russian Restaurant': 'Rus Restoranı',
               'Georgian Restaurant': 'Gürcü Restoranı',
               'Armenian Restaurant': 'Ermeni Restoranı',
               'Azerbaijani Restaurant': 'Azerbaycan Restoranı',
               'Iranian Restaurant': 'İran Restoranı',
               'Iraqi Restaurant': 'Irak Restoranı',
               'Syrian Restaurant': 'Suriye Restoranı',
               'Jordanian Restaurant': 'Ürdün Restoranı',
               'Israeli Restaurant': 'İsrail Restoranı',
               'Palestinian Restaurant': 'Filistin Restoranı',
               'Egyptian Restaurant': 'Mısır Restoranı',
               'Libyan Restaurant': 'Libya Restoranı',
               'Tunisian Restaurant': 'Tunus Restoranı',
               'Algerian Restaurant': 'Cezayir Restoranı',
               'Mauritanian Restaurant': 'Moritanya Restoranı',
               'Senegalese Restaurant': 'Senegal Restoranı',
               'Gambian Restaurant': 'Gambiya Restoranı',
               'Guinea-Bissau Restaurant': 'Gine-Bissau Restoranı',
               'Guinean Restaurant': 'Gine Restoranı',
               'Sierra Leonean Restaurant': 'Sierra Leone Restoranı',
               'Liberian Restaurant': 'Liberya Restoranı',
               'Ivorian Restaurant': 'Fildişi Sahili Restoranı',
               'Ghanaian Restaurant': 'Gana Restoranı',
               'Togolese Restaurant': 'Togo Restoranı',
               'Beninese Restaurant': 'Benin Restoranı',
               'Nigerian Restaurant': 'Nijerya Restoranı',
               'Cameroonian Restaurant': 'Kamerun Restoranı',
               'Chadian Restaurant': 'Çad Restoranı',
               'Central African Restaurant': 'Orta Afrika Restoranı',
               'Equatorial Guinean Restaurant': 'Ekvator Ginesi Restoranı',
               'Gabonese Restaurant': 'Gabon Restoranı',
               'Congolese Restaurant': 'Kongo Restoranı',
               'Democratic Republic of the Congo Restaurant': 'Demokratik Kongo Cumhuriyeti Restoranı',
               'Angolan Restaurant': 'Angola Restoranı',
               'Zambian Restaurant': 'Zambiya Restoranı',
               'Malawian Restaurant': 'Malavi Restoranı',
               'Mozambican Restaurant': 'Mozambik Restoranı',
               'Zimbabwean Restaurant': 'Zimbabve Restoranı',
               'Botswanan Restaurant': 'Botsvana Restoranı',
               'Namibian Restaurant': 'Namibya Restoranı',
               'South African Restaurant': 'Güney Afrika Restoranı',
               'Lesothoan Restaurant': 'Lesotho Restoranı',
               'Eswatini Restaurant': 'Esvatini Restoranı',
               'Madagascan Restaurant': 'Madagaskar Restoranı',
               'Comorian Restaurant': 'Komor Restoranı',
               'Mauritian Restaurant': 'Mauritius Restoranı',
               'Seychellois Restaurant': 'Seyşel Restoranı',
               'Djiboutian Restaurant': 'Cibuti Restoranı',
               'Eritrean Restaurant': 'Eritre Restoranı',
               'Ethiopian Restaurant': 'Etiyopya Restoranı',
               'Somali Restaurant': 'Somali Restoranı',
               'Kenyan Restaurant': 'Kenya Restoranı',
               'Ugandan Restaurant': 'Uganda Restoranı',
               'Tanzanian Restaurant': 'Tanzanya Restoranı',
               'Rwandan Restaurant': 'Ruanda Restoranı',
               'Burundian Restaurant': 'Burundi Restoranı',
               'South Sudanese Restaurant': 'Güney Sudan Restoranı',
               'Sudanese Restaurant': 'Sudan Restoranı'
             },
             en: {
               'Landmark': 'Landmark',
               'Historic Site': 'Historic Site',
               'Museum': 'Museum',
               'Park': 'Park',
               'Restaurant': 'Restaurant',
               'Cafe': 'Cafe',
               'Bar': 'Bar',
               'Hotel': 'Hotel',
               'Shopping Center': 'Shopping Center',
               'Church': 'Church',
               'Mosque': 'Mosque',
               'Temple': 'Temple',
               'Palace': 'Palace',
               'Castle': 'Castle',
               'Bridge': 'Bridge',
               'Tower': 'Tower',
               'Monument': 'Monument',
               'Statue': 'Statue',
               'Fountain': 'Fountain',
               'Garden': 'Garden',
               'Beach': 'Beach',
               'Mountain': 'Mountain',
               'Lake': 'Lake',
               'River': 'River',
               'Forest': 'Forest',
               'Cave': 'Cave',
               'Waterfall': 'Waterfall',
               'Island': 'Island',
               'Harbor': 'Harbor',
               'Airport': 'Airport',
               'Train Station': 'Train Station',
               'Bus Station': 'Bus Station',
               'Metro Station': 'Metro Station',
               'University': 'University',
               'School': 'School',
               'Library': 'Library',
               'Hospital': 'Hospital',
               'Police Station': 'Police Station',
               'Fire Station': 'Fire Station',
               'Post Office': 'Post Office',
               'Bank': 'Bank',
               'Pharmacy': 'Pharmacy',
               'Gas Station': 'Gas Station',
               'Car Wash': 'Car Wash',
               'Parking': 'Parking',
               'ATM': 'ATM',
               'Tourist Information': 'Tourist Information',
               'Travel Agency': 'Travel Agency',
               'Hostel': 'Hostel',
               'Guest House': 'Guest House',
               'Apartment': 'Apartment',
               'Villa': 'Villa',
               'Resort': 'Resort',
               'Spa': 'Spa',
               'Gym': 'Gym',
               'Swimming Pool': 'Swimming Pool',
               'Tennis Court': 'Tennis Court',
               'Golf Course': 'Golf Course',
               'Ski Resort': 'Ski Resort',
               'Amusement Park': 'Amusement Park',
               'Zoo': 'Zoo',
               'Aquarium': 'Aquarium',
               'Planetarium': 'Planetarium',
               'Observatory': 'Observatory',
               'Botanical Garden': 'Botanical Garden',
               'Arboretum': 'Arboretum',
               'Conservatory': 'Conservatory',
               'Theater': 'Theater',
               'Cinema': 'Cinema',
               'Concert Hall': 'Concert Hall',
               'Opera House': 'Opera House',
               'Stadium': 'Stadium',
               'Arena': 'Arena',
               'Race Track': 'Race Track',
               'Marina': 'Marina',
               'Yacht Club': 'Yacht Club',
               'Fishing Spot': 'Fishing Spot',
               'Hiking Trail': 'Hiking Trail',
               'Bike Path': 'Bike Path',
               'Climbing Wall': 'Climbing Wall',
               'Skate Park': 'Skate Park',
               'Playground': 'Playground',
               'Sports Complex': 'Sports Complex',
               'Fitness Center': 'Fitness Center',
               'Yoga Studio': 'Yoga Studio',
               'Pilates Studio': 'Pilates Studio',
               'Dance Studio': 'Dance Studio',
               'Art Gallery': 'Art Gallery',
               'Antique Shop': 'Antique Shop',
               'Jewelry Store': 'Jewelry Store',
               'Bookstore': 'Bookstore',
               'Music Store': 'Music Store',
               'Electronics Store': 'Electronics Store',
               'Clothing Store': 'Clothing Store',
               'Shoe Store': 'Shoe Store',
               'Department Store': 'Department Store',
               'Supermarket': 'Supermarket',
               'Market': 'Market',
               'Bakery': 'Bakery',
               'Butcher': 'Butcher',
               'Fish Market': 'Fish Market',
               'Flower Shop': 'Flower Shop',
               'Gift Shop': 'Gift Shop',
               'Souvenir Shop': 'Souvenir Shop',
               'Tattoo Parlor': 'Tattoo Parlor',
               'Hair Salon': 'Hair Salon',
               'Beauty Salon': 'Beauty Salon',
               'Nail Salon': 'Nail Salon',
               'Massage Parlor': 'Massage Parlor',
               'Dental Clinic': 'Dental Clinic',
               'Medical Clinic': 'Medical Clinic',
               'Veterinary Clinic': 'Veterinary Clinic',
               'Pet Store': 'Pet Store',
               'Hardware Store': 'Hardware Store',
               'Home Improvement Store': 'Home Improvement Store',
               'Furniture Store': 'Furniture Store',
               'Garden Center': 'Garden Center',
               'Nursery': 'Nursery',
               'Greenhouse': 'Greenhouse',
               'Farm': 'Farm',
               'Vineyard': 'Vineyard',
               'Winery': 'Winery',
               'Brewery': 'Brewery',
               'Distillery': 'Distillery',
               'Factory': 'Factory',
               'Warehouse': 'Warehouse',
               'Office Building': 'Office Building',
               'Shopping Mall': 'Shopping Mall',
               'Outlet': 'Outlet',
               'Flea Market': 'Flea Market',
               'Street Market': 'Street Market',
               'Food Court': 'Food Court',
               'Food Truck': 'Food Truck',
               'Street Food': 'Street Food',
               'Fast Food': 'Fast Food',
               'Pizza Place': 'Pizza Place',
               'Burger Joint': 'Burger Joint',
               'Sushi Restaurant': 'Sushi Restaurant',
               'Thai Restaurant': 'Thai Restaurant',
               'Chinese Restaurant': 'Chinese Restaurant',
               'Japanese Restaurant': 'Japanese Restaurant',
               'Korean Restaurant': 'Korean Restaurant',
               'Indian Restaurant': 'Indian Restaurant',
               'Mexican Restaurant': 'Mexican Restaurant',
               'Italian Restaurant': 'Italian Restaurant',
               'French Restaurant': 'French Restaurant',
               'Greek Restaurant': 'Greek Restaurant',
               'Turkish Restaurant': 'Turkish Restaurant',
               'Lebanese Restaurant': 'Lebanese Restaurant',
               'Moroccan Restaurant': 'Moroccan Restaurant',
               'Spanish Restaurant': 'Spanish Restaurant',
               'Portuguese Restaurant': 'Portuguese Restaurant',
               'German Restaurant': 'German Restaurant',
               'Austrian Restaurant': 'Austrian Restaurant',
               'Swiss Restaurant': 'Swiss Restaurant',
               'Dutch Restaurant': 'Dutch Restaurant',
               'Belgian Restaurant': 'Belgian Restaurant',
               'Polish Restaurant': 'Polish Restaurant',
               'Czech Restaurant': 'Czech Restaurant',
               'Hungarian Restaurant': 'Hungarian Restaurant',
               'Romanian Restaurant': 'Romanian Restaurant',
               'Bulgarian Restaurant': 'Bulgarian Restaurant',
               'Serbian Restaurant': 'Serbian Restaurant',
               'Croatian Restaurant': 'Croatian Restaurant',
               'Slovenian Restaurant': 'Slovenian Restaurant',
               'Slovak Restaurant': 'Slovak Restaurant',
               'Ukrainian Restaurant': 'Ukrainian Restaurant',
               'Russian Restaurant': 'Russian Restaurant',
               'Georgian Restaurant': 'Georgian Restaurant',
               'Armenian Restaurant': 'Armenian Restaurant',
               'Azerbaijani Restaurant': 'Azerbaijani Restaurant',
               'Iranian Restaurant': 'Iranian Restaurant',
               'Iraqi Restaurant': 'Iraqi Restaurant',
               'Syrian Restaurant': 'Syrian Restaurant',
               'Jordanian Restaurant': 'Jordanian Restaurant',
               'Israeli Restaurant': 'Israeli Restaurant',
               'Palestinian Restaurant': 'Palestinian Restaurant',
               'Egyptian Restaurant': 'Egyptian Restaurant',
               'Libyan Restaurant': 'Libyan Restaurant',
               'Tunisian Restaurant': 'Tunisian Restaurant',
               'Algerian Restaurant': 'Algerian Restaurant',
               'Mauritanian Restaurant': 'Mauritanian Restaurant',
               'Senegalese Restaurant': 'Senegalese Restaurant',
               'Gambian Restaurant': 'Gambian Restaurant',
               'Guinea-Bissau Restaurant': 'Guinea-Bissau Restaurant',
               'Guinean Restaurant': 'Guinean Restaurant',
               'Sierra Leonean Restaurant': 'Sierra Leonean Restaurant',
               'Liberian Restaurant': 'Liberian Restaurant',
               'Ivorian Restaurant': 'Ivorian Restaurant',
               'Ghanaian Restaurant': 'Ghanaian Restaurant',
               'Togolese Restaurant': 'Togolese Restaurant',
               'Beninese Restaurant': 'Beninese Restaurant',
               'Nigerian Restaurant': 'Nigerian Restaurant',
               'Cameroonian Restaurant': 'Cameroonian Restaurant',
               'Chadian Restaurant': 'Chadian Restaurant',
               'Central African Restaurant': 'Central African Restaurant',
               'Equatorial Guinean Restaurant': 'Equatorial Guinean Restaurant',
               'Gabonese Restaurant': 'Gabonese Restaurant',
               'Congolese Restaurant': 'Congolese Restaurant',
               'Democratic Republic of the Congo Restaurant': 'Democratic Republic of the Congo Restaurant',
               'Angolan Restaurant': 'Angolan Restaurant',
               'Zambian Restaurant': 'Zambian Restaurant',
               'Malawian Restaurant': 'Malawian Restaurant',
               'Mozambican Restaurant': 'Mozambican Restaurant',
               'Zimbabwean Restaurant': 'Zimbabwean Restaurant',
               'Botswanan Restaurant': 'Botswanan Restaurant',
               'Namibian Restaurant': 'Namibian Restaurant',
               'South African Restaurant': 'South African Restaurant',
               'Lesothoan Restaurant': 'Lesothoan Restaurant',
               'Eswatini Restaurant': 'Eswatini Restaurant',
               'Madagascan Restaurant': 'Madagascan Restaurant',
               'Comorian Restaurant': 'Comorian Restaurant',
               'Mauritian Restaurant': 'Mauritian Restaurant',
               'Seychellois Restaurant': 'Seychellois Restaurant',
               'Djiboutian Restaurant': 'Djiboutian Restaurant',
               'Eritrean Restaurant': 'Eritrean Restaurant',
               'Ethiopian Restaurant': 'Ethiopian Restaurant',
               'Somali Restaurant': 'Somali Restaurant',
               'Kenyan Restaurant': 'Kenyan Restaurant',
               'Ugandan Restaurant': 'Ugandan Restaurant',
               'Tanzanian Restaurant': 'Tanzanian Restaurant',
               'Rwandan Restaurant': 'Rwandan Restaurant',
               'Burundian Restaurant': 'Burundian Restaurant',
               'South Sudanese Restaurant': 'South Sudanese Restaurant',
               'Sudanese Restaurant': 'Sudanese Restaurant'
             }
           };
           
           const translations = categoryTranslations[currentLanguage] || categoryTranslations['tr'];
           return translations[englishCategory] || englishCategory;
         }
         
         // Detaylı açıklama oluşturma fonksiyonu
         function generateDetailedDescription(place, cityName) {
           let description = '';
           
           const descriptions = {
             tr: {
               defaultStart: `${place.name}, ${cityName} şehrinin önemli turistik yerlerinden biridir. `,
               categoryInfo: `Bu yer ${translateCategory(place.categories?.[0]?.name)} kategorisinde yer almaktadır. `,
               ratingInfo: `Foursquare kullanıcıları tarafından ${place.rating}/10 puan almıştır. `,
               addressInfo: `Adres: ${place.location?.formatted_address}. `,
               defaultEnd: `Bu yer Foursquare API'den alınan güncel bilgilerle eklenmiştir ve ${cityName} şehrini ziyaret eden turistlerin mutlaka görmesi gereken yerlerden biridir.`
             },
             en: {
               defaultStart: `${place.name} is one of the important tourist attractions in ${cityName}. `,
               categoryInfo: `This place is in the ${translateCategory(place.categories?.[0]?.name)} category. `,
               ratingInfo: `It has received ${place.rating}/10 points from Foursquare users. `,
               addressInfo: `Address: ${place.location?.formatted_address}. `,
               defaultEnd: `This place has been added with current information from Foursquare API and is one of the must-see places for tourists visiting ${cityName}.`
             }
           };
           
           const currentDescriptions = descriptions[currentLanguage] || descriptions['tr'];
           
           if (place.description) {
             description += place.description;
           } else {
             description += currentDescriptions.defaultStart;
           }
           
           if (place.categories && place.categories.length > 0) {
             description += currentDescriptions.categoryInfo;
           }
           
           if (place.rating) {
             description += currentDescriptions.ratingInfo;
           }
           
           if (place.location && place.location.formatted_address) {
             description += currentDescriptions.addressInfo;
           }
           
           description += currentDescriptions.defaultEnd;
           
           return description;
         }
         
         // Şehirden ülke tespiti - Dünya çapında şehirler
         function detectCountryFromCity(cityName) {
           const cityCountryMap = {
             // Türkiye şehirleri
             'istanbul': 'turkey', 'ankara': 'turkey', 'izmir': 'turkey', 'antalya': 'turkey',
             'kapadokya': 'turkey', 'bursa': 'turkey', 'konya': 'turkey', 'trabzon': 'turkey',
             'adana': 'turkey', 'gaziantep': 'turkey', 'kayseri': 'turkey', 'samsun': 'turkey',
             'eskişehir': 'turkey', 'urfa': 'turkey', 'diyarbakır': 'turkey', 'malatya': 'turkey',
             'erzurum': 'turkey', 'van': 'turkey', 'sivas': 'turkey', 'kastamonu': 'turkey',
             'tokat': 'turkey', 'amasya': 'turkey', 'nevşehir': 'turkey', 'çanakkale': 'turkey',
             'edirne': 'turkey', 'tekirdağ': 'turkey', 'kırklareli': 'turkey', 'balıkesir': 'turkey',
             'manisa': 'turkey', 'aydın': 'turkey', 'muğla': 'turkey', 'denizli': 'turkey',
             'afyon': 'turkey', 'kütahya': 'turkey', 'uşak': 'turkey', 'ısparta': 'turkey',
             'burdur': 'turkey', 'antalya': 'turkey', 'mersin': 'turkey', 'adana': 'turkey',
             'hatay': 'turkey', 'osmaniye': 'turkey', 'kahramanmaraş': 'turkey', 'gaziantep': 'turkey',
             'kilis': 'turkey', 'şanlıurfa': 'turkey', 'adıyaman': 'turkey', 'malatya': 'turkey',
             'elazığ': 'turkey', 'bingöl': 'turkey', 'tunceli': 'turkey', 'erzincan': 'turkey',
             'erzurum': 'turkey', 'bayburt': 'turkey', 'gümüşhane': 'turkey', 'trabzon': 'turkey',
             'rize': 'turkey', 'artvin': 'turkey', 'ardahan': 'turkey', 'kars': 'turkey',
             'ağrı': 'turkey', 'ığdır': 'turkey', 'van': 'turkey', 'bitlis': 'turkey',
             'muş': 'turkey', 'bingöl': 'turkey', 'diyarbakır': 'turkey', 'mardin': 'turkey',
             'şırnak': 'turkey', 'batman': 'turkey', 'siirt': 'turkey', 'hakkari': 'turkey',
             'almanya': 'germany', 'berlin': 'germany', 'münchen': 'germany', 'hamburg': 'germany', 
             'köln': 'germany', 'frankfurt': 'germany', 'stuttgart': 'germany', 'düsseldorf': 'germany',
             'dortmund': 'germany', 'essen': 'germany', 'leipzig': 'germany', 'bremen': 'germany',
             'dresden': 'germany', 'hannover': 'germany', 'nürnberg': 'germany', 'duisburg': 'germany',
             'bonn': 'germany', 'bochum': 'germany', 'wuppertal': 'germany', 'bielefeld': 'germany',
             'mannheim': 'germany', 'karlsruhe': 'germany', 'augsburg': 'germany', 'wiesbaden': 'germany',
             'gelsenkirchen': 'germany', 'mönchengladbach': 'germany', 'braunschweig': 'germany',
             'chemnitz': 'germany', 'kiel': 'germany', 'krefeld': 'germany', 'halle': 'germany',
             'magdeburg': 'germany', 'freiburg': 'germany', 'erfurt': 'germany', 'mainz': 'germany',
             'rostock': 'germany', 'kassel': 'germany', 'hagen': 'germany', 'potsdam': 'germany',
             'saarbrücken': 'germany', 'hamm': 'germany', 'mülheim': 'germany', 'ludwigshafen': 'germany',
             'leverkusen': 'germany', 'oldenburg': 'germany', 'osnabrück': 'germany', 'solingen': 'germany',
             'heidelberg': 'germany', 'herne': 'germany', 'neuss': 'germany', 'darmstadt': 'germany',
             'paderborn': 'germany', 'regensburg': 'germany', 'ingolstadt': 'germany', 'würzburg': 'germany',
             'fürth': 'germany', 'wolfsburg': 'germany', 'offenbach': 'germany', 'ulm': 'germany',
             'heilbronn': 'germany', 'pforzheim': 'germany', 'göttingen': 'germany', 'bottrop': 'germany',
             'trier': 'germany', 'recklinghausen': 'germany', 'reutlingen': 'germany', 'bremerhaven': 'germany',
             'koblenz': 'germany', 'bergisch gladbach': 'germany', 'jena': 'germany', 'remscheid': 'germany',
             'erlangen': 'germany', 'moers': 'germany', 'siegen': 'germany', 'hildesheim': 'germany',
             'salzgitter': 'germany', 'cottbus': 'germany',
             
             // Fransa şehirleri
             'paris': 'france', 'lyon': 'france', 'marseille': 'france', 'toulouse': 'france',
             'nice': 'france', 'nantes': 'france', 'strasbourg': 'france', 'montpellier': 'france',
             'bordeaux': 'france', 'lille': 'france', 'rennes': 'france', 'reims': 'france',
             'le havre': 'france', 'saint-étienne': 'france', 'toulon': 'france', 'angers': 'france',
             'grenoble': 'france', 'dijon': 'france', 'nîmes': 'france', 'aix-en-provence': 'france',
             'saint-quentin-en-yvelines': 'france', 'brest': 'france', 'le mans': 'france', 'amiens': 'france',
             'tours': 'france', 'limoges': 'france', 'clermont-ferrand': 'france', 'villeurbanne': 'france',
             'besançon': 'france', 'orléans': 'france', 'metz': 'france', 'rouen': 'france',
             'mulhouse': 'france', 'perpignan': 'france', 'caen': 'france', 'boulogne-billancourt': 'france',
             'nancy': 'france', 'argenteuil': 'france', 'roubaix': 'france', 'tourcoing': 'france',
             'nanterre': 'france', 'avignon': 'france', 'créteil': 'france', 'dunkerque': 'france',
             'poitiers': 'france', 'asnières-sur-seine': 'france', 'courbevoie': 'france', 'versailles': 'france',
             'pau': 'france', 'fort-de-france': 'france', 'colombes': 'france', 'aulnay-sous-bois': 'france',
             'saint-maur-des-fossés': 'france', 'rueil-malmaison': 'france', 'champigny-sur-marne': 'france',
             'antibes': 'france', 'la rochelle': 'france', 'cannes': 'france',
             
             // İtalya şehirleri
             'roma': 'italy', 'milano': 'italy', 'napoli': 'italy', 'torino': 'italy',
             'palermo': 'italy', 'genova': 'italy', 'bologna': 'italy', 'firenze': 'italy',
             'bari': 'italy', 'catania': 'italy', 'venezia': 'italy', 'verona': 'italy',
             'messina': 'italy', 'padova': 'italy', 'trieste': 'italy', 'taranto': 'italy',
             'brescia': 'italy', 'prato': 'italy', 'parma': 'italy', 'modena': 'italy',
             'reggio calabria': 'italy', 'reggio emilia': 'italy', 'perugia': 'italy', 'livorno': 'italy',
             'ravenna': 'italy', 'cagliari': 'italy', 'foggia': 'italy', 'rimini': 'italy',
             'salerno': 'italy', 'ferrara': 'italy', 'sassari': 'italy', 'latina': 'italy',
             'giugliano in campania': 'italy', 'monza': 'italy', 'syracuse': 'italy', 'pescara': 'italy',
             'bergamo': 'italy', 'forlì': 'italy', 'trento': 'italy', 'vicenza': 'italy',
             'terni': 'italy', 'bolzano': 'italy', 'novara': 'italy', 'piacenza': 'italy',
             'ancona': 'italy', 'andria': 'italy', 'arezzo': 'italy', 'udine': 'italy',
             'cesena': 'italy', 'lecce': 'italy', 'pesaro': 'italy', 'barletta': 'italy',
             'alessandria': 'italy', 'la spezia': 'italy', 'pisa': 'italy', 'catanzaro': 'italy',
             'pistoia': 'italy', 'brindisi': 'italy', 'treviso': 'italy', 'pavia': 'italy',
             
             // İspanya şehirleri
             'madrid': 'spain', 'barcelona': 'spain', 'valencia': 'spain', 'sevilla': 'spain',
             'zaragoza': 'spain', 'málaga': 'spain', 'murcia': 'spain', 'palma': 'spain',
             'las palmas': 'spain', 'bilbao': 'spain', 'alicante': 'spain', 'córdoba': 'spain',
             'valladolid': 'spain', 'vigo': 'spain', 'gijón': 'spain', 'hospitalet de llobregat': 'spain',
             'vitoria-gasteiz': 'spain', 'a coruña': 'spain', 'elche': 'spain', 'oviedo': 'spain',
             'santa cruz de tenerife': 'spain', 'badalona': 'spain', 'cartagena': 'spain', 'terrassa': 'spain',
             'jerez de la frontera': 'spain', 'sabadell': 'spain', 'móstoles': 'spain', 'alcalá de henares': 'spain',
             'pamplona': 'spain', 'fuenlabrada': 'spain', 'almería': 'spain', 'leganés': 'spain',
             'donostia-san sebastián': 'spain', 'burgos': 'spain', 'santander': 'spain', 'castellón de la plana': 'spain',
             'alcorcón': 'spain', 'getafe': 'spain', 'salamanca': 'spain', 'huelva': 'spain',
             'logroño': 'spain', 'badajoz': 'spain', 'tarragona': 'spain', 'león': 'spain',
             'cádiz': 'spain', 'lleida': 'spain', 'marbella': 'spain', 'dos hermanas': 'spain',
             'mataro': 'spain', 'torrejón de ardoz': 'spain', 'parla': 'spain', 'alcobendas': 'spain',
             
             // İngiltere şehirleri
             'london': 'united kingdom', 'birmingham': 'united kingdom', 'manchester': 'united kingdom', 'glasgow': 'united kingdom',
             'liverpool': 'united kingdom', 'leeds': 'united kingdom', 'sheffield': 'united kingdom', 'edinburgh': 'united kingdom',
             'bristol': 'united kingdom', 'cardiff': 'united kingdom', 'leicester': 'united kingdom', 'coventry': 'united kingdom',
             'bradford': 'united kingdom', 'belfast': 'united kingdom', 'nottingham': 'united kingdom', 'kingston upon hull': 'united kingdom',
             'newcastle upon tyne': 'united kingdom', 'stoke-on-trent': 'united kingdom', 'southampton': 'united kingdom', 'derby': 'united kingdom',
             'portsmouth': 'united kingdom', 'brighton': 'united kingdom', 'plymouth': 'united kingdom', 'northampton': 'united kingdom',
             'reading': 'united kingdom', 'luton': 'united kingdom', 'wolverhampton': 'united kingdom', 'bolton': 'united kingdom',
             'bournemouth': 'united kingdom', 'norwich': 'united kingdom', 'swindon': 'united kingdom', 'swansea': 'united kingdom',
             'southend-on-sea': 'united kingdom', 'middlesbrough': 'united kingdom', 'milton keynes': 'united kingdom', 'sunderland': 'united kingdom',
             'warrington': 'united kingdom', 'huddersfield': 'united kingdom', 'peterborough': 'united kingdom', 'york': 'united kingdom',
             'stockport': 'united kingdom', 'west bromwich': 'united kingdom', 'oldham': 'united kingdom', 'exeter': 'united kingdom',
             'gloucester': 'united kingdom', 'blackpool': 'united kingdom', 'preston': 'united kingdom', 'sutton coldfield': 'united kingdom',
             
             // ABD şehirleri
             'new york': 'united states', 'los angeles': 'united states', 'chicago': 'united states', 'houston': 'united states',
             'phoenix': 'united states', 'philadelphia': 'united states', 'san antonio': 'united states', 'san diego': 'united states',
             'dallas': 'united states', 'san jose': 'united states', 'austin': 'united states', 'jacksonville': 'united states',
             'fort worth': 'united states', 'columbus': 'united states', 'charlotte': 'united states', 'san francisco': 'united states',
             'indianapolis': 'united states', 'seattle': 'united states', 'denver': 'united states', 'washington': 'united states',
             'boston': 'united states', 'el paso': 'united states', 'detroit': 'united states', 'nashville': 'united states',
             'portland': 'united states', 'memphis': 'united states', 'oklahoma city': 'united states', 'las vegas': 'united states',
             'louisville': 'united states', 'baltimore': 'united states', 'milwaukee': 'united states', 'albuquerque': 'united states',
             'tucson': 'united states', 'fresno': 'united states', 'mesa': 'united states', 'sacramento': 'united states',
             'atlanta': 'united states', 'kansas city': 'united states', 'colorado springs': 'united states', 'miami': 'united states',
             'raleigh': 'united states', 'omaha': 'united states', 'long beach': 'united states', 'virginia beach': 'united states',
             'oakland': 'united states', 'minneapolis': 'united states', 'tulsa': 'united states', 'arlington': 'united states',
             'tampa': 'united states', 'new orleans': 'united states', 'wichita': 'united states', 'cleveland': 'united states',
             
             // Kanada şehirleri
             'toronto': 'canada', 'montreal': 'canada', 'vancouver': 'canada', 'calgary': 'canada',
             'edmonton': 'canada', 'ottawa': 'canada', 'winnipeg': 'canada', 'quebec city': 'canada',
             'hamilton': 'canada', 'kitchener': 'canada', 'london': 'canada', 'victoria': 'canada',
             'halifax': 'canada', 'oshawa': 'canada', 'windsor': 'canada', 'saskatoon': 'canada',
             'st. catharines': 'canada', 'regina': 'canada', 'sherbrooke': 'canada', 'kelowna': 'canada',
             'barrie': 'canada', 'abbotsford': 'canada', 'kingston': 'canada', 'sudbury': 'canada',
             'trois-rivières': 'canada', 'guelph': 'canada', 'cambridge': 'canada', 'whitby': 'canada',
             'thunder bay': 'canada', 'chatham': 'canada', 'red deer': 'canada', 'lethbridge': 'canada',
             'kamloops': 'canada', 'brantford': 'canada', 'nanaimo': 'canada', 'moncton': 'canada',
             'sarnia': 'canada', 'sault ste. marie': 'canada', 'medicine hat': 'canada', 'north bay': 'canada',
             'prince george': 'canada', 'fredericton': 'canada', 'saint john': 'canada', 'fort mcmurray': 'canada',
             
             // Avustralya şehirleri
             'sydney': 'australia', 'melbourne': 'australia', 'brisbane': 'australia', 'perth': 'australia',
             'adelaide': 'australia', 'gold coast': 'australia', 'newcastle': 'australia', 'canberra': 'australia',
             'sunshine coast': 'australia', 'wollongong': 'australia', 'hobart': 'australia', 'geelong': 'australia',
             'townsville': 'australia', 'cairns': 'australia', 'darwin': 'australia', 'toowoomba': 'australia',
             'ballarat': 'australia', 'bendigo': 'australia', 'albury': 'australia', 'launceston': 'australia',
             'mackay': 'australia', 'rockhampton': 'australia', 'bunbury': 'australia', 'bundaberg': 'australia',
             'coffs harbour': 'australia', 'wagga wagga': 'australia', 'hervey bay': 'australia', 'mildura': 'australia',
             'shepparton': 'australia', 'port macquarie': 'australia', 'gladstone': 'australia', 'tamworth': 'australia',
             'traralgon': 'australia', 'orange': 'australia', 'dubbo': 'australia', 'geraldton': 'australia',
             'bowral': 'australia', 'bathurst': 'australia', 'nowra': 'australia', 'warrnambool': 'australia',
             
             // Japonya şehirleri
             'tokyo': 'japan', 'yokohama': 'japan', 'osaka': 'japan', 'nagoya': 'japan',
             'sapporo': 'japan', 'fukuoka': 'japan', 'kobe': 'japan', 'kawasaki': 'japan',
             'kyoto': 'japan', 'saitama': 'japan', 'hiroshima': 'japan', 'sendai': 'japan',
             'kitakyushu': 'japan', 'chiba': 'japan', 'sakai': 'japan', 'niigata': 'japan',
             'hamamatsu': 'japan', 'okayama': 'japan', 'sagamihara': 'japan', 'shizuoka': 'japan',
             'kumamoto': 'japan', 'kagoshima': 'japan', 'matsuyama': 'japan', 'kanazawa': 'japan',
             'utsunomiya': 'japan', 'matsudo': 'japan', 'kawaguchi': 'japan', 'takatsuki': 'japan',
             'toyama': 'japan', 'toyota': 'japan', 'takamatsu': 'japan', 'machida': 'japan',
             'gifu': 'japan', 'fujisawa': 'japan', 'kashiwa': 'japan', 'toyonaka': 'japan',
             'nagano': 'japan', 'iwaki': 'japan', 'asahikawa': 'japan', 'okazaki': 'japan',
             'miyazaki': 'japan', 'nara': 'japan', 'suita': 'japan', 'wakayama': 'japan',
             
             // Güney Kore şehirleri
             'seoul': 'south korea', 'busan': 'south korea', 'incheon': 'south korea', 'daegu': 'south korea',
             'daejeon': 'south korea', 'gwangju': 'south korea', 'suwon': 'south korea', 'ulsan': 'south korea',
             'changwon': 'south korea', 'goyang': 'south korea', 'yongin': 'south korea', 'seongnam': 'south korea',
             'bucheon': 'south korea', 'ansan': 'south korea', 'cheongju': 'south korea', 'jeonju': 'south korea',
             'anyang': 'south korea', 'cheonan': 'south korea', 'namyangju': 'south korea', 'pohang': 'south korea',
             'uijeongbu': 'south korea', 'siheung': 'south korea', 'paju': 'south korea', 'gimhae': 'south korea',
             'pyeongtaek': 'south korea', 'jinju': 'south korea', 'yangju': 'south korea', 'icheon': 'south korea',
             'gunpo': 'south korea', 'osan': 'south korea', 'gwangmyeong': 'south korea', 'jeju': 'south korea',
             'hanam': 'south korea', 'gimpo': 'south korea', 'guri': 'south korea', 'mokpo': 'south korea',
             'wonju': 'south korea', 'sacheon': 'south korea', 'yangsan': 'south korea', 'gwangyang': 'south korea',
             
             // Çin şehirleri
             'beijing': 'china', 'shanghai': 'china', 'guangzhou': 'china', 'shenzhen': 'china',
             'tianjin': 'china', 'wuhan': 'china', 'dongguan': 'china', 'chengdu': 'china',
             'nanjing': 'china', 'chongqing': 'china', 'xian': 'china', 'shenyang': 'china',
             'hangzhou': 'china', 'dalian': 'china', 'qingdao': 'china', 'jinan': 'china',
             'harbin': 'china', 'zhengzhou': 'china', 'shantou': 'china', 'foshan': 'china',
             'changchun': 'china', 'shijiazhuang': 'china', 'kunming': 'china', 'changsha': 'china',
             'hefei': 'china', 'urumqi': 'china', 'suzhou': 'china', 'wuxi': 'china',
             'ningbo': 'china', 'lanzhou': 'china', 'xuzhou': 'china', 'wenzhou': 'china',
             'nanning': 'china', 'guiyang': 'china', 'taiyuan': 'china', 'nanchang': 'china',
             'zibo': 'china', 'yantai': 'china', 'huizhou': 'china', 'weifang': 'china',
             'handan': 'china', 'zhuhai': 'china', 'baotou': 'china', 'tangshan': 'china',
             
             // Hindistan şehirleri
             'mumbai': 'india', 'delhi': 'india', 'bangalore': 'india', 'hyderabad': 'india',
             'ahmedabad': 'india', 'chennai': 'india', 'kolkata': 'india', 'surat': 'india',
             'pune': 'india', 'jaipur': 'india', 'lucknow': 'india', 'kanpur': 'india',
             'nagpur': 'india', 'indore': 'india', 'thane': 'india', 'bhopal': 'india',
             'visakhapatnam': 'india', 'pimpri-chinchwad': 'india', 'patna': 'india', 'vadodara': 'india',
             'ghaziabad': 'india', 'ludhiana': 'india', 'agra': 'india', 'nashik': 'india',
             'faridabad': 'india', 'meerut': 'india', 'rajkot': 'india', 'kalyan-dombivli': 'india',
             'vasai-virar': 'india', 'varanasi': 'india', 'srinagar': 'india', 'aurangabad': 'india',
             'dhanbad': 'india', 'amritsar': 'india', 'navi mumbai': 'india', 'allahabad': 'india',
             'ranchi': 'india', 'howrah': 'india', 'coimbatore': 'india', 'jabalpur': 'india',
             'gwalior': 'india', 'vijayawada': 'india', 'jodhpur': 'india', 'madurai': 'india',
             
             // Brezilya şehirleri
             'são paulo': 'brazil', 'rio de janeiro': 'brazil', 'brasília': 'brazil', 'salvador': 'brazil',
             'fortaleza': 'brazil', 'belo horizonte': 'brazil', 'manaus': 'brazil', 'curitiba': 'brazil',
             'recife': 'brazil', 'goiânia': 'brazil', 'belém': 'brazil', 'porto alegre': 'brazil',
             'guarulhos': 'brazil', 'campinas': 'brazil', 'são luís': 'brazil', 'são gonçalo': 'brazil',
             'maceió': 'brazil', 'duque de caxias': 'brazil', 'natal': 'brazil', 'teresina': 'brazil',
             'campo grande': 'brazil', 'nova iguaçu': 'brazil', 'são bernardo do campo': 'brazil', 'joão pessoa': 'brazil',
             'santo andré': 'brazil', 'osasco': 'brazil', 'jaboatão dos guararapes': 'brazil', 'são josé dos campos': 'brazil',
             'ribeirão preto': 'brazil', 'uberlândia': 'brazil', 'sorocaba': 'brazil', 'contagem': 'brazil',
             'aracaju': 'brazil', 'feira de santana': 'brazil', 'cuiabá': 'brazil', 'joinville': 'brazil',
             'aparecida de goiânia': 'brazil', 'londrina': 'brazil', 'juiz de fora': 'brazil', 'ananindeua': 'brazil',
             
             // Rusya şehirleri
             'moscow': 'russia', 'saint petersburg': 'russia', 'novosibirsk': 'russia', 'yekaterinburg': 'russia',
             'nizhny novgorod': 'russia', 'kazan': 'russia', 'chelyabinsk': 'russia', 'omsk': 'russia',
             'samara': 'russia', 'rostov-on-don': 'russia', 'ufa': 'russia', 'krasnoyarsk': 'russia',
             'perm': 'russia', 'voronezh': 'russia', 'volgograd': 'russia', 'krasnodar': 'russia',
             'saratov': 'russia', 'tyumen': 'russia', 'tolyatti': 'russia', 'izhevsk': 'russia',
             'barnaul': 'russia', 'ulyanovsk': 'russia', 'irkutsk': 'russia', 'vladivostok': 'russia',
             'yaroslavl': 'russia', 'habarovsk': 'russia', 'makhachkala': 'russia', 'tomsk': 'russia',
             'orenburg': 'russia', 'kemerovo': 'russia', 'ryazan': 'russia', 'astrakhan': 'russia',
             'naberezhnye chelny': 'russia', 'penza': 'russia', 'lipetsk': 'russia', 'tula': 'russia',
             'kirov': 'russia', 'cheboksary': 'russia', 'kaliningrad': 'russia', 'bryansk': 'russia',
             
             // Meksika şehirleri
             'mexico city': 'mexico', 'guadalajara': 'mexico', 'monterrey': 'mexico', 'puebla': 'mexico',
             'tijuana': 'mexico', 'león': 'mexico', 'juárez': 'mexico', 'torreón': 'mexico',
             'querétaro': 'mexico', 'san luis potosí': 'mexico', 'mérida': 'mexico', 'mexicali': 'mexico',
             'aguascalientes': 'mexico', 'cuernavaca': 'mexico', 'saltillo': 'mexico', 'hermosillo': 'mexico',
             'cancún': 'mexico', 'durango': 'mexico', 'xalapa': 'mexico', 'toluca': 'mexico',
             'reynosa': 'mexico', 'chihuahua': 'mexico', 'morelia': 'mexico', 'tampico': 'mexico',
             'culiacán': 'mexico', 'acapulco': 'mexico', 'chimalhuacán': 'mexico', 'tlalnepantla': 'mexico',
             'veracruz': 'mexico', 'pachuca': 'mexico', 'oaxaca': 'mexico', 'tuxtla gutiérrez': 'mexico',
             'mazatlán': 'mexico', 'irapuato': 'mexico', 'nuevo laredo': 'mexico', 'villahermosa': 'mexico',
             
             // Arjantin şehirleri
             'buenos aires': 'argentina', 'córdoba': 'argentina', 'rosario': 'argentina', 'mendoza': 'argentina',
             'tucumán': 'argentina', 'la plata': 'argentina', 'mar del plata': 'argentina', 'salta': 'argentina',
             'santa fe': 'argentina', 'san juan': 'argentina', 'resistencia': 'argentina', 'santiago del estero': 'argentina',
             'corrientes': 'argentina', 'posadas': 'argentina', 'neuquén': 'argentina', 'bahía blanca': 'argentina',
             'paraná': 'argentina', 'formosa': 'argentina', 'san luis': 'argentina', 'la rioja': 'argentina',
             'catamarca': 'argentina', 'río cuarto': 'argentina', 'comodoro rivadavia': 'argentina', 'concordia': 'argentina',
             'san rafael': 'argentina', 'tandil': 'argentina', 'san nicolás': 'argentina', 'río gallegos': 'argentina',
             'ushuaia': 'argentina', 'san salvador de jujuy': 'argentina', 'pergamino': 'argentina', 'zárate': 'argentina',
             'campana': 'argentina', 'venado tuerto': 'argentina', 'junín': 'argentina', 'olavarría': 'argentina',
             
             // Türkiye şehirleri
             'istanbul': 'turkey', 'ankara': 'turkey', 'izmir': 'turkey', 'bursa': 'turkey',
             'antalya': 'turkey', 'adana': 'turkey', 'konya': 'turkey', 'şanlıurfa': 'turkey',
             'gaziantep': 'turkey', 'kayseri': 'turkey', 'mersin': 'turkey', 'eskişehir': 'turkey',
             'diyarbakır': 'turkey', 'samsun': 'turkey', 'denizli': 'turkey', 'adapazarı': 'turkey',
             'malatya': 'turkey', 'kahramanmaraş': 'turkey', 'erzurum': 'turkey', 'van': 'turkey',
             'batman': 'turkey', 'elazığ': 'turkey', 'iğdır': 'turkey', 'tokat': 'turkey',
             'sivas': 'turkey', 'gebze': 'turkey', 'kocaeli': 'turkey', 'manisa': 'turkey',
             'balıkesir': 'turkey', 'aydın': 'turkey', 'tekirdağ': 'turkey', 'çorum': 'turkey',
             'kırıkkale': 'turkey', 'afyon': 'turkey', 'isparta': 'turkey', 'zonguldak': 'turkey',
             'uşak': 'turkey', 'düzce': 'turkey', 'osmaniye': 'turkey', 'kırşehir': 'turkey',
             
             // Hollanda şehirleri
             'amsterdam': 'netherlands', 'rotterdam': 'netherlands', 'the hague': 'netherlands', 'utrecht': 'netherlands',
             'eindhoven': 'netherlands', 'tilburg': 'netherlands', 'groningen': 'netherlands', 'almere': 'netherlands',
             'breda': 'netherlands', 'nijmegen': 'netherlands', 'enschede': 'netherlands', 'haarlem': 'netherlands',
             'arnhem': 'netherlands', 'zaanstad': 'netherlands', 'amersfoort': 'netherlands', 'apeldoorn': 'netherlands',
             's-hertogenbosch': 'netherlands', 'hoofddorp': 'netherlands', 'maastricht': 'netherlands', 'leiden': 'netherlands',
             'dordrecht': 'netherlands', 'zoetermeer': 'netherlands', 'zwolle': 'netherlands', 'deventer': 'netherlands',
             'delft': 'netherlands', 'alkmaar': 'netherlands', 'leeuwarden': 'netherlands', 'sittard-geleen': 'netherlands',
             'venlo': 'netherlands', 'hilversum': 'netherlands', 'hengelo': 'netherlands', 'purmerend': 'netherlands',
             'roosendaal': 'netherlands', 'schiedam': 'netherlands', 'spijkenisse': 'netherlands', 'ede': 'netherlands',
             
             // Belçika şehirleri
             'brussels': 'belgium', 'antwerp': 'belgium', 'ghent': 'belgium', 'charleroi': 'belgium',
             'liège': 'belgium', 'bruges': 'belgium', 'namur': 'belgium', 'leuven': 'belgium',
             'mons': 'belgium', 'aalst': 'belgium', 'mechelen': 'belgium', 'la louvière': 'belgium',
             'kortrijk': 'belgium', 'hasselt': 'belgium', 'sint-niklaas': 'belgium', 'ostend': 'belgium',
             'genk': 'belgium', 'seraing': 'belgium', 'roeselare': 'belgium', 'verviers': 'belgium',
             'mouscron': 'belgium', 'beveren': 'belgium', 'dendermonde': 'belgium', 'beringen': 'belgium',
             'turnhout': 'belgium', 'vilvoorde': 'belgium', 'lokeren': 'belgium', 'sint-truiden': 'belgium',
             'herstal': 'belgium', 'brasschaat': 'belgium', 'waregem': 'belgium', 'grimbergen': 'belgium',
             
             // İsviçre şehirleri
             'zurich': 'switzerland', 'geneva': 'switzerland', 'basel': 'switzerland', 'bern': 'switzerland',
             'lausanne': 'switzerland', 'winterthur': 'switzerland', 'lucerne': 'switzerland', 'st. gallen': 'switzerland',
             'lugano': 'switzerland', 'biel/bienne': 'switzerland', 'thun': 'switzerland', 'köniz': 'switzerland',
             'la chaux-de-fonds': 'switzerland', 'schaffhausen': 'switzerland', 'fribourg': 'switzerland', 'vernier': 'switzerland',
             'chur': 'switzerland', 'neuchâtel': 'switzerland', 'uster': 'switzerland', 'sion': 'switzerland',
             'emmen': 'switzerland', 'zug': 'switzerland', 'yverdon-les-bains': 'switzerland', 'dübendorf': 'switzerland',
             'dietikon': 'switzerland', 'montreux': 'switzerland', 'frauenfeld': 'switzerland', 'wetzikon': 'switzerland',
             'baar': 'switzerland', 'rapperswil-jona': 'switzerland', 'carouge': 'switzerland', 'riehen': 'switzerland',
             
             // Avusturya şehirleri
             'vienna': 'austria', 'graz': 'austria', 'linz': 'austria', 'salzburg': 'austria',
             'innsbruck': 'austria', 'klagenfurt': 'austria', 'villach': 'austria', 'wels': 'austria',
             'sankt pölten': 'austria', 'dornbirn': 'austria', 'steyr': 'austria', 'wiener neustadt': 'austria',
             'feldkirch': 'austria', 'bregenz': 'austria', 'leonding': 'austria', 'klosterneuburg': 'austria',
             'baden': 'austria', 'wolfsberg': 'austria', 'leoben': 'austria', 'krems': 'austria',
             'traun': 'austria', 'amstetten': 'austria', 'kapfenberg': 'austria', 'mödling': 'austria',
             'hallein': 'austria', 'kufstein': 'austria', 'traiskirchen': 'austria', 'schwechat': 'austria',
             'braunau am inn': 'austria', 'stockerau': 'austria', 'saalfelden': 'austria', 'ansfelden': 'austria',
             
             // Portekiz şehirleri
             'lisbon': 'portugal', 'porto': 'portugal', 'amadora': 'portugal', 'braga': 'portugal',
             'setúbal': 'portugal', 'coimbra': 'portugal', 'funchal': 'portugal', 'almada': 'portugal',
             'agualva-cacém': 'portugal', 'queluz': 'portugal', 'aveiro': 'portugal', 'évora': 'portugal',
             'rio maior': 'portugal', 'odivelas': 'portugal', 'loures': 'portugal', 'matosinhos': 'portugal',
             'gondomar': 'portugal', 'vila nova de gaia': 'portugal', 'viseu': 'portugal', 'guimarães': 'portugal',
             'leiria': 'portugal', 'faro': 'portugal', 'santarém': 'portugal', 'barreiro': 'portugal',
             'montijo': 'portugal', 'sintra': 'portugal', 'cascais': 'portugal', 'vila franca de xira': 'portugal',
             'esposende': 'portugal', 'póvoa de varzim': 'portugal', 'torres vedras': 'portugal', 'paredes': 'portugal',
             
             // Yunanistan şehirleri
             'athens': 'greece', 'thessaloniki': 'greece', 'patras': 'greece', 'heraklion': 'greece',
             'larissa': 'greece', 'volos': 'greece', 'rhodes': 'greece', 'ioannina': 'greece',
             'chania': 'greece', 'chalcis': 'greece', 'serres': 'greece', 'alexandroupoli': 'greece',
             'xanthi': 'greece', 'katerini': 'greece', 'trikala': 'greece', 'lamia': 'greece',
             'kavala': 'greece', 'kalamata': 'greece', 'veria': 'greece', 'corfu': 'greece',
             'drama': 'greece', 'tripoli': 'greece', 'kozani': 'greece', 'agrinio': 'greece',
             'giannitsa': 'greece', 'preveza': 'greece', 'karditsa': 'greece', 'rethymno': 'greece',
             'mytilene': 'greece', 'chios': 'greece', 'pyrgos': 'greece', 'aigio': 'greece',
             
             // Polonya şehirleri
             'warsaw': 'poland', 'kraków': 'poland', 'łódź': 'poland', 'wrocław': 'poland',
             'poznań': 'poland', 'gdańsk': 'poland', 'szczecin': 'poland', 'bydgoszcz': 'poland',
             'lublin': 'poland', 'katowice': 'poland', 'białystok': 'poland', 'gdynia': 'poland',
             'częstochowa': 'poland', 'radom': 'poland', 'sosnowiec': 'poland', 'toruń': 'poland',
             'kielce': 'poland', 'gliwice': 'poland', 'zabrze': 'poland', 'bytom': 'poland',
             'olsztyn': 'poland', 'bielsko-biała': 'poland', 'rzeszów': 'poland', 'ruda śląska': 'poland',
             'rybnik': 'poland', 'tychy': 'poland', 'dąbrowa górnicza': 'poland', 'płock': 'poland',
             'elbląg': 'poland', 'opole': 'poland', 'gorzów wielkopolski': 'poland', 'wałbrzych': 'poland',
             
             // Çek Cumhuriyeti şehirleri
             'prague': 'czech republic', 'brno': 'czech republic', 'ostrava': 'czech republic', 'plzen': 'czech republic',
             'liberec': 'czech republic', 'olomouc': 'czech republic', 'české budějovice': 'czech republic', 'hradec králové': 'czech republic',
             'ústí nad labem': 'czech republic', 'pardubice': 'czech republic', 'zlín': 'czech republic', 'havířov': 'czech republic',
             'kladno': 'czech republic', 'most': 'czech republic', 'opava': 'czech republic', 'frýdek-místek': 'czech republic',
             'karviná': 'czech republic', 'jihlava': 'czech republic', 'teplice': 'czech republic', 'děčín': 'czech republic',
             'karlovy vary': 'czech republic', 'jablonec nad nisou': 'czech republic', 'mladá boleslav': 'czech republic', 'prostějov': 'czech republic',
             'přerov': 'czech republic', 'česká lípa': 'czech republic', 'třebíč': 'czech republic', 'tábor': 'czech republic',
             'znojmo': 'czech republic', 'příbram': 'czech republic', 'cheb': 'czech republic', 'trutnov': 'czech republic',
             
             // Macaristan şehirleri
             'budapest': 'hungary', 'debrecen': 'hungary', 'szeged': 'hungary', 'miskolc': 'hungary',
             'pécs': 'hungary', 'győr': 'hungary', 'nyíregyháza': 'hungary', 'kecskemét': 'hungary',
             'székesfehérvár': 'hungary', 'szombathely': 'hungary', 'szolnok': 'hungary', 'tatabánya': 'hungary',
             'kaposvár': 'hungary', 'békéscsaba': 'hungary', 'érd': 'hungary', 'zalaegerszeg': 'hungary',
             'sopron': 'hungary', 'eger': 'hungary', 'nagykanizsa': 'hungary', 'dunakeszi': 'hungary',
             'hódmezővásárhely': 'hungary', 'szekszárd': 'hungary', 'mohács': 'hungary', 'törökszentmiklós': 'hungary',
             'cegléd': 'hungary', 'orosháza': 'hungary', 'salgótarján': 'hungary', 'pápa': 'hungary',
             'hajdúböszörmény': 'hungary', 'vác': 'hungary', 'gyula': 'hungary', 'komárom': 'hungary',
             
             // Romanya şehirleri
             'bucharest': 'romania', 'cluj-napoca': 'romania', 'timișoara': 'romania', 'iași': 'romania',
             'constanța': 'romania', 'craiova': 'romania', 'brașov': 'romania', 'galați': 'romania',
             'ploiești': 'romania', 'oradea': 'romania', 'brăila': 'romania', 'arad': 'romania',
             'pitești': 'romania', 'sibiu': 'romania', 'bacău': 'romania', 'târgu mureș': 'romania',
             'baia mare': 'romania', 'buzău': 'romania', 'botoșani': 'romania', 'satu mare': 'romania',
             'râmnicu vâlcea': 'romania', 'drobeta-turnu severin': 'romania', 'suceava': 'romania', 'piatra neamț': 'romania',
             'târgu jiu': 'romania', 'tulcea': 'romania', 'focșani': 'romania', 'bistrița': 'romania',
             'reșița': 'romania', 'alba iulia': 'romania', 'slatina': 'romania', 'câmpulung': 'romania',
             
             // Bulgaristan şehirleri
             'sofia': 'bulgaria', 'plovdiv': 'bulgaria', 'varna': 'bulgaria', 'burgas': 'bulgaria',
             'ruse': 'bulgaria', 'stara zagora': 'bulgaria', 'pleven': 'bulgaria', 'sliven': 'bulgaria',
             'dobrich': 'bulgaria', 'shumen': 'bulgaria', 'pernik': 'bulgaria', 'haskovo': 'bulgaria',
             'yambol': 'bulgaria', 'pazardzhik': 'bulgaria', 'blagoevgrad': 'bulgaria', 'veliko tarnovo': 'bulgaria',
             'vratsa': 'bulgaria', 'gabrovo': 'bulgaria', 'asenovgrad': 'bulgaria', 'vidin': 'bulgaria',
             'kazanlak': 'bulgaria', 'kyustendil': 'bulgaria', 'kardzhali': 'bulgaria', 'montana': 'bulgaria',
             'dimitrovgrad': 'bulgaria', 'targovishte': 'bulgaria', 'lovech': 'bulgaria', 'silistra': 'bulgaria',
             'dupnitsa': 'bulgaria', 'svishtov': 'bulgaria', 'velingrad': 'bulgaria', 'gorna oryahovitsa': 'bulgaria',
             
             // Hırvatistan şehirleri
             'zagreb': 'croatia', 'split': 'croatia', 'rijeka': 'croatia', 'osijek': 'croatia',
             'zadar': 'croatia', 'pula': 'croatia', 'slavonski brod': 'croatia', 'karlovac': 'croatia',
             'varaždin': 'croatia', 'šibenik': 'croatia', 'sisak': 'croatia', 'velika gorica': 'croatia',
             'vukovar': 'croatia', 'dubrovnik': 'croatia', 'bjelovar': 'croatia', 'koprivnica': 'croatia',
             'požega': 'croatia', 'zaprešić': 'croatia', 'solin': 'croatia', 'cakovec': 'croatia',
             'vinkovci': 'croatia', 'nova gradiška': 'croatia', 'trogir': 'croatia', 'krapina': 'croatia',
             'samobor': 'croatia', 'križevci': 'croatia', 'makarska': 'croatia', 'čakovec': 'croatia',
             'gospić': 'croatia', 'đakovo': 'croatia', 'imotski': 'croatia', 'metković': 'croatia',
             
             // Slovakya şehirleri
             'bratislava': 'slovakia', 'košice': 'slovakia', 'prešov': 'slovakia', 'žilina': 'slovakia',
             'banská bystrica': 'slovakia', 'nitra': 'slovakia', 'trnava': 'slovakia', 'martin': 'slovakia',
             'trenčín': 'slovakia', 'poprad': 'slovakia', 'prievidza': 'slovakia', 'zvolen': 'slovakia',
             'považská bystrica': 'slovakia', 'michalovce': 'slovakia', 'spišská nová ves': 'slovakia', 'komárno': 'slovakia',
             'levice': 'slovakia', 'bardejov': 'slovakia', 'liptovský mikuláš': 'slovakia', 'ružomberok': 'slovakia',
             'dolný kubín': 'slovakia', 'rimavská sobota': 'slovakia', 'topoľčany': 'slovakia', 'galanta': 'slovakia',
             'dunajská streda': 'slovakia', 'brezno': 'slovakia', 'senica': 'slovakia', 'snina': 'slovakia',
             'lučenec': 'slovakia', 'trebišov': 'slovakia', 'malacky': 'slovakia', 'rožňava': 'slovakia',
             
             // Slovenya şehirleri
             'ljubljana': 'slovenia', 'maribor': 'slovenia', 'celje': 'slovenia', 'kranj': 'slovenia',
             'velenje': 'slovenia', 'koper': 'slovenia', 'novo mesto': 'slovenia', 'ptuj': 'slovenia',
             'trbovlje': 'slovenia', 'kamnik': 'slovenia', 'jesenice': 'slovenia', 'nova gorica': 'slovenia',
             'domžale': 'slovenia', 'škofja loka': 'slovenia', 'murska sobota': 'slovenia', 'slovenj gradec': 'slovenia',
             'krško': 'slovenia', 'postojna': 'slovenia', 'litija': 'slovenia', 'radovljica': 'slovenia',
             'idrija': 'slovenia', 'grosuplje': 'slovenia', 'izola': 'slovenia', 'logatec': 'slovenia',
             'vrhnika': 'slovenia', 'tolmin': 'slovenia', 'sevnica': 'slovenia', 'ajdovščina': 'slovenia',
             'bled': 'slovenia', 'piran': 'slovenia', 'bovec': 'slovenia', 'bohinj': 'slovenia',
             
             // Estonya şehirleri
             'tallinn': 'estonia', 'tartu': 'estonia', 'narva': 'estonia', 'pärnu': 'estonia',
             'kohtla-järve': 'estonia', 'viljandi': 'estonia', 'rakvere': 'estonia', 'maardu': 'estonia',
             'sillamäe': 'estonia', 'kuressaare': 'estonia', 'võru': 'estonia', 'valga': 'estonia',
             'haapsalu': 'estonia', 'jõhvi': 'estonia', 'paide': 'estonia', 'keila': 'estonia',
             'saue': 'estonia', 'elva': 'estonia', 'tapa': 'estonia', 'põlva': 'estonia',
             'jõgeva': 'estonia', 'kiviõli': 'estonia', 'rapla': 'estonia', 'kärdla': 'estonia',
             'türi': 'estonia', 'loksa': 'estonia', 'otepää': 'estonia', 'põltsamaa': 'estonia',
             'kehra': 'estonia', 'paldiski': 'estonia', 'tõrva': 'estonia', 'kunda': 'estonia',
             
             // Letonya şehirleri
             'riga': 'latvia', 'daugavpils': 'latvia', 'liepāja': 'latvia', 'jelgava': 'latvia',
             'jūrmala': 'latvia', 'ventspils': 'latvia', 'rēzekne': 'latvia', 'valmiera': 'latvia',
             'jēkabpils': 'latvia', 'ogre': 'latvia', 'tukums': 'latvia', 'salaspils': 'latvia',
             'cēsis': 'latvia', 'kuldīga': 'latvia', 'saldus': 'latvia', 'talsi': 'latvia',
             'dobele': 'latvia', 'krāslava': 'latvia', 'bauska': 'latvia', 'sigulda': 'latvia',
             'madona': 'latvia', 'aizkraukle': 'latvia', 'limbaži': 'latvia', 'gulbene': 'latvia',
             'alūksne': 'latvia', 'balvi': 'latvia', 'ludza': 'latvia', 'preiļi': 'latvia',
             'smiltene': 'latvia', 'auce': 'latvia', 'pāvilosta': 'latvia', 'stende': 'latvia',
             
             // Litvanya şehirleri
             'vilnius': 'lithuania', 'kaunas': 'lithuania', 'klaipėda': 'lithuania', 'šiauliai': 'lithuania',
             'panevėžys': 'lithuania', 'alytus': 'lithuania', 'marijampolė': 'lithuania', 'mažeikiai': 'lithuania',
             'jonava': 'lithuania', 'utena': 'lithuania', 'kėdainiai': 'lithuania', 'telšiai': 'lithuania',
             'visaginas': 'lithuania', 'tauragė': 'lithuania', 'ukmergė': 'lithuania', 'plungė': 'lithuania',
             'kretinga': 'lithuania', 'šilutė': 'lithuania', 'radviliškis': 'lithuania', 'gargždai': 'lithuania',
             'druskininkai': 'lithuania', 'palanga': 'lithuania', 'rokiškis': 'lithuania', 'biržai': 'lithuania',
             'elektrėnai': 'lithuania', 'garliava': 'lithuania', 'kuršėnai': 'lithuania', 'vilkaviškis': 'lithuania',
             'šakiai': 'lithuania', 'raseiniai': 'lithuania', 'anykščiai': 'lithuania', 'prienai': 'lithuania'
           };
           
           return cityCountryMap[cityName.toLowerCase()] || null; // Bilinmeyen şehirler için null döndür
         }
         
         // Şehir için örnek turistik yerler oluştur
         function generateCityPlaces(cityName, detectedCountry) {
           const countryFilter = document.getElementById('countryFilter');
           let selectedCountry = detectedCountry ? detectedCountry.toUpperCase() : (countryFilter ? countryFilter.value.toUpperCase() : 'GERMANY');
           
           // Güvenlik kontrolü - selectedCountry'nin undefined olmamasını sağla
           if (!selectedCountry || selectedCountry === 'UNDEFINED') {
             selectedCountry = 'GERMANY';
           }
           
           // Özel şehir verileri - dünyaca ünlü şehirler için gerçek turistik yerler
           const specialCities = {
             'berlin': [
               { name: 'Brandenburg Kapısı', category: 'Tarihi Yapı', desc: 'Berlin\'in en ünlü simgesi olan Brandenburg Kapısı, Almanya\'nın birleşmesinin sembolüdür. 1791 yılında inşa edilen bu neoklasik yapı, Berlin Duvarı\'nın yıkılmasından sonra özgürlüğün simgesi haline gelmiştir.' },
               { name: 'Berlin Duvarı', category: 'Tarihi Yapı', desc: 'Soğuk Savaş döneminin en önemli sembollerinden biri olan Berlin Duvarı\'nın kalıntıları. East Side Gallery bölümünde dünyaca ünlü sanatçıların duvar resimleri bulunmaktadır.' },
               { name: 'Reichstag Binası', category: 'Hükümet Binası', desc: 'Alman Parlamentosu\'nun bulunduğu tarihi bina. Norman Foster tarafından tasarlanan cam kubbesi ile ünlüdür ve ücretsiz ziyaret edilebilir.' },
               { name: 'Museum Island', category: 'Müze Kompleksi', desc: 'UNESCO Dünya Mirası listesinde yer alan müze adası, beş dünyaca ünlü müzeyi barındırır: Pergamon Müzesi, Bode Müzesi, Neues Museum, Alte Nationalgalerie ve Altes Museum.' },
               { name: 'Checkpoint Charlie', category: 'Tarihi Yer', desc: 'Soğuk Savaş döneminde Doğu ve Batı Berlin arasındaki en ünlü sınır kapısı. Bugün müze olarak hizmet vermekte ve dönemin atmosferini yaşatmaktadır.' },
               { name: 'Tiergarten', category: 'Park', desc: 'Berlin\'in kalbinde yer alan 210 hektarlık büyük park. Yürüyüş, bisiklet sürme ve piknik için ideal. İçinde Zafer Anıtı ve Bellevue Sarayı bulunur.' },
               { name: 'Potsdamer Platz', category: 'Şehir Merkezi', desc: 'Modern Berlin\'in kalbi olan bu meydan, gökdelenler, alışveriş merkezleri, sinema kompleksleri ve restoranlarla dolu canlı bir bölgedir.' },
               { name: 'Berlin Katedrali', category: 'Dini Yapı', desc: 'Spree Nehri kıyısında yer alan görkemli Protestan katedrali. Barok mimarisi ve muhteşem kubbesi ile Berlin\'in en güzel yapılarından biridir.' },
               { name: 'Alexanderplatz', category: 'Meydan', desc: 'Berlin\'in en büyük meydanlarından biri. TV Kulesi, Dünya Saati ve çeşitli alışveriş merkezleri ile şehrin önemli buluşma noktalarından biridir.' },
               { name: 'Charlottenburg Sarayı', category: 'Saray', desc: 'Berlin\'in en büyük sarayı ve Prusya kraliyet ailesinin eski ikametgahı. Barok ve rokoko tarzında dekore edilmiş odaları ve muhteşem bahçeleri ile ünlüdür.' },
               { name: 'Berlin TV Kulesi', category: 'Kule', desc: 'Alexanderplatz\'ta yer alan 368 metre yüksekliğindeki televizyon kulesi. Berlin\'in panoramik manzarasını sunan gözlem terası ve döner restoran ile ünlüdür.' },
               { name: 'Kreuzberg', category: 'Mahalle', desc: 'Berlin\'in alternatif kültür merkezi ve Küçük İstanbul olarak bilinen bölge. Türk nüfusunun yoğun olduğu bu bölge, gece kulüpleri, sanat galerileri ve çok kültürlü atmosferi ile ünlüdür.' },
               { name: 'Hackescher Markt', category: 'Alışveriş Bölgesi', desc: 'Berlin\'in en canlı alışveriş ve eğlence bölgelerinden biri. Butik mağazalar, kafeler, restoranlar ve gece hayatı ile popüler bir destinasyon.' },
               { name: 'Gendarmenmarkt', category: 'Meydan', desc: 'Berlin\'in en güzel meydanlarından biri. Fransız ve Alman katedralleri ile Konser Salonu\'nun çevrelediği bu meydan, klasik mimarinin harikası.' },
               { name: 'Unter den Linden', category: 'Cadde', desc: 'Berlin\'in en ünlü caddesi. Brandenburg Kapısı\'ndan başlayarak şehir merkezine uzanan bu tarihi cadde, önemli binaları ve anıtları ile ünlüdür.' },
               { name: 'Pergamon Müzesi', category: 'Müze', desc: 'Antik mimari eserlerin sergilendiği dünyaca ünlü müze. Pergamon Sunağı, İshtar Kapısı ve Roma Pazarı Kapısı gibi muhteşem eserler barındırır.' },
               { name: 'Topography of Terror', category: 'Müze', desc: 'Nazi döneminin korkunç tarihini anlatan açık hava müzesi. SS ve Gestapo merkezinin bulunduğu yerde kurulmuş olan müze, tarihin karanlık sayfalarını sergiler.' },
               { name: 'Spree Nehri', category: 'Doğal Güzellik', desc: 'Berlin\'i geçen nehir. Tekne turları, nehir kıyısında yürüyüş ve çeşitli su sporları için ideal. Şehrin farklı açılardan görülmesini sağlar.' },
               { name: 'Friedrichshain', category: 'Mahalle', desc: 'Genç ve dinamik atmosferi ile ünlü bölge. East Side Gallery, RAW Gelände ve çok sayıda bar, kulüp ile Berlin\'in alternatif yaşamının merkezi.' },
               { name: 'Prenzlauer Berg', category: 'Mahalle', desc: 'Bohemyen atmosferi ve restore edilmiş tarihi binaları ile ünlü bölge. Kafeler, butik mağazalar ve sanat galerileri ile Berlin\'in en şık semtlerinden biri.' },
               { name: 'Bernauer Strasse', category: 'Tarihi Yer', desc: 'Berlin Duvarı Anıtı\'nın bulunduğu sokak. Duvarın kalıntıları ve açık hava sergisi ile Soğuk Savaş döneminin acı hatıralarını yaşatır.' },
               { name: 'Badeschiff', category: 'Eğlence', desc: 'Spree Nehri üzerinde inşa edilmiş devasa bir yüzme havuzu. Sıcak yaz günlerinde doyasıya eğlenmek ve serinlemek için gidebileceğiniz en popüler yerlerden biri.' },
               { name: 'Tempelhof Parkı', category: 'Park', desc: 'Eski havaalanının dönüştürüldüğü büyük park. Bisiklet sürme, piknik yapma ve açık hava etkinlikleri için ideal. Berlin\'in en büyük yeşil alanlarından biri.' },
               { name: 'Kulturforum', category: 'Kültür Merkezi', desc: 'Modern sanat müzeleri ve konser salonlarının bulunduğu kültür kompleksi. Neue Nationalgalerie, Philharmonie ve diğer sanat kurumları burada yer alır.' },
               { name: 'Nikolaiviertel', category: 'Tarihi Mahalle', desc: 'Berlin\'in en eski mahallesi. Ortaçağ mimarisi ve dar sokakları ile şehrin tarihi atmosferini yaşatır. Restoranlar ve butik mağazalar ile popüler.' },
               { name: 'Mitte', category: 'Mahalle', desc: 'Berlin\'in merkezi mahallesi. Tarihi binalar, modern ofisler, müzeler ve alışveriş merkezleri ile şehrin kalbi. Unter den Linden ve Museum Island burada yer alır.' },
               { name: 'Neukölln', category: 'Mahalle', desc: 'Çok kültürlü atmosferi ile ünlü bölge. Türk, Arap ve diğer göçmen toplulukların yaşadığı bu mahalle, alternatif sanat sahnesi ve gece hayatı ile ünlü.' },
               { name: 'Schöneberg', category: 'Mahalle', desc: 'Queer kültürünün merkezi olan bölge. Nollendorfplatz çevresinde LGBT+ dostu mekanlar, barlar ve restoranlar bulunur. Berlin\'in en renkli mahallelerinden biri.' },
               { name: 'Moabit', category: 'Mahalle', desc: 'Spree Nehri kıyısında yer alan mahalle. Tiergarten\'a yakın konumu ve huzurlu atmosferi ile aileler için ideal. Parklar ve yeşil alanlar açısından zengin.' },
               { name: 'Wedding', category: 'Mahalle', desc: 'Berlin\'in kuzeyinde yer alan çok kültürlü mahalle. Göçmen nüfusun yoğun olduğu bu bölge, uygun fiyatlı restoranlar ve canlı sokak yaşamı ile ünlü.' },
               { name: 'Lichtenberg', category: 'Mahalle', desc: 'Doğu Berlin\'in eski endüstri bölgesi. Günümüzde yenilenme sürecinde olan bu mahalle, alternatif sanat mekanları ve yaratıcı endüstriler ile ünlü.' },
               { name: 'Marzahn', category: 'Mahalle', desc: 'Plattenbau binalarının yoğun olduğu mahalle. Doğu Almanya döneminden kalma bu bölge, günümüzde yenilenme sürecinde ve yeşil alanları ile ünlü.' },
               { name: 'Hellersdorf', category: 'Mahalle', desc: 'Berlin\'in en doğusundaki mahalle. Geniş parklar, göller ve doğal alanları ile şehrin en yeşil bölgelerinden biri. Aileler için ideal bir yaşam alanı.' },
               { name: 'Spandau', category: 'Mahalle', desc: 'Berlin\'in batısında yer alan tarihi mahalle. Ortaçağ kalesi, eski şehir merkezi ve Havel Nehri kıyısındaki konumu ile turistik açıdan değerli.' },
               { name: 'Steglitz', category: 'Mahalle', desc: 'Berlin\'in güneybatısında yer alan üst orta sınıf mahalle. Schlossstraße alışveriş caddesi, yeşil alanları ve huzurlu atmosferi ile ünlü.' },
               { name: 'Zehlendorf', category: 'Mahalle', desc: 'Berlin\'in güneybatısında yer alan varlıklı mahalle. Wannsee Gölü, Grunewald Ormanı ve villaları ile şehrin en prestijli bölgelerinden biri.' },
               { name: 'Schönefeld', category: 'Mahalle', desc: 'Berlin Brandenburg Havalimanı\'na yakın konumu ile ünlü. Eski Doğu Almanya döneminden kalma bu bölge, günümüzde havalimanı çalışanlarının yaşadığı yer.' },
               { name: 'Treptow', category: 'Mahalle', desc: 'Spree Nehri kıyısında yer alan mahalle. Treptower Park, Sovyet Anıtı ve nehir manzarası ile ünlü. Doğa severler için ideal bir bölge.' },
               { name: 'Köpenick', category: 'Mahalle', desc: 'Berlin\'in güneydoğusunda yer alan tarihi mahalle. Köpenick Kalesi, eski şehir merkezi ve Müggelsee Gölü ile ünlü. Doğa ve tarih bir arada.' },
               { name: 'Pankow', category: 'Mahalle', desc: 'Berlin\'in kuzeydoğusunda yer alan mahalle. Prenzlauer Berg\'i de içeren bu bölge, bohemyen atmosferi ve alternatif kültürü ile ünlü.' },
               { name: 'Reinickendorf', category: 'Mahalle', desc: 'Berlin\'in kuzeyinde yer alan mahalle. Tegel Gölü, Tegel Ormanı ve doğal alanları ile ünlü. Şehrin en yeşil bölgelerinden biri.' }
             ],
             'paris': [
               { name: 'Eyfel Kulesi', category: 'Anıt', desc: 'Paris\'in simgesi olan 324 metre yüksekliğindeki demir kule. 1889 yılında inşa edilen bu muhteşem yapı, şehrin her yerinden görülebilir ve gece ışıklandırması büyüleyicidir.' },
               { name: 'Louvre Müzesi', category: 'Müze', desc: 'Dünyanın en büyük sanat müzesi. Mona Lisa, Venüs de Milo gibi ünlü eserleri barındırır. Eski kraliyet sarayında kurulmuş olan müze, sanat severlerin cenneti.' },
               { name: 'Notre-Dame Katedrali', category: 'Dini Yapı', desc: 'Gotik mimarinin en güzel örneklerinden biri olan katedral. Victor Hugo\'nun romanıyla ünlenen bu yapı, Paris\'in kalbinde Seine Nehri üzerindeki adada yer alır.' },
               { name: 'Champs-Élysées', category: 'Cadde', desc: 'Dünyanın en ünlü caddelerinden biri. Lüks mağazalar, kafeler ve restoranlarla dolu olan bu cadde, Arc de Triomphe\'a kadar uzanır.' },
               { name: 'Sacré-Cœur Bazilikası', category: 'Dini Yapı', desc: 'Montmartre tepesinde yer alan beyaz bazilika. Paris\'in panoramik manzarasını sunan bu yapı, hem mimari güzelliği hem de konumuyla büyüler.' },
               { name: 'Seine Nehri', category: 'Doğal Güzellik', desc: 'Paris\'i ikiye bölen tarihi nehir. Nehir kıyısında yürüyüş yapmak, tekne turları ve köprülerin altından geçmek unutulmaz deneyimler sunar.' },
               { name: 'Versay Sarayı', category: 'Saray', desc: 'Fransız kraliyet ailesinin görkemli sarayı. Altın kaplı odaları, ayna salonu ve muhteşem bahçeleriyle Barok mimarinin en güzel örneği.' },
               { name: 'Montmartre', category: 'Mahalle', desc: 'Sanatçılar mahallesi olarak ünlü bölge. Sokak sanatçıları, kabareler ve bohemyen atmosferiyle Paris\'in en romantik köşelerinden biri.' },
               { name: 'Arc de Triomphe', category: 'Anıt', desc: 'Champs-Élysées\'in sonunda yer alan zafer takı. Napolyon\'un zaferlerini anmak için inşa edilen bu anıt, Paris\'in en önemli simgelerinden biri.' },
               { name: 'Musée d\'Orsay', category: 'Müze', desc: 'Eski tren istasyonunda kurulmuş sanat müzesi. İzlenimci sanatın en önemli eserlerini barındırır. Van Gogh, Monet ve diğer ünlü sanatçıların eserleri sergilenir.' },
               { name: 'Centre Pompidou', category: 'Müze', desc: 'Modern sanat müzesi. Dış cephesindeki renkli borular ve merdivenlerle ünlü bu yapı, çağdaş sanatın merkezi.' },
               { name: 'Luxembourg Bahçeleri', category: 'Park', desc: 'Senatörlük sarayının bahçeleri. Çiçek tarhları, heykeller ve gölü ile Paris\'in en güzel parklarından biri.' },
               { name: 'Palais Garnier', category: 'Opera Binası', desc: 'Görkemli opera binası. Barok mimarisi, altın kaplı dekorasyonu ve muhteşem akustiği ile ünlü.' },
               { name: 'Place de la Concorde', category: 'Meydan', desc: 'Paris\'in en büyük meydanı. Mısır\'dan getirilen Obelisk ve çeşmeleri ile ünlü.' },
               { name: 'Tuileries Bahçeleri', desc: 'Louvre ile Place de la Concorde arasında uzanan tarihi bahçeler. Heykeller, çiçek tarhları ve havuzları ile ünlü.' },
               { name: 'Sainte-Chapelle', category: 'Dini Yapı', desc: 'Gotik mimarinin harikası. Vitray camları ile ünlü bu şapel, Ortaçağ sanatının en güzel örneklerinden biri.' },
               { name: 'Panthéon', category: 'Anıt', desc: 'Fransız büyüklerinin gömüldüğü anıt mezar. Neoklasik mimarisi ve Foucault sarkacı ile ünlü.' },
               { name: 'Cimetière du Père-Lachaise', category: 'Mezarlık', desc: 'Dünyanın en ünlü mezarlığı. Jim Morrison, Oscar Wilde ve Edith Piaf gibi ünlülerin gömüldüğü yer.' },
               { name: 'Marais', category: 'Mahalle', desc: 'Tarihi mahalle. Rönesans sarayları, butik mağazalar ve LGBT+ dostu mekanları ile ünlü.' },
               { name: 'Latin Quarter', category: 'Mahalle', desc: 'Üniversite mahallesi. Sorbonne, kitapçılar ve öğrenci barları ile ünlü.' },
               { name: 'Le Marais', category: 'Mahalle', desc: 'Tarihi mahalle. Rönesans sarayları, butik mağazalar ve LGBT+ dostu mekanları ile ünlü.' },
               { name: 'Bastille', category: 'Meydan', desc: 'Fransız Devrimi\'nin başladığı yer. Opera Bastille ve modern anıtı ile ünlü.' },
               { name: 'Place des Vosges', category: 'Meydan', desc: 'Paris\'in en eski meydanı. Kare şeklindeki tasarımı ve tarihi binaları ile ünlü.' },
               { name: 'Canal Saint-Martin', category: 'Kanal', desc: 'Romantik kanal. Tekne turları, köprüler ve kafeler ile ünlü.' },
               { name: 'Parc des Buttes-Chaumont', category: 'Park', desc: 'Doğal park. Gölü, mağaraları ve muhteşem manzarası ile ünlü.' },
               { name: 'Cité des Sciences', category: 'Müze', desc: 'Bilim müzesi. İnteraktif sergiler ve planetarium ile ünlü.' },
               { name: 'Palais de Tokyo', category: 'Müze', desc: 'Modern sanat müzesi. Çağdaş sanatın en önemli eserlerini sergiler.' },
               { name: 'Fondation Louis Vuitton', category: 'Müze', desc: 'Modern sanat müzesi. Frank Gehry tarafından tasarlanan mimarisi ile ünlü.' },
               { name: 'Musée Rodin', category: 'Müze', desc: 'Heykel müzesi. Düşünen Adam ve diğer Rodin eserleri sergilenir.' },
               { name: 'Musée Picasso', category: 'Müze', desc: 'Picasso müzesi. Sanatçının en önemli eserlerini barındırır.' },
               { name: 'Musée de l\'Orangerie', category: 'Müze', desc: 'İzlenimci sanat müzesi. Monet\'nin Nymphéas serisi ile ünlü.' },
               { name: 'Musée Marmottan Monet', category: 'Müze', desc: 'Monet müzesi. Sanatçının en büyük koleksiyonunu barındırır.' },
               { name: 'Musée Jacquemart-André', category: 'Müze', desc: 'Özel koleksiyon müzesi. Rönesans sanatı ve dekoratif sanatlar sergilenir.' },
               { name: 'Musée Nissim de Camondo', category: 'Müze', desc: '18. yüzyıl dekoratif sanatları müzesi. Tarihi ev atmosferinde sergiler.' },
               { name: 'Musée des Arts Décoratifs', category: 'Müze', desc: 'Dekoratif sanatlar müzesi. Mobilya, tekstil ve tasarım eserleri sergilenir.' },
               { name: 'Musée des Arts et Métiers', category: 'Müze', desc: 'Bilim ve teknoloji müzesi. Eski makineler ve bilimsel aletler sergilenir.' },
               { name: 'Musée de l\'Armée', category: 'Müze', desc: 'Askeri müze. Napolyon\'un mezarı ve askeri tarih sergileri.' },
               { name: 'Musée de la Marine', category: 'Müze', desc: 'Denizcilik müzesi. Gemi modelleri ve denizcilik tarihi sergileri.' },
               { name: 'Musée de l\'Homme', category: 'Müze', desc: 'İnsanlık müzesi. Antropoloji ve etnoloji sergileri.' },
               { name: 'Musée du Quai Branly', category: 'Müze', desc: 'Etnoloji müzesi. Afrika, Asya ve Okyanusya sanatları sergilenir.' },
               { name: 'Musée Guimet', category: 'Müze', desc: 'Asya sanatları müzesi. Çin, Japonya ve Hindistan sanatları sergilenir.' },
               { name: 'Musée Cernuschi', category: 'Müze', desc: 'Asya sanatları müzesi. Çin sanatının özel koleksiyonu.' },
               { name: 'Musée d\'Art Moderne de Paris', category: 'Müze', desc: 'Modern sanat müzesi. 20. yüzyıl sanatının önemli eserleri.' },
               { name: 'Musée d\'Art et d\'Histoire du Judaïsme', category: 'Müze', desc: 'Yahudi tarihi ve kültürü müzesi. Dini eserler ve tarihi belgeler.' },
               { name: 'Musée de la Chasse et de la Nature', category: 'Müze', desc: 'Avcılık ve doğa müzesi. Hayvan doldurmaları ve sanat eserleri.' },
               { name: 'Musée de la Poupée', category: 'Müze', desc: 'Bebek müzesi. Antika bebekler ve oyuncaklar sergilenir.' },
               { name: 'Musée de la Magie', category: 'Müze', desc: 'Sihir müzesi. Sihirbazlık tarihi ve aletleri sergilenir.' },
               { name: 'Musée des Égouts de Paris', category: 'Müze', desc: 'Kanalizasyon müzesi. Paris\'in yeraltı dünyasını keşfedin.' },
               { name: 'Musée des Plans-Reliefs', category: 'Müze', desc: 'Harita müzesi. Tarihi şehir planları ve 3D modeller.' },
               { name: 'Musée de la Poste', category: 'Müze', desc: 'Posta müzesi. Posta tarihi ve pul koleksiyonları.' },
               { name: 'Musée de la Monnaie de Paris', category: 'Müze', desc: 'Para müzesi. Para basma tarihi ve madeni para koleksiyonları.' },
               { name: 'Musée de la Préfecture de Police', category: 'Müze', desc: 'Polis müzesi. Paris polisinin tarihi ve suç tarihi.' },
               { name: 'Musée de la Résistance', category: 'Müze', desc: 'Direniş müzesi. İkinci Dünya Savaşı direniş hareketi.' },
               { name: 'Musée de la Libération', category: 'Müze', desc: 'Kurtuluş müzesi. Paris\'in Nazi işgalinden kurtuluşu.' },
               { name: 'Musée de la Grande Guerre', category: 'Müze', desc: 'Büyük Savaş müzesi. Birinci Dünya Savaşı tarihi.' },
               { name: 'Musée de l\'Air et de l\'Espace', category: 'Müze', desc: 'Havacılık müzesi. Uçaklar ve uzay araçları sergilenir.' },
               { name: 'Musée de l\'Armée', category: 'Müze', desc: 'Askeri müze. Napolyon\'un mezarı ve askeri tarih sergileri.' },
               { name: 'Musée de la Marine', category: 'Müze', desc: 'Denizcilik müzesi. Gemi modelleri ve denizcilik tarihi sergileri.' },
               { name: 'Musée de l\'Homme', category: 'Müze', desc: 'İnsanlık müzesi. Antropoloji ve etnoloji sergileri.' },
               { name: 'Musée du Quai Branly', category: 'Müze', desc: 'Etnoloji müzesi. Afrika, Asya ve Okyanusya sanatları sergilenir.' },
               { name: 'Musée Guimet', category: 'Müze', desc: 'Asya sanatları müzesi. Çin, Japonya ve Hindistan sanatları sergilenir.' },
               { name: 'Musée Cernuschi', category: 'Müze', desc: 'Asya sanatları müzesi. Çin sanatının özel koleksiyonu.' },
               { name: 'Musée d\'Art Moderne de Paris', category: 'Müze', desc: 'Modern sanat müzesi. 20. yüzyıl sanatının önemli eserleri.' },
               { name: 'Musée d\'Art et d\'Histoire du Judaïsme', category: 'Müze', desc: 'Yahudi tarihi ve kültürü müzesi. Dini eserler ve tarihi belgeler.' },
               { name: 'Musée de la Chasse et de la Nature', category: 'Müze', desc: 'Avcılık ve doğa müzesi. Hayvan doldurmaları ve sanat eserleri.' },
               { name: 'Musée de la Poupée', category: 'Müze', desc: 'Bebek müzesi. Antika bebekler ve oyuncaklar sergilenir.' },
               { name: 'Musée de la Magie', category: 'Müze', desc: 'Sihir müzesi. Sihirbazlık tarihi ve aletleri sergilenir.' },
               { name: 'Musée des Égouts de Paris', category: 'Müze', desc: 'Kanalizasyon müzesi. Paris\'in yeraltı dünyasını keşfedin.' },
               { name: 'Musée des Plans-Reliefs', category: 'Müze', desc: 'Harita müzesi. Tarihi şehir planları ve 3D modeller.' },
               { name: 'Musée de la Poste', category: 'Müze', desc: 'Posta müzesi. Posta tarihi ve pul koleksiyonları.' },
               { name: 'Musée de la Monnaie de Paris', category: 'Müze', desc: 'Para müzesi. Para basma tarihi ve madeni para koleksiyonları.' },
               { name: 'Musée de la Préfecture de Police', category: 'Müze', desc: 'Polis müzesi. Paris polisinin tarihi ve suç tarihi.' },
               { name: 'Musée de la Résistance', category: 'Müze', desc: 'Direniş müzesi. İkinci Dünya Savaşı direniş hareketi.' },
               { name: 'Musée de la Libération', category: 'Müze', desc: 'Kurtuluş müzesi. Paris\'in Nazi işgalinden kurtuluşu.' },
               { name: 'Musée de la Grande Guerre', category: 'Müze', desc: 'Büyük Savaş müzesi. Birinci Dünya Savaşı tarihi.' },
               { name: 'Musée de l\'Air et de l\'Espace', category: 'Müze', desc: 'Havacılık müzesi. Uçaklar ve uzay araçları sergilenir.' }
             ],
             'london': [
               { name: 'Big Ben', category: 'Saat Kulesi', desc: 'Londra\'nın simgesi olan ünlü saat kulesi. Westminster Sarayı\'nın bir parçası olan bu gotik yapı, Thames Nehri kıyısında yer alır.' },
               { name: 'Buckingham Sarayı', category: 'Saray', desc: 'İngiliz kraliyet ailesinin resmi ikametgahı. Nöbet değişimi töreni ve görkemli mimarisiyle ziyaretçilerin ilgisini çeker.' },
               { name: 'Tower Bridge', category: 'Köprü', desc: 'Londra\'nın en ünlü köprüsü. Viktoryen döneminin mühendislik harikası olan bu açılır köprü, Thames Nehri üzerinde yer alır.' },
               { name: 'British Museum', category: 'Müze', desc: 'Dünyanın en eski ve en kapsamlı müzelerinden biri. Rosetta Taşı, Mısır mumyaları ve antik Yunan heykelleri gibi paha biçilmez eserler barındırır.' },
               { name: 'London Eye', category: 'Dönme Dolap', desc: '135 metre yüksekliğindeki dev dönme dolap. Thames Nehri kıyısında yer alan bu modern yapı, Londra\'nın 360 derece panoramik manzarasını sunar.' },
               { name: 'Hyde Park', category: 'Park', desc: 'Londra\'nın en büyük parklarından biri. Serpentine Gölü, Speaker\'s Corner ve Diana Anısı ile ünlü olan park, şehrin yeşil ciğeri.' },
               { name: 'Westminster Abbey', category: 'Dini Yapı', desc: 'İngiliz krallarının taç giyme törenleri ve düğünlerinin yapıldığı tarihi manastır. Gotik mimarinin muhteşem örneği.' },
               { name: 'Tate Modern', category: 'Müze', desc: 'Modern sanatın en önemli eserlerini barındıran müze. Eski bir elektrik santralinde kurulmuş olan müze, Thames Nehri kıyısında yer alır.' }
             ],
             'rome': [
               { name: 'Kolezyum', category: 'Antik Yapı', desc: 'Roma İmparatorluğu\'nun en büyük amfitiyatrosu. Gladyatör dövüşlerinin yapıldığı bu tarihi yapı, antik dünyanın mühendislik harikası.' },
               { name: 'Vatikan Müzeleri', category: 'Müze', desc: 'Dünyanın en zengin sanat koleksiyonlarından birine sahip müze kompleksi. Sistine Şapeli ve Michelangelo\'nun freskleri burada yer alır.' },
               { name: 'Trevi Çeşmesi', category: 'Çeşme', desc: 'Roma\'nın en ünlü çeşmesi. Barok tarzında inşa edilen bu muhteşem çeşmeye bozuk para atmak şans getirdiğine inanılır.' },
               { name: 'Pantheon', category: 'Antik Yapı', desc: 'Roma\'nın en iyi korunmuş antik yapısı. M.S. 126 yılında inşa edilen bu tapınak, kubbeli mimarinin en erken örneklerinden biri.' },
               { name: 'Forum Romanum', category: 'Antik Alan', desc: 'Antik Roma\'nın siyasi, ticari ve sosyal merkezi. Tapınaklar, bazilika ve kemerlerin kalıntıları Roma İmparatorluğu\'nun ihtişamını gözler önüne serer.' },
               { name: 'İspanyol Merdivenleri', category: 'Meydan', desc: '135 basamaklı ünlü merdivenler. Trinità dei Monti kilisesine çıkan bu merdivenler, Roma\'nın en popüler buluşma noktalarından biri.' },
               { name: 'Castel Sant\'Angelo', category: 'Kale', desc: 'Tiber Nehri kıyısında yer alan silindirik kale. Başlangıçta Hadrian\'ın mezarı olarak inşa edilen yapı, daha sonra papa kalesi olarak kullanıldı.' },
               { name: 'Villa Borghese', category: 'Park', desc: 'Roma\'nın en büyük parkı. İçinde Borghese Galerisi, hayvanat bahçesi ve göl bulunan bu park, şehrin yeşil oazı.' }
             ],
             'tokyo': [
               { name: 'Tokyo Skytree', category: 'Kule', desc: '634 metre yüksekliğindeki televizyon kulesi. Tokyo\'nun modern simgesi olan bu yapı, şehrin panoramik manzarasını sunar.' },
               { name: 'Senso-ji Tapınağı', category: 'Tapınak', desc: 'Tokyo\'nun en eski Budist tapınağı. Asakusa bölgesinde yer alan bu tapınak, geleneksel Japon mimarisinin güzel bir örneği.' },
               { name: 'Shibuya Geçidi', category: 'Kavşak', desc: 'Dünyanın en kalabalık yaya geçidi. Her gün milyonlarca insanın geçtiği bu kavşak, modern Tokyo\'nun sembolü.' },
               { name: 'Meiji Tapınağı', category: 'Tapınak', desc: 'İmparator Meiji ve İmparatoriçe Shoken\'in anısına inşa edilen Shinto tapınağı. Şehrin ortasında yer alan huzurlu bir oaz.' },
               { name: 'Tsukiji Balık Pazarı', category: 'Pazar', desc: 'Dünyanın en büyük balık pazarı. Taze sushi ve sashimi için en iyi adres olan bu pazar, Japon mutfak kültürünün kalbi.' },
               { name: 'İmparatorluk Sarayı', category: 'Saray', desc: 'Japon İmparatoru\'nun ikametgahı. Geleneksel Japon bahçeleri ve tarihi yapılarıyla çevrili olan saray, Tokyo\'nun merkezinde yer alır.' },
               { name: 'Harajuku', category: 'Mahalle', desc: 'Gençlik kültürü ve modanın merkezi. Renkli kostümler, manga kültürü ve alternatif moda trendlerinin buluşma noktası.' },
               { name: 'Ueno Parkı', category: 'Park', desc: 'Tokyo\'nun kültür merkezi. İçinde müzeler, hayvanat bahçesi ve bahar aylarında kiraz çiçekleri bulunan bu park, şehrin kültürel kalbi.' }
             ],
             'istanbul': [
               { name: 'Ayasofya', category: 'Tarihi Yapı', desc: 'Bizans ve Osmanlı mimarisinin muhteşem sentezi. 1500 yıllık bu yapı, İstanbul\'un en önemli simgelerinden biri.' },
               { name: 'Sultanahmet Camii', category: 'Cami', desc: 'Altı minaresi ile ünlü Mavi Cami. İçindeki mavi çiniler ve görkemli mimarisi ile Osmanlı sanatının en güzel örneği.' },
               { name: 'Topkapı Sarayı', category: 'Saray', desc: 'Osmanlı padişahlarının 400 yıl boyunca yaşadığı saray. Hazine dairesi, harem ve muhteşem Boğaz manzarası ile ünlü.' },
               { name: 'Kapalıçarşı', category: 'Çarşı', desc: 'Dünyanın en eski kapalı çarşılarından biri. 4000 dükkanı ile halı, mücevher, baharat ve hediyelik eşya alışverişinin merkezi.' },
               { name: 'Galata Kulesi', category: 'Kule', desc: 'Cenevizliler tarafından inşa edilen tarihi kule. İstanbul\'un 360 derece panoramik manzarasını sunan en güzel seyir noktası.' },
               { name: 'Boğaziçi', category: 'Doğal Güzellik', desc: 'Avrupa ve Asya\'yı birleştiren boğaz. Tekne turları, sahil yürüyüşleri ve köprü manzaraları ile İstanbul\'un en güzel yanı.' },
               { name: 'Basilika Sarnıcı', category: 'Tarihi Yapı', desc: 'Bizans döneminden kalma yeraltı sarnıcı. 336 sütunlu bu gizemli yapı, İstanbul\'un yeraltı hazinelerinden biri.' },
               { name: 'Dolmabahçe Sarayı', category: 'Saray', desc: 'Osmanlı\'nın son dönem sarayı. Barok ve neoklasik mimarinin harmanlandığı bu görkemli saray, Boğaz kıyısında yer alır.' },
               { name: 'Sultanahmet Meydanı', category: 'Meydan', desc: 'İstanbul\'un kalbi. Ayasofya, Sultanahmet Camii ve Hipodrom kalıntıları ile çevrili tarihi meydan.' },
               { name: 'Yerebatan Sarnıcı', category: 'Tarihi Yapı', desc: 'Bizans döneminden kalma yeraltı sarnıcı. 336 sütunlu bu gizemli yapı, İstanbul\'un yeraltı hazinelerinden biri.' },
               { name: 'Ortaköy Camii', category: 'Cami', desc: 'Boğaz kıyısında yer alan zarif cami. Boğaziçi Köprüsü manzarası ile ünlü.' },
               { name: 'Süleymaniye Camii', category: 'Cami', desc: 'Mimar Sinan\'ın başyapıtı. İstanbul\'un en büyük camilerinden biri.' },
               { name: 'Rumeli Hisarı', category: 'Kale', desc: 'Fatih Sultan Mehmet tarafından inşa edilen tarihi kale. Boğaz\'ın en güzel noktalarından biri.' },
               { name: 'Anadolu Hisarı', category: 'Kale', desc: 'Osmanlı\'nın İstanbul\'u fethetmeden önce inşa ettiği kale. Boğaz manzarası ile ünlü.' },
               { name: 'Beylerbeyi Sarayı', category: 'Saray', desc: 'Boğaz kıyısında yer alan görkemli saray. Osmanlı mimarisinin en güzel örneklerinden biri.' },
               { name: 'Çırağan Sarayı', category: 'Saray', desc: 'Boğaz kıyısında yer alan lüks otel. Tarihi saray yapısı ve modern konforu birleştirir.' },
               { name: 'Kız Kulesi', category: 'Kule', desc: 'Boğaz\'ın ortasında yer alan efsanevi kule. Romantik atmosferi ile ünlü.' },
               { name: 'Taksim Meydanı', category: 'Meydan', desc: 'İstanbul\'un modern kalbi. İstiklal Caddesi\'nin başlangıç noktası.' },
               { name: 'İstiklal Caddesi', category: 'Cadde', desc: 'İstanbul\'un en ünlü alışveriş ve eğlence caddesi. Nostaljik tramvayı ile ünlü.' },
               { name: 'Pera Müzesi', category: 'Müze', desc: 'Beyoğlu\'nda yer alan modern sanat müzesi. Kültür ve sanat etkinliklerinin merkezi.' },
               { name: 'Sakıp Sabancı Müzesi', category: 'Müze', desc: 'Boğaz kıyısında yer alan özel müze. Osmanlı ve çağdaş sanat koleksiyonları.' },
               { name: 'İstanbul Modern', category: 'Müze', desc: 'Modern sanat müzesi. Çağdaş Türk sanatının en önemli eserlerini sergiler.' },
               { name: 'Rahmi Koç Müzesi', category: 'Müze', desc: 'Endüstri ve teknoloji müzesi. Tarihi araçlar ve makineler sergilenir.' },
               { name: 'Miniatürk', category: 'Müze', desc: 'Türkiye\'nin minyatür parkı. Ülkenin önemli yapılarının küçük kopyaları.' },
               { name: 'Belgrad Ormanı', category: 'Park', desc: 'İstanbul\'un en büyük yeşil alanı. Yürüyüş ve piknik için ideal.' },
               { name: 'Gülhane Parkı', category: 'Park', desc: 'Topkapı Sarayı\'nın bahçesi. Tarihi atmosferi ve güzel manzarası ile ünlü.' },
               { name: 'Emirgan Korusu', category: 'Park', desc: 'Boğaz kıyısında yer alan koru. Lale bahçeleri ve piknik alanları ile ünlü.' },
               { name: 'Bebek Sahili', category: 'Sahil', desc: 'Boğaz\'ın en güzel sahil şeridi. Kafeler ve restoranlar ile ünlü.' },
               { name: 'Arnavutköy', category: 'Mahalle', desc: 'Boğaz kıyısında yer alan tarihi mahalle. Balık restoranları ile ünlü.' },
               { name: 'Karaköy', category: 'Mahalle', desc: 'Tarihi liman mahallesi. Galata Köprüsü ve balıkçı tekneleri ile ünlü.' },
               { name: 'Balat', category: 'Mahalle', desc: 'Tarihi mahalle. Renkli evleri ve otantik atmosferi ile ünlü.' },
               { name: 'Fener', category: 'Mahalle', desc: 'Rum Ortodoks Patrikhanesi\'nin bulunduğu tarihi mahalle.' },
               { name: 'Kadıköy', category: 'Mahalle', desc: 'Anadolu yakasının merkezi. Moda sahili ve canlı atmosferi ile ünlü.' },
               { name: 'Üsküdar', category: 'Mahalle', desc: 'Anadolu yakasının tarihi merkezi. Mimar Sinan\'ın eserleri ile ünlü.' },
               { name: 'Beşiktaş', category: 'Mahalle', desc: 'Boğaz kıyısında yer alan mahalle. Barbaros Anıtı ve sahili ile ünlü.' },
               { name: 'Şişli', category: 'Mahalle', desc: 'Modern İstanbul\'un merkezi. Alışveriş merkezleri ve iş merkezleri ile ünlü.' },
               { name: 'Bakırköy', category: 'Mahalle', desc: 'Marmara Denizi kıyısında yer alan mahalle. Sahili ve parkları ile ünlü.' }
             ],
             'ankara': [
               { name: 'Anıtkabir', category: 'Anıt', desc: 'Mustafa Kemal Atatürk\'ün anıt mezarı. Türkiye\'nin en önemli simgelerinden biri.' },
               { name: 'Kızılay Meydanı', category: 'Meydan', desc: 'Ankara\'nın merkezi. Alışveriş ve ulaşım merkezi.' },
               { name: 'Ulus Meydanı', category: 'Meydan', desc: 'Tarihi Ankara\'nın merkezi. Kurtuluş Savaşı\'nın yönetildiği yer.' },
               { name: 'Ankara Kalesi', category: 'Kale', desc: 'Roma döneminden kalma tarihi kale. Ankara\'nın en eski yapısı.' },
               { name: 'Hacı Bayram-ı Veli Camii', category: 'Cami', desc: 'Ankara\'nın en önemli dini yapısı. Hacı Bayram-ı Veli\'nin türbesi.' },
               { name: 'Anadolu Medeniyetleri Müzesi', category: 'Müze', desc: 'Dünyanın en önemli arkeoloji müzelerinden biri.' },
               { name: 'Etnografya Müzesi', category: 'Müze', desc: 'Türk kültürü ve etnografyası müzesi.' },
               { name: 'Atakule', category: 'Kule', desc: 'Ankara\'nın simgesi olan televizyon kulesi.' },
               { name: 'Gençlik Parkı', category: 'Park', desc: 'Ankara\'nın en büyük parkı. Lunapark ve gölü ile ünlü.' },
               { name: 'Kuğulu Park', category: 'Park', desc: 'Kuğuları ile ünlü park. Ankara\'nın en güzel parklarından biri.' }
             ],
             'izmir': [
               { name: 'Kemeraltı Çarşısı', category: 'Çarşı', desc: 'İzmir\'in tarihi çarşısı. Geleneksel alışveriş merkezi.' },
               { name: 'Konak Meydanı', category: 'Meydan', desc: 'İzmir\'in kalbi. Saat Kulesi ile ünlü.' },
               { name: 'Saat Kulesi', category: 'Anıt', desc: 'İzmir\'in simgesi olan tarihi saat kulesi.' },
               { name: 'Kadifekale', category: 'Kale', desc: 'İzmir\'in yüksek tepesinde yer alan tarihi kale.' },
               { name: 'Alsancak', category: 'Mahalle', desc: 'İzmir\'in modern mahallesi. Kordon boyu ile ünlü.' },
               { name: 'Kordon', category: 'Sahil', desc: 'İzmir\'in en güzel sahil şeridi. Yürüyüş ve dinlenme yeri.' },
               { name: 'Bornova', category: 'Mahalle', desc: 'Ege Üniversitesi\'nin bulunduğu mahalle.' },
               { name: 'Çeşme', category: 'Sahil', desc: 'İzmir\'in en güzel plajlarından biri.' },
               { name: 'Alaçatı', category: 'Mahalle', desc: 'Rüzgar sörfü ile ünlü sahil kasabası.' },
               { name: 'Foça', category: 'Sahil', desc: 'Antik İyon kenti. Güzel plajları ile ünlü.' }
             ],
             'antalya': [
               { name: 'Kaleiçi', category: 'Tarihi Mahalle', desc: 'Antalya\'nın tarihi merkezi. Dar sokakları ve tarihi evleri ile ünlü.' },
               { name: 'Yivli Minare', category: 'Cami', desc: 'Antalya\'nın simgesi olan tarihi minare.' },
               { name: 'Hadrian Kapısı', category: 'Tarihi Yapı', desc: 'Roma döneminden kalma zafer takı.' },
               { name: 'Konyaaltı Plajı', category: 'Plaj', desc: 'Antalya\'nın en güzel plajlarından biri.' },
               { name: 'Lara Plajı', category: 'Plaj', desc: 'Uzun kumsalı ile ünlü plaj.' },
               { name: 'Düden Şelalesi', category: 'Doğal Güzellik', desc: 'Antalya\'nın en güzel şelalelerinden biri.' },
               { name: 'Kurşunlu Şelalesi', category: 'Doğal Güzellik', desc: 'Doğal güzelliği ile ünlü şelale.' },
               { name: 'Aspendos Tiyatrosu', category: 'Antik Tiyatro', desc: 'Roma döneminden kalma antik tiyatro.' },
               { name: 'Perge Antik Kenti', category: 'Antik Kent', desc: 'Antik dönemden kalma önemli kent.' },
               { name: 'Side Antik Kenti', category: 'Antik Kent', desc: 'Antik dönemden kalma liman kenti.' }
             ],
             'kapadokya': [
               { name: 'Göreme Açık Hava Müzesi', category: 'Müze', desc: 'UNESCO Dünya Mirası. Kaya kiliseleri ve freskleri ile ünlü.' },
               { name: 'Peribacaları', category: 'Doğal Güzellik', desc: 'Kapadokya\'nın simgesi olan doğal kaya oluşumları.' },
               { name: 'Uçhisar Kalesi', category: 'Kale', desc: 'Kapadokya\'nın en yüksek noktası. Panoramik manzara.' },
               { name: 'Ortahisar Kalesi', category: 'Kale', desc: 'Tarihi kale. Kapadokya manzarası.' },
               { name: 'Ürgüp', category: 'Mahalle', desc: 'Kapadokya\'nın merkezi. Turistik kasaba.' },
               { name: 'Avanos', category: 'Mahalle', desc: 'Çömlekçilik ile ünlü kasaba.' },
               { name: 'Zelve Vadisi', category: 'Doğal Güzellik', desc: 'Tarihi kaya yerleşimleri.' },
               { name: 'Ihlara Vadisi', category: 'Doğal Güzellik', desc: 'Yürüyüş rotası ve kaya kiliseleri.' },
               { name: 'Derinkuyu Yeraltı Şehri', category: 'Tarihi Yapı', desc: 'Antik dönemden kalma yeraltı yerleşimi.' },
               { name: 'Kaymaklı Yeraltı Şehri', category: 'Tarihi Yapı', desc: 'Geniş yeraltı şehri.' }
             ],
             'beijing': [
               { name: 'Yasak Şehir', category: 'Saray', desc: 'Ming ve Qing hanedanlarının 500 yıl boyunca yaşadığı görkemli saray kompleksi. 9999 odası ile dünyanın en büyük saray kompleksi.' },
               { name: 'Çin Seddi', category: 'Tarihi Yapı', desc: 'Dünyanın en uzun yapısı olan Çin Seddi\'nin Beijing yakınlarındaki bölümü. 2000 yıllık bu muhteşem savunma yapısı, uzaydan görülebilen tek yapı.' },
               { name: 'Tiananmen Meydanı', category: 'Meydan', desc: 'Dünyanın en büyük şehir meydanı. Çin\'in siyasi merkezi olan bu meydan, önemli devlet törenlerinin yapıldığı yer.' },
               { name: 'Cennet Tapınağı', category: 'Tapınak', desc: 'Ming ve Qing imparatorlarının cennet için dua ettiği dairesel tapınak. Geleneksel Çin mimarisinin en güzel örneği.' },
               { name: 'Yaz Sarayı', category: 'Saray', desc: 'İmparatorluk ailesinin yaz ikametgahı. Kunming Gölü ve muhteşem bahçeleriyle Çin bahçe sanatının en güzel örneği.' },
               { name: 'Lama Tapınağı', category: 'Tapınak', desc: 'Beijing\'in en önemli Budist tapınağı. Tibet Budizmi\'nin merkezi olan bu tapınak, renkli mimarisi ve huzurlu atmosferiyle ünlü.' },
               { name: 'Hutong Sokakları', category: 'Tarihi Mahalle', desc: 'Geleneksel Beijing yaşamının sürdüğü dar sokaklar. Siheyuan evleri ve yerel yaşam kültürünü deneyimleyebileceğiniz otantik bölge.' },
               { name: 'Beihai Parkı', category: 'Park', desc: 'Beijing\'in en eski imperial parkı. Beyaz Pagoda ve göl manzarası ile şehrin en huzurlu köşelerinden biri.' }
             ],
             'shanghai': [
               { name: 'Bund', category: 'Sahil', desc: 'Shanghai\'ın simgesi olan sahil şeridi. Art Deco binaları ve modern gökdelenler arasındaki kontrast, şehrin geçmişi ve geleceğini yansıtır.' },
               { name: 'Oriental Pearl Tower', category: 'Kule', desc: '468 metre yüksekliğindeki futuristik televizyon kulesi. Shanghai\'ın modern simgesi olan bu kule, şehrin panoramik manzarasını sunar.' },
               { name: 'Yu Garden', category: 'Bahçe', desc: 'Ming hanedanı döneminden kalma geleneksel Çin bahçesi. Pavyonlar, göletler ve kayalar ile Çin bahçe sanatının mükemmel örneği.' },
               { name: 'Nanjing Road', category: 'Alışveriş Caddesi', desc: 'Çin\'in en ünlü alışveriş caddesi. Neon ışıkları, mağazalar ve restoranlarla dolu olan bu cadde, Shanghai\'ın ticari kalbi.' },
               { name: 'Shanghai Tower', category: 'Gökdelen', desc: '632 metre yüksekliğinde Çin\'in en yüksek binası. Spiral tasarımı ve sürdürülebilir mimarisiyle modern mühendisliğin harikası.' },
               { name: 'Tianzifang', category: 'Sanat Mahallesi', desc: 'Geleneksel shikumen evlerinin sanat galerilerine dönüştürüldüğü bohemyen mahalle. Kafeler, butik mağazalar ve sanat atölyeleri.' },
               { name: 'Huangpu Nehri', category: 'Nehir', desc: 'Shanghai\'ı ikiye bölen nehir. Gece tekne turları ile şehrin ışıklı siluetini izlemek unutulmaz bir deneyim.' },
               { name: 'Jing\'an Temple', category: 'Tapınak', desc: 'Shanghai\'ın merkezindeki altın renkli Budist tapınak. Modern gökdelenler arasında yer alan bu tapınak, geçmiş ve gelecek arasında köprü kurar.' }
             ]
           };
           
           // Özel şehir verisi varsa onu kullan
           const cityKey = cityName.toLowerCase();
           if (specialCities[cityKey]) {
             return specialCities[cityKey].map(place => ({
               name: place.name,
               city: cityName || 'Unknown City',
               country: selectedCountry || 'GERMANY',
               category: place.category,
               description: place.desc,
               visited: false,
               createdAt: new Date()
             }));
           }
           
           const commonAttractions = [
             { 
               suffix: 'Merkez', 
               category: 'Şehir Merkezi', 
               desc: `${cityName} şehrinin kalbi ve ana meydanı. Tarihi binalar, cafeler ve restoranlarla çevrili olan bu bölge, şehrin sosyal ve kültürel yaşamının merkezi konumundadır. Yürüyüş yapmak ve yerel atmosferi hissetmek için ideal bir yerdir.` 
             },
             { 
               suffix: 'Müzesi', 
               category: 'Müze', 
               desc: `${cityName} şehrinin yerel tarih ve kültür müzesi. Şehrin geçmişinden günümüze kadar uzanan zengin koleksiyonu ile ziyaretçilere bölgenin tarihini, sanatını ve kültürünü tanıma fırsatı sunar. Interaktif sergiler ve rehberli turlarla unutulmaz bir deneyim yaşayabilirsiniz.` 
             },
             { 
               suffix: 'Katedrali', 
               category: 'Dini Yapı', 
               desc: `${cityName} şehrinin görkemli katedrali. Gotik mimarinin en güzel örneklerinden biri olan bu yapı, yüzyıllardır şehrin simgesi olmuştur. İçerisindeki vitray camlar, heykeller ve tarihi eserler görülmeye değerdir. Sessiz bir atmosferde ibadet edebilir veya mimariyi inceleyebilirsiniz.` 
             },
             { 
               suffix: 'Kalesi', 
               category: 'Tarihi Yapı', 
               desc: `${cityName} şehrinin tarihi kalesi ve surları. Ortaçağ döneminden kalma bu muhteşem yapı, şehrin savunma tarihini gözler önüne serer. Kale duvarlarından şehrin panoramik manzarasını izleyebilir, tarihi odaları gezebilir ve geçmişe yolculuk yapabilirsiniz.` 
             },
             { 
               suffix: 'Parkı', 
               category: 'Park', 
               desc: `${cityName} şehrinin en büyük ve en güzel parkı. Geniş yeşil alanları, yürüyüş yolları, göletleri ve çocuk oyun alanları ile ailecek vakit geçirmek için mükemmel bir yerdir. Piknik yapabilir, spor aktivitelerine katılabilir veya doğayla iç içe dinlenebilirsiniz.` 
             },
             { 
               suffix: 'Çarşısı', 
               category: 'Alışveriş', 
               desc: `${cityName} şehrinin geleneksel çarşısı ve pazarı. Yerel ürünler, el sanatları, taze gıdalar ve hediyelik eşyalar bulabileceğiniz renkli bir alışveriş deneyimi sunar. Pazarlık yapabilir, yerel lezzetleri tadabilir ve şehrin ticari yaşamını yakından gözlemleyebilirsiniz.` 
             },
             { 
               suffix: 'Köprüsü', 
               category: 'Mimari', 
               desc: `${cityName} şehrinin tarihi köprüsü. Mimari açıdan büyüleyici olan bu köprü, şehrin iki yakasını birleştiren önemli bir ulaşım noktasıdır. Köprü üzerinden nehir manzarasını izleyebilir, fotoğraf çekebilir ve şehrin farklı açılardan görünümünü keşfedebilirsiniz.` 
             },
             { 
               suffix: 'Meydanı', 
               category: 'Meydan', 
               desc: `${cityName} şehrinin ana meydanı ve buluşma noktası. Çevresindeki tarihi binalar, heykeller ve çeşmelerle şehrin en canlı bölgelerinden biridir. Etkinlikler, festivaller ve konserler düzenlenen bu meydan, yerel halkla tanışmak ve şehrin nabzını hissetmek için ideal bir yerdir.` 
             },
             { 
               suffix: 'Sarayı', 
               category: 'Saray', 
               desc: `${cityName} şehrinin muhteşem sarayı. Kraliyet ailelerinin yaşadığı bu görkemli yapı, lüks mobilyaları, değerli sanat eserleri ve büyüleyici bahçeleriyle ziyaretçilerini büyüler. Rehberli turlarla sarayın tarihini öğrenebilir ve aristokrat yaşamını keşfedebilirsiniz.` 
             },
             { 
               suffix: 'Bahçesi', 
               category: 'Bahçe', 
               desc: `${cityName} şehrinin botanik bahçesi. Binlerce farklı bitki türü, egzotik çiçekler ve tematik bölümlerle doğa severlerin cenneti olan bu bahçe, huzurlu bir atmosfer sunar. Sera bölümlerini gezebilir, nadir bitkileri inceleyebilir ve doğanın güzelliğinde kaybolabilirsiniz.` 
             }
           ];
           
           return commonAttractions.map(attraction => ({
             name: `${cityName || 'Unknown City'} ${attraction.suffix}`,
             city: cityName || 'Unknown City',
             country: (selectedCountry || 'GERMANY').toUpperCase(),
             category: attraction.category,
             description: attraction.desc,
             visited: false,
             createdAt: new Date()
           }));
         }

         // Google Maps rota oluşturma fonksiyonu
           function createGoogleMapsRoute() {
            const checkboxes = document.querySelectorAll('.route-checkbox:checked');
            if (checkboxes.length < 2) {
              alert('Rota oluşturmak için en az 2 yer seçmelisiniz!');
              return;
            }
            
            const selectedPlaces = [];
            checkboxes.forEach(checkbox => {
              const name = checkbox.getAttribute('data-name');
              const city = checkbox.getAttribute('data-city');
              const country = checkbox.getAttribute('data-country');
              selectedPlaces.push(`${name}, ${city}, ${country}`);
            });
            
            if (selectedPlaces.length === 0) {
              alert('Seçili yer bulunamadı!');
              return;
            }
            
            // Google Maps Directions URL oluştur
            const origin = encodeURIComponent(selectedPlaces[0]);
            const destination = encodeURIComponent(selectedPlaces[selectedPlaces.length - 1]);
            let waypoints = '';
            
            if (selectedPlaces.length > 2) {
              const middlePoints = selectedPlaces.slice(1, -1);
              waypoints = '&waypoints=' + middlePoints.map(place => encodeURIComponent(place)).join('|');
            }
            
            const googleMapsUrl = `https://www.google.com/maps/dir/?api=1&origin=${origin}&destination=${destination}${waypoints}&travelmode=driving`;
            
            // Yeni sekmede aç
            window.open(googleMapsUrl, '_blank');
          }

        // DOM Cache Sistemi - Performans Optimizasyonu
        const domCache = {
          elements: new Map(),
          
          get(id) {
            if (!this.elements.has(id)) {
              const element = document.getElementById(id);
              if (element) {
                this.elements.set(id, element);
              }
            }
            return this.elements.get(id) || null;
          },
          
          clear() {
            this.elements.clear();
          },
          
          // Çoklu element seçimi için optimize edilmiş fonksiyon
          queryAll(selector) {
            return document.querySelectorAll(selector);
          }
        };

        // Debounce fonksiyonu - API çağrılarını optimize etmek için
        function debounce(func, wait) {
          let timeout;
          return function executedFunction(...args) {
            const later = () => {
              clearTimeout(timeout);
              func(...args);
            };
            clearTimeout(timeout);
            timeout = setTimeout(later, wait);
          };
        }

        // Filtre değişince tabloyu güncelle - Optimize edilmiş versiyon
        document.addEventListener('DOMContentLoaded', () => {
          const countryFilter = domCache.get('countryFilter');
          const visitedFilter = domCache.get('visitedFilter');
          
          if (countryFilter && visitedFilter) {
            // Debounced fonksiyonlar oluştur
            const debouncedLoadTable = debounce(() => {
              const user = auth.currentUser;
              if (user) loadPlacesTable(user);
            }, 300);
            
            const debouncedUpdateBackground = debounce((value) => {
              if (window.enhancedBackgroundManager) {
                window.enhancedBackgroundManager.updateBackgroundForCountry(value);
              }
            }, 200);
            
            countryFilter.addEventListener('change', () => {
              debouncedLoadTable();
              debouncedUpdateBackground(countryFilter.value);
            });
            
            visitedFilter.addEventListener('change', debouncedLoadTable);
          }
          
                  // Login öncesi dil değişikliği event listener
        if (preLoginLanguage) {
          preLoginLanguage.addEventListener('change', () => {
            currentLanguage = preLoginLanguage.value;
            updatePreLoginText();
          });
        }
        

        
        // Login öncesi metinleri güncelle
        function updatePreLoginText() {
          const texts = {
            tr: {
              loginButtonText: 'Google ile Giriş Yap',
              languageLabel: 'Dil / Language:'
            },
            en: {
              loginButtonText: 'Sign in with Google',
              languageLabel: 'Language / Dil:'
            }
          };
          
          const currentTexts = texts[currentLanguage];
          
          if (loginButtonText) {
            loginButtonText.textContent = currentTexts.loginButtonText;
          }
          
          // Dil seçici label'ını güncelle
          const languageLabel = document.querySelector('label[for="preLoginLanguage"]');
          if (languageLabel) {
            languageLabel.textContent = currentTexts.languageLabel;
          }
        }
        
        // UI metinlerini güncelle
        function updateUIText() {
          const texts = {
            tr: {
              addPlaceBtn: 'Ekle',
              addLocationBtn: 'Turistik Yerleri Ekle',
              searchBox: 'Yeni yer adı...',
              locationSuggestionBox: 'Şehir veya ülke adı...',
              createRouteBtn: '🗺️ Seçili Yerler İçin Rota Oluştur',
              visitedFilter: {
                all: 'Tümü',
                visited: 'Gezildi',
                notvisited: 'Gezilmedi'
              },
              tableHeaders: {
                name: 'Yer Adı',
                city: 'Şehir',
                category: 'Kategori',
                description: 'Açıklama',
                visited: 'Ziyaret Edildi mi?',
                select: 'Rota İçin Seç',
                maps: 'Google Maps',
                delete: 'Sil'
              }
            },
            en: {
              addPlaceBtn: 'Add',
              addLocationBtn: 'Add Tourist Places',
              searchBox: 'New place name...',
              locationSuggestionBox: 'City or country name...',
              createRouteBtn: '🗺️ Create Route for Selected Places',
              visitedFilter: {
                all: 'All',
                visited: 'Visited',
                notvisited: 'Not Visited'
              },
              tableHeaders: {
                name: 'Place Name',
                city: 'City',
                category: 'Category',
                description: 'Description',
                visited: 'Visited?',
                select: 'Select for Route',
                maps: 'Google Maps',
                delete: 'Delete'
              }
            }
          };
          
          const currentTexts = texts[currentLanguage];
          
          // Buton metinlerini güncelle
          if (addPlaceBtn) addPlaceBtn.textContent = currentTexts.addPlaceBtn;
          if (document.getElementById('addLocationBtn')) {
            document.getElementById('addLocationBtn').textContent = currentTexts.addLocationBtn;
          }
          if (document.getElementById('createRouteBtn')) {
            document.getElementById('createRouteBtn').textContent = currentTexts.createRouteBtn;
          }
          
          // Placeholder metinlerini güncelle
          if (searchBox) searchBox.placeholder = currentTexts.searchBox;
          if (document.getElementById('locationSuggestionBox')) {
            document.getElementById('locationSuggestionBox').placeholder = currentTexts.locationSuggestionBox;
          }
          
          // Filtre metinlerini güncelle
          const visitedFilter = document.getElementById('visitedFilter');
          if (visitedFilter) {
            visitedFilter.options[0].text = currentTexts.visitedFilter.all;
            visitedFilter.options[1].text = currentTexts.visitedFilter.visited;
            visitedFilter.options[2].text = currentTexts.visitedFilter.notvisited;
          }
          
          // Tablo başlıklarını güncelle
          const tableHeaders = document.querySelectorAll('#placesTable th');
          if (tableHeaders.length >= 8) {
            tableHeaders[0].textContent = currentTexts.tableHeaders.name;
            tableHeaders[1].textContent = currentTexts.tableHeaders.city;
            tableHeaders[2].textContent = currentTexts.tableHeaders.category;
            tableHeaders[3].textContent = currentTexts.tableHeaders.description;
            tableHeaders[4].textContent = currentTexts.tableHeaders.visited;
            tableHeaders[5].textContent = currentTexts.tableHeaders.select;
            tableHeaders[6].textContent = currentTexts.tableHeaders.maps;
            tableHeaders[7].textContent = currentTexts.tableHeaders.delete;
          }
        }
        });
        
        // Sayfa tamamen yüklendikten sonra arka planı güncelle
        window.addEventListener('load', () => {
          const countryFilter = document.getElementById('countryFilter');
          if (countryFilter && window.enhancedBackgroundManager) {
            console.log('Sayfa yüklendi, arka plan güncelleniyor:', countryFilter.value);
            window.enhancedBackgroundManager.updateBackgroundForCountry(countryFilter.value);
          }
          
          // UI metinlerini güncelle
        });

        // Tüm popüler ülke JSON dosyalarını otomatik bul ve oku
        async function getAllPopularCountryFiles() {
          // public/json/popular-*.json dosyalarını bulmak için bir endpoint veya sabit liste gerekir
          // Burada sabit bir listeyle ilerliyoruz (daha sonra dinamik yapılabilir)
          const countryFiles = [
            'popular-germany.json', 'popular-france.json', 'popular-italy.json', 'popular-spain.json', 'popular-netherlands.json',
            'popular-switzerland.json', 'popular-belgium.json', 'popular-austria.json', 'popular-poland.json', 'popular-czech-republic.json',
            'popular-hungary.json', 'popular-romania.json', 'popular-greece.json', 'popular-portugal.json', 'popular-croatia.json',
            'popular-slovenia.json', 'popular-bulgaria.json', 'popular-slovakia.json', 'popular-estonia.json', 'popular-latvia.json',
            'popular-lithuania.json', 'popular-south-korea.json', 'popular-japan.json', 'popular-turkey.json', 'popular-uk.json', 'popular-ireland.json'
          ];
          const base = '/json/';
          const all = [];
          for (const file of countryFiles) {
            try {
              const resp = await fetch(base + file);
              if (resp.ok) {
                const arr = await resp.json();
                all.push({ file, arr });
              }
            } catch {}
          }
          return all;
        }

        // Tüm ülkelerin kodlarını ve isimlerini döndür
        async function getAllPopularCountryCodes() {
          const all = await getAllPopularCountryFiles();
          const codes = new Set();
          all.forEach(({ arr }) => {
            arr.forEach(p => {
              if (p.country_tr) codes.add(p.country_tr.toUpperCase());
              if (p.country_en) codes.add(p.country_en.toUpperCase());
            });
          });
          return Array.from(codes).sort();
        }

        // Tüm popüler yerleri tek dizi olarak döndür
        async function getAllPopularPlaces() {
          const all = await getAllPopularCountryFiles();
          return all.flatMap(({ arr }) => arr);
        }

        // Ülke dropdown'ını tüm popüler ülkelerle güncelle
        async function updateCountryDropdown(user, allCountryCodes) {
          const countryFilter = document.getElementById('countryFilter');
          if (!countryFilter) return;
          countryFilter.innerHTML = '';
          allCountryCodes.forEach(c => {
            const opt = document.createElement('option');
            opt.value = c;
            opt.textContent = c;
            countryFilter.appendChild(opt);
          });
          // Kullanıcının mevcut ülkesini koru
          if (!countryFilter.value) countryFilter.value = 'ALMANYA';
        }

        function getEnglishCountryKeySafe(country) {
          if (window.enhancedBackgroundManager && typeof window.enhancedBackgroundManager.getEnglishCountryKey === 'function') {
            return window.enhancedBackgroundManager.getEnglishCountryKey(country);
          }
          // Local fallback (kısa versiyon)
          const map = {
            'türkiye': 'turkey', 'almanya': 'germany', 'fransa': 'france', 'italya': 'italy', 'ispanya': 'spain',
            'yunanistan': 'greece', 'hollanda': 'netherlands', 'belçika': 'belgium', 'avusturya': 'austria',
            'isviçre': 'switzerland', 'portekiz': 'portugal', 'çek cumhuriyeti': 'czech republic', 'polonya': 'poland',
            'romanya': 'romania', 'bulgaristan': 'bulgaria', 'letonya': 'latvia', 'litvanya': 'lithuania',
            'estonya': 'estonia', 'macaristan': 'hungary', 'slovakya': 'slovakia', 'slovenya': 'slovenia',
            'hirvatistan': 'croatia', 'sırbistan': 'serbia', 'ukrayna': 'ukraine', 'norveç': 'norway',
            'isveç': 'sweden', 'finlandiya': 'finland', 'güney kore': 'south korea', 'japonya': 'japan',
            'çin': 'china', 'abd': 'usa', 'amerika': 'usa', 'birleşik krallık': 'uk'
          };
          const norm = country.toLowerCase().replace(/ç/g,'c').replace(/ğ/g,'g').replace(/ı/g,'i').replace(/ö/g,'o').replace(/ş/g,'s').replace(/ü/g, 'u');
          return map[norm] || norm;
        }

        // Gelişmiş Türkçe büyük harf dönüşümü fonksiyonu
        function toTurkishUpper(str) {
          return str
            .replace(/i/g, 'İ')
            .replace(/ı/g, 'I')
            .replace(/I/g, 'İ')
            .replace(/ş/g, 'Ş')
            .replace(/ğ/g, 'Ğ')
            .replace(/ü/g, 'Ü')
            .replace(/ö/g, 'Ö')
            .replace(/ç/g, 'Ç')
            .toUpperCase();
        }

        // --- Ülke combobox'ını Türkçe isme göre alfabetik sırala ---
        async function updateCountryDropdownWithPopularOnly() {
          const countryFilter = document.getElementById('countryFilter');
          if (!countryFilter) return;
          // 1. Popüler ülkeleri oku
          const allPopular = await getAllPopularCountryCodes(); // normalize edilmiş İngilizce anahtarlar
          // 2. Tekrarları engelle
          const allCountries = Array.from(new Set(allPopular));
          // 3. Türkçe isme göre sırala
          allCountries.sort((a, b) => {
            const trA = toTurkishUpper(countryNames[a]?.[currentLang] || a);
            const trB = toTurkishUpper(countryNames[b]?.[currentLang] || b);
            return trA.localeCompare(trB, 'tr');
          });
          // 4. Dropdown'u doldur
          countryFilter.innerHTML = '';
          allCountries.forEach(englishKey => {
            const opt = document.createElement('option');
            opt.value = englishKey;
            const trName = countryNames[englishKey]?.[currentLang] || englishKey;
            opt.textContent = toTurkishUpper(trName);
            countryFilter.appendChild(opt);
          });
          // Varsayılan ülke: ALMANYA
          if (!countryFilter.value && allCountries.includes('germany')) {
            countryFilter.value = 'germany';
            // Ülke seçildiğinde arka planı güncelle
            if (window.enhancedBackgroundManager) {
              console.log('Varsayılan ülke seçildi, arka plan güncelleniyor:', countryFilter.value);
              setTimeout(() => {
                window.enhancedBackgroundManager.updateBackgroundForCountry(countryFilter.value);
              }, 200);
            }
          }
        }

        // --- Sayfa ilk açıldığında ve kullanıcı değiştiğinde ülke dropdown'unu güncelle ---
        document.addEventListener('DOMContentLoaded', () => {
          updateCountryDropdownWithPopularOnly();
        });
    </script>
    
    <!-- Settings Modal -->
    <div id="settingsModal" class="settings-modal">
        <div class="settings-modal-content">
            <div class="settings-header">
                <h2 class="settings-title">Profil</h2>
                <button class="close-btn" onclick="closeSettingsModal()">&times;</button>
            </div>
            <div class="settings-body">
                <!-- Status Messages in Modal -->
                <div id="modalStatusMessage" style="margin-bottom: 15px;"></div>
                
                <!-- Profile Section -->
                <div class="profile-section">
                    <div class="profile-info">
                        <img id="modalUserAvatar" class="profile-avatar" src="" alt="User Avatar">
                        <div class="profile-details">
                            <h3 id="modalUserName">Kişisel Bilgiler</h3>
                            <p>Profil bilgilerinizi düzenleyin</p>
                        </div>
                    </div>
                    <button class="edit-profile-btn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z" />
                        </svg>
                        Profili Düzenle
                    </button>
                </div>
                
                <!-- Connection Settings -->
                <div class="connection-settings">
                    <h3 class="section-title">Bağlantı Ayarları</h3>
                    
                    <div class="connection-item">
                        <div class="connection-info">
                            <svg class="connection-icon" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                            </svg>
                            <span class="connection-name">X'e Bağlan</span>
                        </div>
                        <div class="toggle-switch" onclick="toggleConnection('twitter')"></div>
                    </div>
                    
                    <div class="connection-item">
                        <div class="connection-info">
                            <svg class="connection-icon" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z"/>
                            </svg>
                            <span class="connection-name">Facebook'a Bağlan</span>
                        </div>
                        <div class="toggle-switch" onclick="toggleConnection('facebook')"></div>
                    </div>
                    
                    <div class="connection-item">
                        <div class="connection-info">
                            <svg class="connection-icon" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/>
                                <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/>
                                <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z" fill="#FBBC05"/>
                                <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/>
                            </svg>
                            <span class="connection-name">Google'a Bağlan</span>
                        </div>
                        <div class="toggle-switch active" onclick="toggleConnection('google')"></div>
                    </div>
                </div>
                
                <!-- Account Management -->
                <div class="account-management">
                    <h3 class="section-title">Hesap Yönetimi</h3>
                    
                    <div class="danger-zone">

                        <p style="color: #6c757d; font-size: 12px; margin-bottom: 12px;">Hesabınızı sildikten sonra geri dönüş yoktur. Lütfen emin olun.</p>
                        <button class="delete-account-btn" onclick="deleteAccount()">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" />
                            </svg>
                            Hesabı Sil
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Settings Modal Functions
        function openSettingsModal() {
            const modal = document.getElementById('settingsModal');
            const modalUserAvatar = document.getElementById('modalUserAvatar');
            const modalUserName = document.getElementById('modalUserName');
            
            // Kullanıcı bilgilerini modal'a aktar
            const userAvatar = document.getElementById('userAvatar');
            const userName = document.getElementById('userName');
            
            if (userAvatar && userName) {
                modalUserAvatar.src = userAvatar.src;
                modalUserName.textContent = userName.textContent;
            }
            
            // Bağlantı durumlarını kontrol et ve toggle'ları güncelle
            updateConnectionToggles();
            
            modal.style.display = 'block';
        }
        
        // Bağlantı durumlarını kontrol et ve toggle'ları güncelle
        function updateConnectionToggles() {
            const user = auth.currentUser;
            if (!user) return;
            
            console.log('=== Bağlantı Durumları Kontrol Ediliyor ===');
            console.log('Kullanıcı:', user.uid);
            console.log('Provider Data:', user.providerData);
            
            // Toggle'ları daha spesifik selector'larla bul
            const connectionItems = document.querySelectorAll('.connection-item');
            let twitterToggle, facebookToggle, googleToggle;
            
            connectionItems.forEach(item => {
                const connectionName = item.querySelector('.connection-name').textContent;
                const toggle = item.querySelector('.toggle-switch');
                
                if (connectionName.includes('X\'e Bağlan')) {
                    twitterToggle = toggle;
                } else if (connectionName.includes('Facebook\'a Bağlan')) {
                    facebookToggle = toggle;
                } else if (connectionName.includes('Google\'a Bağlan')) {
                    googleToggle = toggle;
                }
            });
            
            // Toggle'ları temizle
            if (twitterToggle) twitterToggle.classList.remove('active');
            if (facebookToggle) facebookToggle.classList.remove('active');
            if (googleToggle) googleToggle.classList.remove('active');
            
            // Provider'ları kontrol et
            user.providerData.forEach(provider => {
                console.log('Provider ID:', provider.providerId);
                
                switch (provider.providerId) {
                    case 'twitter.com':
                        if (twitterToggle) {
                            twitterToggle.classList.add('active');
                            console.log('X (Twitter) bağlantısı aktif - toggle güncellendi');
                        }
                        break;
                    case 'facebook.com':
                        if (facebookToggle) {
                            facebookToggle.classList.add('active');
                            console.log('Facebook bağlantısı aktif - toggle güncellendi');
                        }
                        break;
                    case 'google.com':
                        if (googleToggle) {
                            googleToggle.classList.add('active');
                            console.log('Google bağlantısı aktif - toggle güncellendi');
                        }
                        break;
                }
            });
            
            console.log('=== Bağlantı Durumları Güncellendi ===');
        }
        
        function closeSettingsModal() {
            const modal = document.getElementById('settingsModal');
            modal.style.display = 'none';
        }
        
        async function toggleConnection(provider) {
            const event = window.event;
            const toggle = event.currentTarget;
            
            // Eğer toggle zaten aktifse, bağlantıyı kes
            if (toggle.classList.contains('active')) {
                try {
                    const user = auth.currentUser;
                    if (user && provider === 'twitter') {
                        // Twitter bağlantısını kes
                        const { unlink } = await import('https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js');
                        await unlink(user, 'twitter.com');
                        console.log('Twitter bağlantısı kesildi');
                        showStatus('X (Twitter) bağlantısı kesildi.', 'success');
                    } else if (user && provider === 'facebook') {
                        // Facebook bağlantısını kes
                        const { unlink } = await import('https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js');
                        await unlink(user, 'facebook.com');
                        console.log('Facebook bağlantısı kesildi');
                        showStatus('Facebook bağlantısı kesildi.', 'success');
                    }
                    toggle.classList.remove('active');
                } catch (error) {
                    console.error(`${provider} bağlantısı kesilirken hata:`, error);
                    showStatus(`${provider.charAt(0).toUpperCase() + provider.slice(1)} bağlantısı kesilirken hata oluştu.`, 'error');
                }
                return;
            }
            
            // Yeni bağlantı kur
            try {
                if (provider === 'twitter') {
                     console.log('=== X (Twitter) Bağlantı İşlemi Başlıyor ===');
                     showStatus('X (Twitter) ile bağlanılıyor...', 'info');
                     
                     console.log('TwitterAuthProvider oluşturuluyor...');
                     const twitterProvider = new TwitterAuthProvider();
                     console.log('TwitterAuthProvider oluşturuldu:', twitterProvider);
                     
                     // Eğer kullanıcı zaten giriş yapmışsa, hesabı bağla
                     if (auth.currentUser) {
                         console.log('Mevcut kullanıcı var, account linking deneniyor:', auth.currentUser.uid);
                         console.log('linkWithPopup çağrılıyor...');
                         try {
                             const result = await linkWithPopup(auth.currentUser, twitterProvider);
                             console.log('X (Twitter) hesabı mevcut kullanıcıya bağlandı:', result.user);
                             showStatus('X (Twitter) hesabınız mevcut hesabınıza başarıyla bağlandı!', 'success');
                             toggle.classList.add('active');
                         } catch (linkError) {
                              console.error('=== LINK HATASI ===');
                              console.error('Hata kodu:', linkError.code);
                              console.error('Hata mesajı:', linkError.message);
                              console.error('Tam hata objesi:', linkError);
                              
                              if (linkError.code === 'auth/account-exists-with-different-credential') {
                                  showStatus('Bu Twitter hesabı zaten başka bir hesapla bağlı. Önce o hesaptan bağlantıyı kesin.', 'error');
                              } else if (linkError.code === 'auth/provider-already-linked') {
                                  showStatus('Twitter hesabınız zaten bu hesaba bağlı.', 'info');
                                  toggle.classList.add('active');
                              } else if (linkError.code === 'auth/credential-already-in-use') {
                                  showStatus('⚠️ Bu X (Twitter) hesabı zaten başka bir hesaba bağlı!\n\n🔧 Çözüm seçenekleri:\n• Farklı bir X hesabı kullanın\n• Mevcut bağlantının olduğu hesaba giriş yapıp bağlantıyı kesin', 'error');
                              } else if (linkError.code === 'auth/invalid-credential') {
                                  showStatus('Twitter bağlantısında hata oluştu. Lütfen tekrar deneyin veya farklı bir hesap kullanın.', 'error');
                              } else if (linkError.code === 'auth/popup-closed-by-user') {
                                  showStatus('Twitter bağlantı penceresi kapatıldı. Lütfen tekrar deneyin.', 'error');
                              } else if (linkError.code === 'auth/popup-blocked') {
                                  showStatus('Popup engellendi. Lütfen popup engelleyiciyi kapatın ve tekrar deneyin.', 'error');
                              } else {
                                  console.error('Bilinmeyen hata, üst catch\'e gönderiliyor:', linkError);
                                  throw linkError; // Diğer hataları üst catch'e gönder
                              }
                              return; // Hata durumunda fonksiyondan çık
                          }
                     } else {
                         // Kullanıcı giriş yapmamışsa normal sign in yap
                         console.log('Kullanıcı giriş yapmamış, normal sign in yapılıyor');
                         console.log('signInWithPopup çağrılıyor...');
                         try {
                             const result = await signInWithPopup(auth, twitterProvider);
                             console.log('X (Twitter) ile giriş başarılı:', result.user);
                             showStatus('X (Twitter) hesabınız başarıyla bağlandı!', 'success');
                             toggle.classList.add('active');
                         } catch (signInError) {
                             console.error('=== SIGN IN HATASI ===');
                             console.error('Hata kodu:', signInError.code);
                             console.error('Hata mesajı:', signInError.message);
                             console.error('Tam hata objesi:', signInError);
                             throw signInError; // Üst catch'e gönder
                         }
                     }
                     
                     console.log('=== X (Twitter) Bağlantı İşlemi Tamamlandı ===');
                    
                } else if (provider === 'facebook') {
                    showStatus('Facebook bağlantısı henüz aktif değil.', 'error');
                    
                } else if (provider === 'google') {
                    // Google zaten bağlı, hiçbir şey yapma
                    toggle.classList.add('active');
                    showStatus('Google hesabınız zaten bağlı.', 'info');
                }
                
            } catch (error) {
                console.error(`${provider} bağlantı hatası:`, error);
                
                let errorMessage = `${provider.charAt(0).toUpperCase() + provider.slice(1)} ile bağlantı kurulurken hata oluştu.`;
                
                if (error.code === 'auth/popup-closed-by-user') {
                    errorMessage = 'Bağlantı işlemi iptal edildi.';
                } else if (error.code === 'auth/unauthorized-domain') {
                    errorMessage = 'Bu domain için yetki yok. Firebase Console\'da domain ekleyin.';
                } else if (error.code === 'auth/operation-not-allowed') {
                    errorMessage = `${provider.charAt(0).toUpperCase() + provider.slice(1)} girişi etkinleştirilmemiş.`;
                }
                
                showStatus(errorMessage, 'error');
            }
        }
        
        // Modal dışına tıklandığında kapat
        window.onclick = function(event) {
            const modal = document.getElementById('settingsModal');
            if (event.target === modal) {
                closeSettingsModal();
            }
        }
        
        // Delete Account Function
        async function deleteAccount() {
            const user = auth.currentUser;
            if (!user) {
                showStatus('Kullanıcı oturumu bulunamadı.', 'error');
                return;
            }
            
            // Onay dialogu göster
            const confirmDelete = confirm(
                'Hesabınızı silmek istediğinizden emin misiniz?\n\n' +
                '⚠️ Bu işlem geri alınamaz!\n' +
                '• Tüm verileriniz silinecek\n' +
                '• Kaydettiğiniz tüm yerler kaybolacak\n' +
                '• Hesap bağlantıları kesilecek\n\n' +
                'Devam etmek için "Tamam"a basın.'
            );
            
            if (!confirmDelete) {
                showStatus('Hesap silme işlemi iptal edildi.', 'info');
                return;
            }
            

            
            try {
                showStatus('Hesap siliniyor...', 'info');
                
                // Firestore fonksiyonlarını import et
                const { doc, collection, getDocs, deleteDoc } = await import('https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js');
                
                // Önce Firestore'daki kullanıcı verilerini sil
                const userDocRef = doc(db, 'users', user.uid);
                const placesCollectionRef = collection(db, 'users', user.uid, 'places');
                
                // Kullanıcının tüm yerlerini sil
                const placesSnapshot = await getDocs(placesCollectionRef);
                const deletePromises = placesSnapshot.docs.map(doc => deleteDoc(doc.ref));
                await Promise.all(deletePromises);
                
                // Kullanıcı dokümanını sil
                await deleteDoc(userDocRef);
                
                // Firebase Authentication'dan kullanıcıyı sil
                await deleteUser(user);
                
                showStatus('Hesabınız başarıyla silindi. Ana sayfaya yönlendiriliyorsunuz...', 'success');
                
                // Modal'ı kapat ve ana sayfaya yönlendir
                setTimeout(() => {
                    closeSettingsModal();
                    window.location.href = '/index.html';
                }, 2000);
                
            } catch (error) {
                console.error('Hesap silme hatası:', error);
                
                let errorMessage = 'Hesap silinirken hata oluştu.';
                
                if (error.code === 'auth/requires-recent-login') {
                    errorMessage = 'Güvenlik nedeniyle hesabı silmek için yeniden giriş yapmanız gerekiyor. Lütfen çıkış yapıp tekrar giriş yapın.';
                } else if (error.code === 'permission-denied') {
                    errorMessage = 'Veri silme izni reddedildi. Lütfen tekrar deneyin.';
                }
                
                showStatus(errorMessage, 'error');
            }
        }
    </script>
    
    <script src="/js/enhanced-background-manager.js"></script>
</body>

</html>